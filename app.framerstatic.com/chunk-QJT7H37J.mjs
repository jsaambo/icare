import{a as Qe}from"https://app.framerstatic.com/chunk-WFUCVR7W.mjs";import{a as Ge}from"https://app.framerstatic.com/chunk-7LQZYUVJ.mjs";import{o as ne}from"https://app.framerstatic.com/chunk-NOA5YT74.mjs";import{a as Ye,b as $e}from"https://app.framerstatic.com/chunk-2YI7VWM5.mjs";import{jd as te}from"https://app.framerstatic.com/chunk-FEMUQY7R.mjs";import{e as xe}from"https://app.framerstatic.com/chunk-XP3D7M44.mjs";import{Be as oe,Fe as Ae,He as ce,Re as de,Tf as He,Uf as Ke,gg as ze,lb as Be,qf as Ue,ue as _e,ve as je,zb as Fe}from"https://app.framerstatic.com/chunk-D4BIMG4Z.mjs";import{a as Ee}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{Zc as q,_c as Ve,cd as Ne,gd as _,hd as j,jd as we,md as We,pd as ee,sd as D}from"https://app.framerstatic.com/chunk-ZI4WEUOX.mjs";import{$h as V,Lb as Se,Ol as B,Vu as F,ac as Te,bc as ve,l as G,le as ye,su as Re,wi as Z,xd as J,xi as ke,yh as Ce,yi as p,zi as W}from"https://app.framerstatic.com/chunk-Q5MQYIKV.mjs";import{g as De,i as Oe,m as Me}from"https://app.framerstatic.com/chunk-BL4ITT6Z.mjs";import{a as Ie,b as X,i as he,l as Pe}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Rd as Le,a as Q,b as w}from"https://app.framerstatic.com/chunk-BWUNBOFS.mjs";import{l as pe,u as ge,z as be}from"https://app.framerstatic.com/chunk-IZV4HDYJ.mjs";import{a as N}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as P}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";function Xe(e){let t=[],o=new Set,n=e.get(e.root.homePageNodeId);n&&t.push(n);let i=e.getRouteSegmentRootNode();for(let r of i.walk()){if(!ye(r)||!r.webPageId||o.has(r.webPageId))continue;let s=e.get(r.webPageId);s&&(o.add(r.webPageId),t.push(s))}return t}var Je=P(Q());var Ct=ge("usePreloadedScope");function Ze(e){let t=te();Je.default.useEffect(()=>{if(!X(e))return;let o=t.tree.get(e);!xe(o)||o.isLoaded()||(Ct.debug("Loading scope node",e),o.load())},[e])}function Po(e,t,o){let n=te(),i=p(e)?e.webPageId:null;return Ze(i),Qe(["Tree"],()=>xt(n.tree,e,t,o,n.stores.scopeStore.active),[e,t,o,n.stores.scopeStore.active],!0)}function Rt(e){let t={};for(let o in e){let n=e[o];Te(n)||X(n)||q(n)&&Nt(n)&&(t[o]=!0)}return t}function xt(e,t,o,n,i){let r=Xe(e),s={},l=[],c=[];for(let m of r)s[m.id]=m,m.dataIdentifier&&ne(e,m,o)&&c.push(m),l.push(m);let a=p(t)?s[t.webPageId]:void 0,d=p(t)&&!a,g=D(e,a),u=g?We(g):[],b=u.every(m=>o?.has(m)),v;return n&&n!==V&&(v=e.root.getNonDefaultLocale(n)?.slug),{warnings:p(t)&&t.pathVariables?Rt(t.pathVariables):void 0,targetWebPagePathVariables:u,link:Z(t)?t:void 0,selectedWebPageId:a?.id,selectedPageMissing:d,collectionItemVariableInScope:b,pageLinkOptions:l,collectionWithPathVariableInScopeOptions:c,scrollTargetOptions:a?Vt(e,i,a.id)?.nodes:void 0,webPageDataIdentifier:a?.dataIdentifier,localeSlug:v,localeId:n}}function Vt(e,t,o){let n=new Set;if(!o)return;let i=e.get(o)?.loaded;if(!i)return;let r=e.getScopeNodeFor(t),l=J(r)&&r.abTestingParentId===o?r:i;for(let d of l.walk())Ne(d)&&n.add(d);let c=[],a=new Set;for(let d of n)c.push(d),a.add(d.id);return{nodes:c,ids:a}}function Nt({identifier:e,collectionItemId:t,key:o,value:n}){let i=G.dataForIdentifier(e);if(!i)return!1;let r=we(void 0,i,V,t);return!r||i.annotations?.framerSlug!==o?!1:n!==r}function ie(e,t,o){return e.replace(Se,(n,i)=>i===t.id?o.slug:`:${t.name.toLowerCase()}`)}function qe(e,t,o,n="Home",i){let r=p(t)&&!i?Ve(t):void 0,s=p(t)?Ge(e,t):null;if(!t||!Z(t)||!s)return;let l="";if(o&&o!==V){let a=e.root.getNonDefaultLocale(o);a?.slug&&(l="/"+a.slug)}if(s.id===e.root.homePageNodeId)return l?l+"/":n;let c=D(e,s);if(c){if(r?.identifier){let a=F(e,r.identifier);if(a){let d=_(e,o),u=j(a,d)[r.collectionItemId];if(u){let b=a.variables.find(B);if(b){let v={id:r.collectionItemId,slug:u};return l+ie(c,b,v)}}}return}if(J(s)&&s.dataIdentifier){let a=F(e,s.dataIdentifier);if(a&&!r){let d=_(e,o),g=j(a,d),u=a.variables.find(B);if(u)return l+ee(c,g,u)}}return l+c}}var I=P(Q());var ue=P(Q());var A=P(Q());var et="tooltip_tzsvjdc",tt="tooltipTitle_t1ehb6cn";var f=P(w()),Dt=A.default.createContext(void 0);function ot({delay:e,direction:t,interactive:o=!0,icon:n,className:i,initialVisibility:r,...s}){let l=A.default.useRef(null),c=A.default.useContext(Dt),{triggerProps:a,tooltipProps:d}=He({className:et,direction:t,interactive:o,offset:5,triggerRef:l,offsetXRef:c,delay:e,initialVisibility:r});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_e,{...a,className:i,ref:l,children:n}),(0,f.jsx)(Ot,{...s,...d})]})}function Ot(e){return A.default.useEffect(()=>{if(e.image){let t=new Image;t.src=e.image,t.alt=e.title,t.decode?.().catch(pe)}},[e.image,e.title]),(0,f.jsx)(Ke,{...e,tint:e.tint??De.panelBackground,children:(0,f.jsxs)(je,{gap:Oe.panelPadding,direction:"column",children:[e.image&&(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:e.image,alt:e.title,width:"100%",style:{borderRadius:5,marginBottom:5,aspectRatio:"1.75"},decoding:"async"})}),e.title&&(0,f.jsx)(de,{className:tt,style:{fontWeight:Me.weight.heading},children:(0,f.jsx)(ce,{children:e.title})}),(0,f.jsx)("div",{children:(0,f.jsx)(de,{children:(0,f.jsx)(ce,{children:e.text})})}),e.actions]})})}var me=12,nt="tooltipIcon_t1vnemam",it="inputWithError_ijpnope",rt="clearButton_c6pgvh1";var re=P(w()),lt=ue.default.memo(e=>{let{selectedCollectionItemId:t,selectedCollectionItemSlugIsOutdated:o,selectedLink:n,webPageDataIdentifier:i,onChange:r}=e,s=Ae(),l=ue.default.useRef(null),c=Et(o,n,i,t,r,s);return c?(0,re.jsx)(ot,{...c,direction:"right",delay:"long",className:nt,icon:(0,re.jsx)(Fe,{style:{width:me,height:me},ref:l})}):null});function Mt(e,t,o,n){let i=G.dataForIdentifier(t);N(i,"Data should exist");let r=Ye(void 0,i,o)??$e(void 0,i);if(!r)return;let s=i.annotations?.framerSlug;N(Le(s),"Collection must have a slug key annotation");let l={identifier:i.identifier,collectionItemId:o,key:s,value:r.slug};n({...e,pathVariables:{...e.pathVariables,[s]:l}},!0)}function Et(e,t,o,n,i,r){if(e&&p(t)&&o&&n)return{title:"Link Error",text:"The linked path is outdated.",actions:(0,re.jsx)(oe,{variant:"primary",enabled:!r,onClick:()=>Mt(t,o,n,i),children:"Update Link"}),interactive:!0}}var T=P(w()),Bt="framerUI-link-input",Ft={x:0,y:10};function _t(e,t){if(!t||t.length===0)return;N(t.length<=1,"WebPages only support a single path variable at this time.");let o=t[0];if(!o)return;let n=e.pathVariables?.[o];if(q(n))return n.collectionItemId}var jt=/\W+/;function At(e){return new Set(e.split(jt))}var kn=({tree:e,link:t,onChange:o,constantChange:n,supportsPageLinks:i,hideSlugValues:r,supportsVariables:s,pageLinkInfo:l,variableInfo:c,autoFocus:a,className:d,enabled:g,readOnly:u,tabIndex:b,onMouseDown:v,hideErrorTooltip:m=!1,homePageName:y="Home",onClear:U,menuOffset:O=Ft,menuWidth:h,menuClassName:k,onOpenChange:L,backdropEnabled:S,linkListStickySectionHeaders:R})=>{let{pageLinkOptions:C,collectionWithPathVariableInScopeOptions:H,warnings:dt,selectedPageMissing:mt,webPageDataIdentifier:ut,targetWebPagePathVariables:K}=l,fe=!!(K&&K.length>0&&K.some(x=>!!dt?.[x])),z=fe||mt,ft=ke(t)?t.url:"",M=qe(e,t,l.localeId,y,r)??(z?"":ft),[le,pt]=(0,I.useState)(()=>ct(M)),Y=e.root.homePageNodeId,E=(0,I.useMemo)(()=>st({tree:e,pageLinkInfo:l,webPages:C,homePageId:Y,homePageName:y,variableInfo:c,collectionPageType:r?"noSlugInScope":"showSlugValues"}),[e,l,C,Y,y,c,r]),$=(0,I.useMemo)(()=>st({tree:e,pageLinkInfo:l,webPages:H,homePageId:Y,variableInfo:c,homePageName:y,collectionPageType:"slugInScope"}),[e,l,H,Y,c,y]),gt=(0,I.useCallback)((x,se)=>{if(se||n){if(x===M)return;let Lt=E.get(x)??$.get(x)??W({url:x});if(o(Lt,se),se)return}let yt=ct(x);pt(yt)},[n,M,E,$,o]),bt=(0,I.useMemo)(()=>zt(E,$,le),[E,$,le]),It=E.get(M),ht=!!c?.idOfMutableVariableProvider,Pt=s&&ht,St=(0,I.useContext)(ze)===null,[Tt]=(0,I.useState)(()=>(Pe(t)||he(t)||Ce(t))&&!Pt&&St),vt=p(l.link)?_t(l.link,K):void 0;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ue,{id:Bt,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:i,showAllWhenOpened:p(t),tabIndex:b,onMouseDown:v,searchItemValue:!!le,items:bt,value:M,placeholder:Ut(t,z,i),constantChange:!0,onChange:gt,autoFocus:Ie(a)?a:Tt,menuOffset:O,enabled:g,readOnly:u,getSearchTokens:At,className:Ee(z&&it),wrapperClassName:d,rightSlot:U?(0,T.jsx)(oe,{variant:"clean",type:"button",className:rt,onClick:U,title:"Remove Link",children:(0,T.jsx)(Be,{})}):void 0,onOpenChange:L,backdropEnabled:S,menuWidth:h,menuClassName:k,stickySectionHeaders:R,containOverscroll:!0}),z&&!m&&(0,T.jsx)(lt,{selectedCollectionItemId:vt,selectedCollectionItemSlugIsOutdated:fe,selectedLink:It,webPageDataIdentifier:ut,onChange:o})]})};function Ut(e,t,o){return t?"Missing":be(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function ae(e,t,o,n=!1){n?o.unshift([t,e]):o.push([t,e])}function Ht(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let n of e.combined.get(o)||[])if(n.type==="collectionreference"&&n.dataIdentifier===t)return o}}function st({tree:e,pageLinkInfo:t,webPages:o,homePageId:n,variableInfo:i,homePageName:r,collectionPageType:s}){let l=[],c=t.localeSlug?`/${t.localeSlug}`:"";return o.forEach(a=>{let d=n===a.id,g=d&&!c?r:D(e,a);if(!g)return l;if(a.dataIdentifier){let u=F(e,a.dataIdentifier);if(!u)return;let b=u.variables.find(B);if(!b)return;let v=t.localeId??V,m=b.id,y=m;if(i&&!i.ids.has(m)){for(let h of i.ids)if(Re(h,m)){y=h;break}}let U=_(e,v),O=j(u,U);if(s==="slugInScope"||s==="noSlugInScope"){let h=!!(i&&ne(e,a,i.ids)),k=ee(g,O,b);if(s==="slugInScope"&&h){N(i,"variableInfo should exist when inScope");let L=Ht(i,a.dataIdentifier),S=L?e.get(L):void 0,R=S?{[m]:ve(y,S.originalid??S.id)}:void 0,C=W({webPageId:a.id,pathVariables:R});ae(C,c+k,l)}else if(s==="noSlugInScope"&&!h){let L=Object.entries(O)[0];if(!L)return l;let[S,R]=L,C={identifier:a.dataIdentifier,collectionItemId:S,key:m,value:R},H=W({webPageId:a.id,pathVariables:{[m]:C}});ae(H,c+k,l)}return l}for(let[h,k]of Object.entries(O)){let S=ie(g,b,{id:h,slug:k}),R={identifier:a.dataIdentifier,collectionItemId:h,key:m,value:k},C=W({webPageId:a.id,pathVariables:{[m]:R}});ae(C,c+S,l,d)}}else{let u=W({webPageId:a.id});ae(u,c+g,l,d)}}),new Map(l)}function ct(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let n=t.split("/").filter(Boolean);for(;n.length>0;){let i=n.join("/")+"/",r="/"+i;if(t.startsWith(r)||t.startsWith(i))return r;n.pop()}return null}var Kt=/\/$/u;function zt(e,t,o){let n=[],i=Array.from(e.keys()),r=Array.from(t.keys());if(o){let s=[];[...r,...i].forEach(a=>{if(!a.startsWith(o))return;let d=a.replace(o,".../");s.push({type:"option",value:a,title:d})});let c=o.replace(Kt,"");return n.push({type:"section",value:c,title:c,items:s}),n}return r.length>0&&n.push({type:"section",value:"CMS",items:r.map(s=>({type:"option",value:s}))}),i.length>0&&n.push({type:"section",value:"Pages",items:i.map(s=>({type:"option",value:s}))}),n}export{Dt as a,ot as b,Ot as c,Xe as d,Ze as e,Po as f,xt as g,Vt as h,qe as i,Bt as j,kn as k};
//# sourceMappingURL=https://app.framerstatic.com/chunk-QJT7H37J.mjs.map
