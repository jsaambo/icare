import{a as L}from"https://app.framerstatic.com/chunk-FEMUQY7R.mjs";import{Td as w,md as R,sd as A}from"https://app.framerstatic.com/chunk-ZI4WEUOX.mjs";import{Ad as C,Gd as b,Hd as P,Kk as V,Lb as T,Ml as k,Ol as D,Vu as E,l as y,la as N,oq as F,qq as f}from"https://app.framerstatic.com/chunk-Q5MQYIKV.mjs";import{v as O}from"https://app.framerstatic.com/chunk-JH66VPYF.mjs";import{b as c,i as h}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{g as S}from"https://app.framerstatic.com/chunk-4CB4BQFV.mjs";import{D as g,K as v,u as M}from"https://app.framerstatic.com/chunk-IZV4HDYJ.mjs";import{a as p}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{j as a}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var $=M("EngineChanges");var z=class{constructor(){a(this,"changes",new Set);a(this,"addChanges",(...t)=>{for(let o of t)this.changes.add(o)});a(this,"changeObserverFlags",[]);a(this,"changeObservers",[]);a(this,"inSignalAllObservers",!1);a(this,"observersToRemove",[])}get flags(){return this.changes}has(...t){for(let o of t)if(this.changes.has(o))return!0;return!1}observe(...t){let o=t.pop(),r=t;return S.isDebugBuild&&r.some(n=>n===void 0)&&$.warn("changes.observe was called with undefined as one of the flags. It might be caused by observing a store that hasn't been instantiated yet."),this.changeObserverFlags.push(r),this.changeObservers.push(o),o}observeWithComponent(t,o,r){this.changeObserverFlags.push(t);let n=()=>{S.benchmarkSkipRendering||o.setState(r())};return this.changeObservers.push(n),n}removeObserver(t){if(this.inSignalAllObservers){this.observersToRemove.push(t);return}let o=this.changeObservers.indexOf(t);o!==-1&&(this.changeObserverFlags.splice(o,1),this.changeObservers.splice(o,1))}signalAllObservers(){if(!this.changes)return;let t=this.changes,o=this.changeObserverFlags,r=this.changeObservers;this.inSignalAllObservers=!0;for(let n=0;n<o.length;n++){let i=o[n];for(let l of i)if(t.has(l)){r[n]();break}}if(this.inSignalAllObservers=!1,this.observersToRemove.length>0){for(let n of this.observersToRemove)this.removeObserver(n);this.observersToRemove.length=0}this.changes.clear()}signalObserversFor(...t){let o=new Set(t),r=this.changeObserverFlags,n=this.changeObservers;for(let i=0;i<r.length;i++){let l=r[i];for(let s of l)if(o.has(s)){n[i]();break}}o.forEach(i=>this.changes.delete(i))}};function W(e){return e==="/"?"Home":(e=Z(e),e=K(e),e=U(e),e=G(e),e=e.split(" ").map(O).join(" "),e)}function K(e){return e.replace(/-+/gu," ")}function Z(e){return e.replace(T,"")}var B=/\s*\/+[/\s]*/gu;function G(e){return e.replace(B," / ")}function U(e){return e.replace(/^[/\s]+|[/\s]+$/gu,"")}var J=/\s+/gu,Q=/-+/gu;function ge(e){if(e==="Home")return"/";let t=e;return t=U(t),t=t.replace(B,"-"),t=t.replace(J,"-"),t=t.replace(Q,"-"),t=t.toLowerCase(),"/"+t}function Re(e,t){let o=t.instanceIdentifier,r=e.getPersistedModuleByLocalIdentifier(o),n=y.dataForIdentifier(o)??void 0;return{identifier:o,module:r,entity:n}}function Ae(e){return e.annotations?.framerSlug}function we(e,t="Collection"){return e.name?e.name.toLowerCase().includes("collection")?e.name:`${e.name.trim()} Collection`:t}function X(e){switch(e.toLowerCase()){case"title":case"name":case"label":return!0;default:return!1}}function Y(e){return k(e)&&X(e.name)}function ee(e){return e.variables.find(Y)}function te(e,t){if(h(t))return;let r=e.getControlProp(t.id)?.value||t.initialValue;if(c(r)&&r.length>0)return r}function oe(e){return e.variables.find(D)}function re(e,t){if(h(t))return;let r=e.getControlProp(t.id)?.value||t.initialValue;if(c(r)&&r.length>0)return r}function ze(e,t){let o=ee(e),r=te(t,o);if(c(r))return r;let n=oe(e),i=re(t,n);return c(i)?W(i):"Collection Item"}function I(e){let{ids:t}=e.stores.selectionStore,o=t[0];if(!o)return null;let r=e.tree.getNode(o);if(b(r))return r;if(P(r)){let n=e.tree.getNode(r.parentid);if(b(n))return n}return null}function We(e){let t=I(e);return t?t.id:null}function Be(e){let t=I(e);return t?t.name:null}function Ue(e){let t=e.getContentManagementNode()?.loaded;return t?t.children.length:0}function je(e,t,o){let r=A(e,t);return!r||!o?!1:R(r).every(i=>{if(!i)return!1;for(let l of o)if(l.endsWith(i))return!0;return!1})}function x(e){return e.type==="richtext"&&c(e.value)}function ne(e,t){let o=v(e);return r=>{let n=v(r);if(!(!n||!o)&&(n.kind==="localModuleExport"&&o.kind==="localModuleExport"&&n.localId===o.localId||n.kind==="externalModuleExport"&&o.kind==="externalModuleExport"&&n.moduleId===o.moduleId&&n.exportSpecifier===o.exportSpecifier))return t}}function j(e,t){return e.replaceAll(f,(o,r)=>{let n=t(r);return n?`${F}="${n}"`:o})}function ie(e,t){let o=e.getControlProps(),r={};for(let[n,i]of Object.entries(o)){if(!x(i))continue;let l=j(i.value,t),s;if(i.valueLocalized){s={};for(let m of Object.keys(i.valueLocalized)){let u=i.valueLocalized[m];if(!u)continue;if(!u.value){s[m]=u;continue}let _=j(u.value,t);s[m]={...u,value:_}}}if(i.value===l&&N(i.valueLocalized,s))continue;let d={...i,value:l};s&&(d.valueLocalized=s),r[V(n)]=d}return Object.keys(r).length>0?r:void 0}function He(e,t,o){let r=e.getContentManagementNode()?.loaded;if(!r)return;let n=ne(t,o);for(let i of r.children)for(let l of i.getUnsortedChildren()){let s=ie(l,n);s&&l.set(s)}}function le(e,t){let o=e.getControlProps();for(let r of Object.values(o))if(x(r)&&r.value.includes(t))return!0;return!1}function _e(e,t){let o=e.getContentManagementNode()?.loaded;if(!o)return!1;for(let r of o.children)for(let n of r.getUnsortedChildren())if(le(n,t))return!0;return!1}function $e(e){let t=new Set;for(let o of e.getUnsortedChildren()){let r=se(o);for(let n of r)t.add(n)}return[...t]}function se(e){let t=new Set,o=e.getControlProps();for(let r of Object.values(o)){if(!x(r))continue;let n=r.value.matchAll(f);for(let[,i]of n)g(i)&&t.add(i);if(r.valueLocalized)for(let i of Object.keys(r.valueLocalized)){let l=r.valueLocalized[i];if(!l?.value)continue;let s=l.value.matchAll(f);for(let[,d]of s)g(d)&&t.add(d)}}return[...t]}function qe(e,t,o){let r=E(e.tree,t);if(!r)return;let n=o??r.getUnsortedChildren()[0];e.stores.scopeStore.select(L,{keepHistory:!1}),e.stores.selectionStore.set(n??r)}function Ke(e){let t=I(e);if(!t)return!1;let o=e.stores.contentManagementStore;return o.multiSelectedItems||o.isCreatingNewItem()?!1:!t.managedByPlugin}function H(e,t){let o=e.stores.scopeStore.active;return p(C(o),"Content management node should be active"),o.children.toSorted(({name:r},{name:n})=>w(r||"",n||"",t))}function Ze(e,t){let o=e.stores.scopeStore.active;H(e,t).forEach(({id:n},i)=>{e.moveNode(n,o.id,i)})}function Ge(e,t){let o=e.stores.scopeStore.active;p(C(o),"Content management node should be active");let r=H(e,t);return o.children.every(({id:n},i)=>r[i]?.id===n)}export{z as a,W as b,ge as c,Re as d,Ae as e,we as f,ee as g,te as h,oe as i,re as j,ze as k,We as l,Be as m,Ue as n,je as o,ie as p,He as q,le as r,_e as s,$e as t,se as u,qe as v,Ke as w,Ze as x,Ge as y};
//# sourceMappingURL=https://app.framerstatic.com/chunk-NOA5YT74.mjs.map
