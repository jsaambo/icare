import{b as fS}from"https://app.framerstatic.com/chunk-B76FVMQ5.mjs";import{$ as my,$c as Ry,A as dy,Ab as Sy,B as uy,Ga as gy,K as py,Nf as qy,Of as Xy,Pc as Ty,Wf as Ky,Yf as Jn,Zc as ko,_c as Os,_d as Fi,aa as fy,ad as ky,bd as My,cd as Vy,dd as Py,de as Zc,dg as Zy,ed as Fy,ee as Gn,fd as Bs,fe as $s,ha as hy,hd as kt,id as zs,ig as Ai,jd as Ay,jf as jy,kd as Ly,kf as Jy,kg as rS,ld as Ey,lf as Us,lg as Hs,md as Oy,mg as SS,nd as By,ng as CS,of as _n,pd as zy,rg as bS,sa as Yc,tb as Es,xf as jn,ze as _y}from"https://app.framerstatic.com/chunk-OX5657WM.mjs";import{d as by,i as vy,t as Iy}from"https://app.framerstatic.com/chunk-NOA5YT74.mjs";import{a as Ny,c as wy,d as xy,g as Pi}from"https://app.framerstatic.com/chunk-XOOG2GMT.mjs";import{i as Gy}from"https://app.framerstatic.com/chunk-JB3A7NVR.mjs";import{k as Qc}from"https://app.framerstatic.com/chunk-HTH46QE2.mjs";import{b as br}from"https://app.framerstatic.com/chunk-SQD5XUIU.mjs";import{i as cy}from"https://app.framerstatic.com/chunk-5CTYCHND.mjs";import{J as ly}from"https://app.framerstatic.com/chunk-6ITRUDEE.mjs";import{a as od,b as cS}from"https://app.framerstatic.com/chunk-HWKTFWOQ.mjs";import{q as Uy}from"https://app.framerstatic.com/chunk-3YEJT6GO.mjs";import{a as yy}from"https://app.framerstatic.com/chunk-K24ZPX62.mjs";import{a as Wy,c as oS,d as nS,e as iS,f as aS,g as rd,i as sS,l as lS,m as Gs,n as dS,o as uS,p as pS,q as mS,t as yS}from"https://app.framerstatic.com/chunk-5KQ3SK2O.mjs";import{a as Yy,b as ed,c as Qy,e as td}from"https://app.framerstatic.com/chunk-VSBWNVLJ.mjs";import{d as Cy,f as Qr,g as Dy,i as $y,j as Hy}from"https://app.framerstatic.com/chunk-GXDC2KXO.mjs";import{a as Ws}from"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import{Ac as Tg,Bb as Xo,Bf as qg,Cb as lg,Cc as Ng,Ce as Og,Cf as Xg,De as Bg,Df as Kg,Ec as xs,Ef as Yg,Fc as wg,Ff as Qg,Gb as cg,Ib as ws,If as Zg,Jc as xg,Jf as ey,Jg as Ps,Kb as dg,Kf as ty,Lb as ug,Ld as Vs,Lf as ry,Mb as pg,Md as Ds,Mf as oy,Nb as bt,Nc as Rs,Ob as Un,Of as ny,Og as Fs,Pb as mg,Qb as Wn,Qc as Rg,Qf as Xc,Rc as kg,Sb as fg,Se as Hn,Sg as As,Tb as hg,Tc as Mg,Te as zg,Tg as iy,U as zt,Ub as gg,Ud as Dg,V as Zm,Va as eg,Vd as Pg,Ve as $g,Wd as Fg,Wg as ay,X as tf,Xa as Ts,Xd as qc,Z as lf,_ as cf,_e as Ug,a as Gm,aa as df,bc as Sg,cc as Cg,dc as bg,ea as mf,fa as ff,fb as tg,fe as Ag,gb as rg,gd as Vg,ha as Fn,hb as og,i as _m,jb as ng,ka as rs,lb as ig,ld as Vi,lf as Wg,mb as Cr,mf as Hg,nf as Gg,ob as ag,pb as sg,qb as Ro,rb as it,rc as vg,re as Lg,sb as Ns,te as Eg,tf as _g,uf as jg,vf as Jg,yc as Ig,yd as ks,zb as Jc,zd as Ms}from"https://app.framerstatic.com/chunk-FEMUQY7R.mjs";import{e as Ct,k as qo,m as Zh,v as yg}from"https://app.framerstatic.com/chunk-XP3D7M44.mjs";import{f as _t}from"https://app.framerstatic.com/chunk-XBM64GTP.mjs";import{b as gS,d as nd}from"https://app.framerstatic.com/chunk-KP5P2WBL.mjs";import{He as Ls,Ng as Di}from"https://app.framerstatic.com/chunk-D4BIMG4Z.mjs";import{a as hS}from"https://app.framerstatic.com/chunk-CXBV5MVG.mjs";import{h as eS,l as tS,m as Zr}from"https://app.framerstatic.com/chunk-SWNEK4MT.mjs";import{$a as af,$g as Bn,$h as Dh,Ah as Sh,Bg as lh,C as ts,Cd as ls,Ci as Yh,De as $f,E as Sr,Ed as Pf,Eg as R,Ei as $n,Fd as Ff,Fg as Jo,Fi as Qh,Gg as ms,Gh as Ch,Hb as gf,Hc as os,Hg as Pr,Id as cs,Ih as bh,Jg as On,Ka as ef,Kg as ch,Le as Uc,Lf as th,Lh as _c,Mg as fs,Mh as vh,Ng as hs,Nh as Ih,Oc as ns,Oe as ds,Og as gs,Oh as jc,Pb as yf,Pg as dh,Ph as Th,Qf as Wc,Qh as Nh,R as qm,Ra as rf,Rh as wh,Sa as J,Sb as Sf,Sd as Af,Sg as uh,Sh as xh,T as Xm,Ta as of,Tc as Kr,Th as Rh,Uc as Cf,Uf as ps,Uh as kh,V as Km,Va as O,Vc as No,Vd as Lf,Wa as je,Wc as Yr,Wf as rh,Wg as ph,Xa as Go,Xc as bf,Xd as ki,Xg as mh,Yc as vf,Yh as Mh,Zc as is,Ze as Uf,Zg as xo,Zh as Vh,_a as nf,_e as Wf,_g as ys,ab as sf,ad as as,ah as zn,ai as Ph,bb as uf,bd as _o,bf as Hf,bh as Ss,bi as Fh,cf as Gf,cg as oh,ch as fh,ci as Ah,db as pf,dd as If,di as Lh,ed as Tf,ef as _f,eh as hh,ei as Eh,f as jm,fd as Nf,ff as jo,fi as Oh,gi as Bh,hg as nh,hi as zh,ib as Pn,id as wf,ig as Hc,ii as $h,jf,ji as Uh,k as Vn,kc as To,kf as Jf,ki as Wh,lg as Gc,mi as Hh,n as Ya,nf as qf,ng as ih,ni as Gh,o as sr,oi as _h,p as Ho,pe as $c,pf as Yf,ph as vs,qe as Ef,qg as Mi,r as Dn,rb as hf,re as Of,rg as En,ri as jh,s as Qa,sb as nt,sd as ss,sf as Qf,si as Jh,t as Za,ta as Ym,td as kf,ti as qh,u as Jm,ud as Mf,vd as Vf,vg as ah,vh as Is,wd as Ln,wh as gh,wi as Xh,xd as zc,xf as Zf,xg as sh,y as es,yd as Df,ye as Bf,yf as eh,ze as zf,zh as yh,zi as Kh}from"https://app.framerstatic.com/chunk-ZI4WEUOX.mjs";import{$ as Sc,$c as _r,$f as Ip,$g as Ic,$j as Ap,$k as Wp,$n as am,$q as Dc,$r as Pc,$s as Rn,$u as An,Ad as up,Ag as Tp,Ai as Uo,Al as jp,At as Hm,B as Bo,Bb as Si,Bd as pp,Be as bn,Bg as go,Bi as xc,Bl as Wa,Cd as Xe,Cf as bp,Cj as Fp,Cq as Mc,Cs as Bm,D as Ku,Dd as G,Dg as Np,Dl as Jp,Do as lm,Dq as Vc,Ed as Fe,Ee as Ke,Ei as Mp,Eq as bm,Et as Ec,Fd as Da,Fi as Vp,Fm as Yp,Fq as vm,Fs as zm,Fu as Ka,G as We,Gd as ot,Ge as St,Gs as Io,Gt as Oc,Hc as Lt,Hd as mo,Hp as qr,Ic as dp,Id as Cn,Ik as zp,In as Ha,Ip as ym,Ji as Dp,Jn as Ga,Jq as _e,Jr as Dr,Js as Ti,Kp as ht,L as yc,Lc as D,Lm as Qp,Lp as ja,Lr as Vm,M as yt,Me as fp,Mm as Zp,Mr as Dm,Mt as Ni,N as et,Nf as vp,Ol as qp,Op as Sm,Ot as wi,Pa as rp,Pc as mt,Pp as xn,Qp as Cm,Qr as Pm,Rm as em,Rs as Ac,Rt as Y,So as Ne,Sq as Im,St as v,Th as Ii,To as cm,Tq as Tm,Tr as Xr,Tt as wt,Tu as Qm,Ud as mp,Uh as yo,Ui as Pp,Uo as dm,Ut as E,Uu as Rt,Va as yn,Vh as xr,Vk as $p,Vl as Xp,Vq as Gt,Vt as xi,Vu as Ri,Wa as Ra,Wk as Up,Wo as Mr,Wt as re,Wu as xf,Xc as Ci,Xo as um,Xs as Lc,Xt as m,Xu as Rf,Ya as ka,Yh as Rp,Yj as Ua,Yq as qa,Ys as $m,Yt as ge,Zb as sp,Zc as Ma,Zk as Co,_ as Yu,_c as po,_g as bi,_n as im,_r as Fm,_t as se,ac as ce,ad as Et,ae as wr,aj as So,ar as Nm,at as Um,bc as Sn,be as fo,bh as Tc,bl as Hp,bo as sm,br as ct,bu as kn,ca as Qu,cc as cp,ce as $o,ci as Oa,cn as tm,cs as Am,cu as Mn,dk as Lp,et as Nt,ev as us,fi as wc,fq as Ja,fs as Lm,fv as wo,gq as vo,gv as Xf,hm as Kp,hr as wm,hv as Kf,is as Fc,j as hc,js as Em,kh as Nc,kk as Ep,l as P,la as hr,lf as hp,lh as wp,lm as Ot,lr as xm,md as ir,mu as xt,nd as ar,ne as ho,ns as Om,oe as Pa,om as Rr,os as Bt,pr as Rm,pt as Wm,qn as rm,qu as Bc,rb as zo,rd as jr,rh as vi,rn as kr,sd as Va,sf as vc,si as Ba,sn as om,ta as Zu,td as Oe,te as bc,tn as bo,ua as ep,ub as ip,ud as He,uf as gp,uh as vn,ui as kp,ul as Gp,vb as ap,vd as pe,vf as yp,vh as Ea,vr as km,w as Wu,wd as De,wf as Sp,wk as Op,wm as Be,wn as nm,xd as U,xf as Fa,xg as La,xh as Ge,xi as Jr,xk as Bp,xn as Wo,ya as tp,yb as yi,yd as Pe,yf as Aa,yh as ft,yi as za,ym as Tn,zd as we,zf as Cp,zh as In,zi as $a,zl as _p,zm as Rc,zr as Mm,zt as Xa}from"https://app.framerstatic.com/chunk-Q5MQYIKV.mjs";import{a as gm,b as kc}from"https://app.framerstatic.com/chunk-5DSVU7DA.mjs";import{c as Nn,f as pm,g as _a,i as mm,r as wn,u as Yt,v as fm,w as Vr,y as yr,z as hm}from"https://app.framerstatic.com/chunk-4DUBS6C5.mjs";import{r as aN,u as lp}from"https://app.framerstatic.com/chunk-JH66VPYF.mjs";import{a as gi,b as At}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{G as Hu}from"https://app.framerstatic.com/chunk-SSXQNR5C.mjs";import{b as Cs,c as bs}from"https://app.framerstatic.com/chunk-4ZPMQ7AD.mjs";import{g as $t,i as Kc,m as sy}from"https://app.framerstatic.com/chunk-BL4ITT6Z.mjs";import{b as Uu}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{a as Gu,b as Ta,c as gc,d as _u,j as ju,m as Ju,n as qu,p as Xu}from"https://app.framerstatic.com/chunk-Y3X6G54E.mjs";import{p as lt}from"https://app.framerstatic.com/chunk-RJOTTV32.mjs";import{a as gr,b as A,d as H,e as tt,f as nr,h as op,i as x,j as wa,k as np,l as rt,n as Cc,o as xa}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Ia as Na,Qd as xp,a as iN,b as gn}from"https://app.framerstatic.com/chunk-BWUNBOFS.mjs";import{g as fc}from"https://app.framerstatic.com/chunk-4CB4BQFV.mjs";import{a as mc,b as zu,g as $u}from"https://app.framerstatic.com/chunk-ORIFM75E.mjs";import{c as Bu}from"https://app.framerstatic.com/chunk-66XIMNKS.mjs";import{B as Nr,C as Ft,D as be,F as pc,G as Eu,H as Ee,J as pt,K as Q,X as Gr,ca as Ou,da as va,ga as Kt,i as Lu,ia as Ia,l as Re,p as Ve,u as me,y as oe,z as gt}from"https://app.framerstatic.com/chunk-IZV4HDYJ.mjs";import{a as g,b as $}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{d as nN,e as uo,j as S,k as I,l as W,m as ne,n as Ze}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Li=new Cp(async()=>{let t=await Promise.all([import("https://app.framerstatic.com/dist-UBOM75PL.mjs"),import("https://app.framerstatic.com/dist-NO2QPBRR.mjs"),import("https://app.framerstatic.com/dist-MJ6IU2KU.mjs"),import("https://app.framerstatic.com/dist-K7NPOJ6B.mjs"),import("https://app.framerstatic.com/dist-3Z7TBJKD.mjs"),import("https://app.framerstatic.com/dist-FUKVCZCW.mjs"),import("https://app.framerstatic.com/dist-62LMN7PQ.mjs"),import("https://app.framerstatic.com/dist-FMNFBH4C.mjs"),import("https://app.framerstatic.com/prosemirror-suggest-7VONC64C.mjs")]);return Object.assign({},...t)});function XP(){let t=Li.preload();t&&t.catch(Re)}async function KP(){let t=Li.preload();return t&&await t,Li.read()}function YP(){let t=Li.preload();if(t)throw t;return Li.read()}var{onewayMethodTemplate:uF,voidMethodTemplate:pF,valueMethodTemplate:sN,streamMethodTemplate:mF}=$u,id;(e=>e.service={id:"__ColorSampler__",fingerprint:"2f07b191423077f3239a93a5dec7e417",methods:{sampleColor:{}},newOutgoingWrapper:r=>({sampleColor:sN.bind(-1,"sampleColor",!1,r)})})(id||={});var ad;(o=>{o.service=id.service;function e(n){let i=mc.shared();return{expect:()=>i.expectWithoutDiscovery(o.service,n),discover:a=>i.discover(o.service,n,a),register:a=>i.register({channel:n,service:o.service,implementation:a})}}o.on=e;async function r(n){mc.shared().unregister(n)}o.unregister=r})(ad||={});var lN=me("update-tree-cache-for-vekter");function cN(t,e){return e?op(e)?e.has(t):e===t:!0}var sd=[];Object.freeze(sd);function dN(t,e,r,o){return Nt(t)?Fe(t)?o??r??Sr.identity():!r||!e?Sr.identity():Sr.boundingRectMatrix(r,e):r??Sr.identity()}function _F(t,e,r,o,n,i,a,s){let l=t.root,c=l.cache,d=l.getLocale(i);c.visible=!0,c.lockedByParent=!1,c.renderId=l.id,_s(c);let p=l.children;for(let u of p)if(!(s&&!cN(u.id,s))){if(Ct(u)){if(!u.isLoaded())continue;uN(t,u,l,e,r,o,n,d,a)}else ld(t,u,l,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,sd,void 0,void 0,e,r,o,n,d,void 0,void 0,!1,a,void 0);qn(l,u)}return t}function uN(t,e,r,o,n,i,a,s,l){let c=e.cache;c.visible=!0,c.lockedByParent=!1,c.renderId=e.id,c.parentRenderId=r.id,_s(c);let d=e.children,{combinedVariableValueMap:p,combinedVariableControlMap:u}=e.combineVariableValueAndControlMaps(t,void 0,void 0,P,n,a,s),f=U(e);for(let h of d)ld(t,h,e,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,sd,p,u,o,n,i,a,s,void 0,void 0,!1,l,f),qn(e,h)}function ld(t,e,r,o,n,i,a,s,l,c,d,p,u,f,h,y,C,b,N,T,w,V,L,F,_,z,Z){let M=e.cache,he=M.activeVekterLocale;M.activeVekterLocale=V;let{combinedVariableValueMap:Ie,combinedVariableControlMap:de,combinedVariableMapsAreEqual:ee}=e.combineVariableValueAndControlMaps(t,y,C,P,N,w,V),ue=Oe(e),ie=ue?N.isEmpty(e.id):!1,[Te,st]=gN(t,e,r,a,s,b,N,T);M.groundNodeAncestorId=L?.groundNodeId,M.masterAncestorId=c,M.replicaAncestorId=d,M.overlayAncestorId=p,M.formContainerAncestorId=f;let K=n&&!!Te,B=!L||Sr.equals(M.groundNodeMatrix,L.groundNodeMatrix),ae=!Ci(e)||M.layout===e.layout,ke=he===M.activeVekterLocale,qe=Lc(e,L),Dt=!!z?.nodes.has(e.id),xe=Dt===M.isEffectPreview&&hr(z?.effectIds??null,M.effectIds)&&(z?.type??null)===M.effectType&&M.webPageEffect===Z,rr=Ac(e)||et.equals(M.viewportRect,qe);o||=Ot(e);let Tt=ae&&ke&&rr&&xe&&ee&&M.insideVariant===o&&M.visible===K&&M.collectionIsEmpty===ie&&M.lockedByParent===i&&M.lastUpdate===e.update&&M.parentDirected===F&&M.parentDirectedRowHeightFitContent===_&&wS(e.cache.getRenderInstance(e.id),Te)&&hN(e.cache.secondaryRenderInstances,st)&&nm(t,e)===M.usesLayoutTemplateRectForModuleIdentifier;if(Tt&&B)return;M.isEffectPreview=Dt,M.effectIds=z?.effectIds??null,M.effectType=z?.type??null,M.webPageEffect=Z,M.ancestorRepeaterIds=h;let or=!1;or&&or.cacheUpdated(),Tt?M.canvasRect=void 0:(or&&or.cacheReset(),M.reset(),M.groundNodeAncestorId=L?.groundNodeId,M.masterAncestorId=c,M.replicaAncestorId=d,M.overlayAncestorId=p,M.slotPropertyAncestorId=u,M.formContainerAncestorId=f,M.activeVekterLocale=V,M.visible=K,M.collectionIsEmpty=ie,M.insideVariant=o,M.lockedByParent=i,M.lastUpdate=e.update,M.parentDirected=F,M.parentDirectedRowHeightFitContent=_,M.viewportRect=qe,M.layout=Ci(e)?e.layout:void 0,M.ancestorRepeaterIds=h,M.usesLayoutTemplateRectForModuleIdentifier=bo(e)?e.usesLayoutTemplateRectForModuleIdentifier():void 0,Te&&(M.renderId=e.id,Object.assign(M,Te)),M.secondaryRenderInstances=st);let{parentRectByRenderIdForChildren:Pt,parentMatrixByRenderIdForChildren:dt,parentUsesDOMRectForChildren:te,groundNodeContextForChildren:le}=NS(t,e,l,L,b),Ue=e.children;if(!Ue)return;let fr=po(e)?e.layout:void 0,Ir=Et(e)&&e.gridRowHeightType==="fit",Hr=c;!Hr&&ip(e)&&(Hr=e.id);let Me=d;!Me&&yi(e)&&(Me=e.id);let ut=cd(e,h);for(let Tr=0;Tr<Ue.length;Tr++){let Xt=Ue[Tr];if(!Xt)continue;if(!ae)for(let[,oN]of Xt.cache.iterateRenderInstances())oN.parentRect=void 0;let hi=ue&&An(t,Xt,e),tN=hi&&ie,Au=ue&&!hi,rN=lt.isOn("visibilityFromSandbox")?K:hi?!tN&&K:K;ld(t,Xt,e,o,rN,eh(e),Pt,dt,te,Hr,Me,Nt(e)?e.id:p,Pa(e)?e.id:u,Dr(e)?e.id:f,ut,Au?y:Ie,Au?C:de,b,N,T,w,V,le,fr,Ir,z,Z),qn(e,Xt)}}function jF(t,e,r){let o=pN(t,r),n=t.root,i=n.cache;i.visible=!0,i.renderId=n.id,_s(i);let a=n.children;for(let s of a){if(Ct(s)){if(!s.isLoaded())continue;mN(t,s,n,e,o)}else dd(t,s,n,new Map,new Map,!1,e,o,void 0,!1,void 0);qn(n,s)}return o}function pN(t,e){let r=new Set,o=new Set;function n(a){o.has(a.id)||(r.add(a.id),o.add(a.id),a.children&&a.children.forEach(n))}function i(a){let s=a.id;for(;s&&!r.has(s);)r.add(s),s=t.getNode(s)?.parentid}for(let a of e){let s=t.getNode(a);s&&(i(s),s.children&&s.children.forEach(n))}return r}function cd(t,e){return Oe(t)?e.length===0?[t.id]:[...e,t.id]:e}function mN(t,e,r,o,n){let i=e.cache;i.visible=!0,i.renderId=e.id,i.parentRenderId=r.id,_s(i);let a=e.children;for(let s of a)dd(t,s,e,new Map,new Map,!1,o,n,void 0,!1,void 0),qn(e,s)}function dd(t,e,r,o,n,i,a,s,l,c,d){if(!s.has(e.id))return;let p=e.cache;if(p.parentDirected=l,p.parentDirectedRowHeightFitContent=c,p.viewportRect=Lc(e,d),!p.visible)return;for(let[T,w]of p.iterateRenderInstances()){let V=w.parentRenderId;g(V,"Missing `parentRenderId`"),w.parentRect=o.get(V),w.parentMatrix=n.get(V),w.parentDirectedRect=xS(e,T,r,a)}let{parentRectByRenderIdForChildren:u,parentMatrixByRenderIdForChildren:f,parentUsesDOMRectForChildren:h,groundNodeContextForChildren:y}=NS(t,e,i,d,a),C=e.children;if(!C)return;let b=po(e)?e.layout:void 0,N=Et(e)&&e.gridRowHeightType==="fit";for(let T of C)dd(t,T,e,u,f,h,a,s,b,N,y),qn(e,T)}function fN(t,e){if(!e||!St(t)||!Be(t))return;let r=new Map;for(let[o,n]of e){let i=n.originX??Wc*n.width,a=n.originY??Wc*n.height,s=Sr.identity();Sf||(s=s.translate(t.left??0,t.top??0));let l=s.translate(i,a).multiplySelf(Sr.identity().translate(n.x,n.y).multiplySelf(n.matrix)).translateSelf(-i,-a),c=Sr.convertPointsWithClipping(l,et.pointsAtOrigin({width:n.width,height:n.height}));r.set(o,{domRect:n,canvasCorners:c,canvasRect:et.boundingRectFromPoints(c)})}return r}function NS(t,e,r,o,n){let i=e.cache,a=n.getRects(e.id);a&&(i.domRects=new Map(a));let s=bo(e)&&!!i.usesLayoutTemplateRectForModuleIdentifier;s&&(i.layoutTemplateRects=fN(e,n.getLayoutTemplateRects(e.id))),i.groundNodeMatrix=o?.groundNodeMatrix??null;let l=bo(e)&&e.usesDOMRectCached(),c=!(l||r),d=!!i.viewportRect||!Ac(e),p,u=new Map,f=new Map;for(let[h,y]of i.iterateRenderInstances()){let{parentRect:C,parentMatrix:b,parentDirectedRect:N}=y,T=t.getParentSizeInfo(e,void 0,c,d,h),w=N??e.rect(T,c,void 0,h);u.set(h,w);let V=e.originAdjustedMatrix(T,w,h),L=dN(e,C,b,o?.groundNodeMatrix),F;try{F=L.multiply(V)}catch(M){lN.reportErrorOncePerMinute(M,{parentRect:C,frame:w,parentMatrix:L,transformMatrix:V}),F=new DOMMatrix}let _=th(e)?F:Sr.flatProjectionMatrix(F);f.set(h,_),y.matrix=F;let z=t.convertCornerPointsToCanvas(e,!1,void 0,h);y.cornerPoints=z;let Z=et.boundingRectFromPoints(z);if(y.canvasRect=Z,ts(e)&&uh(e)&&e.strokeEnabled){let M=e.resolveValue("strokeWidth")??0;Z=et.inflate(Z,M/2)}s?TS(y,i.getLayoutTemplateContainerRect()?.canvasRect??Z):TS(y,Z),Yy(h)&&(p=o??$m(e,w,{groundNodeId:e.id,groundNodeMatrix:_}))}return{parentRectByRenderIdForChildren:u,parentMatrixByRenderIdForChildren:f,parentUsesDOMRectForChildren:l,groundNodeContextForChildren:p}}function vS(t,e,r){if(lt.isOn("visibilityFromSandbox"))return r.getVisible(e);let o=Nt(t)&&!t.cache.overlayVisible;return t.isVisible()&&!ap(t)&&!o}function wS(t,e){return!t&&!e?!0:!t||!e?!1:et.equals(t.parentRect??null,e.parentRect??null)&&Sr.equals(t.parentMatrix??null,e.parentMatrix??null)&&et.equals(t.parentDirectedRect??null,e.parentDirectedRect??null)&&sp(t.collectionItemIds,e.collectionItemIds)&&t.collectionItemId===e.collectionItemId}function hN(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;for(let[r,o]of e){let n=t.get(r);if(!wS(o,n))return!1}return!0}function IS(t,e,r,o,n,i,a,s,l){return{parentRenderId:o,parentRect:i.get(o),parentMatrix:a.get(o),parentDirectedRect:xS(t,e,r,s),matrix:void 0,canvasRect:void 0,cornerPoints:void 0,collectionItemIds:l.getItemIds(e),collectionItemId:n,minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}}function gN(t,e,r,o,n,i,a,s){let l=new Map;if(Oe(r)&&An(t,e,r))for(let[p,u]of r.cache.iterateRenderInstances()){let f=u.collectionItemIds;if(f)for(let h=0;h<f.length;h++){let y=f[h];if(!y)continue;let C=Qy(p,r.id,y,h),b=ed(C,e.id);vS(e,b,s)&&l.set(b,IS(e,b,r,p,y??u.collectionItemId,o,n,i,a))}}else for(let[p,u]of r.cache.iterateRenderInstances()){let f=ed(p,e.id);vS(e,f,s)&&l.set(f,IS(e,f,r,p,u.collectionItemId,o,n,i,a))}let c=l.get(e.id);l.delete(e.id);let d=l.size>0?l:void 0;return[c,d]}function _s(t){t.minX=1/0,t.maxX=-1/0,t.minY=1/0,t.maxY=-1/0}function TS(t,e){t.minX=e.x,t.maxX=e.x+e.width,t.minY=e.y,t.maxY=e.y+e.height}function yN(t,e){t.minX>e.minX&&(t.minX=e.minX),t.maxX<e.maxX&&(t.maxX=e.maxX),t.minY>e.minY&&(t.minY=e.minY),t.maxY<e.maxY&&(t.maxY=e.maxY)}function qn(t,e){for(let[,r]of e.cache.iterateRenderInstances()){let o=r.parentRenderId;g(o,"Missing `parentRenderId`");let n=t.cache.getRenderInstance(o);g(n,"Missing `renderInstance`"),yN(n,r)}}function xS(t,e,r,o){if(po(r)&&Dn(t,r))return o.getRect(e)}var RS="https://app.framerstatic.com/cursor-add-6XAMN4WT.png";var kS="https://app.framerstatic.com/cursor-add@2x-2LFPOUCY.png";var MS="https://app.framerstatic.com/cursor-disconnect-ZKL7EWFU.png";var VS="https://app.framerstatic.com/cursor-disconnect@2x-OE3AENSJ.png";var DS="https://app.framerstatic.com/cursor-feedback-BOBWQH3Z.png";var PS="https://app.framerstatic.com/cursor-feedback@2x-6D4B4MBW.png";var FS="https://app.framerstatic.com/cursor-grab-FRV55RHP.png";var AS="https://app.framerstatic.com/cursor-grab@2x-GIY2VUEH.png";var LS="https://app.framerstatic.com/cursor-grabbing-OKC4B74I.png";var ES="https://app.framerstatic.com/cursor-grabbing@2x-WE42DW3I.png";var OS="https://app.framerstatic.com/cursor-insert-6UGIJVAR.png";var BS="https://app.framerstatic.com/cursor-insert@2x-ZOKYLV6L.png";var zS="https://app.framerstatic.com/cursor-remove-Q4ORWDOQ.png";var $S="https://app.framerstatic.com/cursor-remove@2x-QZ7R5XN6.png";var US="https://app.framerstatic.com/cursor-swap-2VDBHJ6M.png";var WS="https://app.framerstatic.com/cursor-swap@2x-BAI7OT3Z.png";var HS="https://app.framerstatic.com/cursor-vector-add-L3563YFF.png";var GS="https://app.framerstatic.com/cursor-vector-add@2x-24A2HJDM.png";var _S="https://app.framerstatic.com/cursor-vector-point-6OWAA3FG.png";var jS="https://app.framerstatic.com/cursor-vector-point@2x-4OEKRKH6.png";var JS="https://app.framerstatic.com/cursor-vector-OLHKU4LP.png";var qS="https://app.framerstatic.com/cursor-vector@2x-YFL4EEVU.png";var XS="https://app.framerstatic.com/cursor-zoom-in-2YKQ3Z67.png";var KS="https://app.framerstatic.com/cursor-zoom-in@2x-ZUXRFEB6.png";var YS="https://app.framerstatic.com/cursor-zoom-out-IWSRWDMJ.png";var QS="https://app.framerstatic.com/cursor-zoom-out@2x-EW4OYJ5J.png";var ZS="https://app.framerstatic.com/resize-east-west-ANAPBU4H.png";var eC="https://app.framerstatic.com/resize-east-west@2x-HS4NZ3H2.png";var tC="https://app.framerstatic.com/resize-east-XHHFSY6J.png";var rC="https://app.framerstatic.com/resize-east@2x-3TA77JQ5.png";var oC="https://app.framerstatic.com/resize-nesw-GL7KYSRE.png";var nC="https://app.framerstatic.com/resize-nesw@2x-7OD4PILK.png";var iC="https://app.framerstatic.com/resize-north-east-OYDCT3XA.png";var aC="https://app.framerstatic.com/resize-north-east@2x-GB4FBRV3.png";var sC="https://app.framerstatic.com/resize-north-south-JYDNIYWS.png";var lC="https://app.framerstatic.com/resize-north-south@2x-IHAJOLEA.png";var cC="https://app.framerstatic.com/resize-north-west-WOGBMCQ7.png";var dC="https://app.framerstatic.com/resize-north-west@2x-CGE2AJ7O.png";var uC="https://app.framerstatic.com/resize-north-TOADQ3IJ.png";var pC="https://app.framerstatic.com/resize-north@2x-U6CXDTI2.png";var mC="https://app.framerstatic.com/resize-nwse-CTXL5YSS.png";var fC="https://app.framerstatic.com/resize-nwse@2x-H5TFIU4Y.png";var hC="https://app.framerstatic.com/resize-south-east-7BL2E7ZY.png";var gC="https://app.framerstatic.com/resize-south-east@2x-YOYUZV36.png";var yC="https://app.framerstatic.com/resize-south-west-EZHHVQZN.png";var SC="https://app.framerstatic.com/resize-south-west@2x-XZTWVP5E.png";var CC="https://app.framerstatic.com/resize-south-MEM66EWG.png";var bC="https://app.framerstatic.com/resize-south@2x-KMVPTHAA.png";var vC="https://app.framerstatic.com/resize-west-GRT5XBDQ.png";var IC="https://app.framerstatic.com/resize-west@2x-DBCUQ6K5.png";var TC="https://app.framerstatic.com/touch-active-CQT44XON.png";var NC="https://app.framerstatic.com/touch-active@2x-N44WHZVB.png";var wC="https://app.framerstatic.com/touch-K4JGV3WE.png";var xC="https://app.framerstatic.com/touch@2x-M3Y2EBTW.png";var RC={"cursor-add":[RS,kS],"cursor-disconnect":[MS,VS],"cursor-feedback":[DS,PS],"cursor-grab":[FS,AS],"cursor-grabbing":[LS,ES],"cursor-insert":[OS,BS],"cursor-remove":[zS,$S],"cursor-swap":[US,WS],"cursor-vector-add":[HS,GS],"cursor-vector-point":[_S,jS],"cursor-vector":[JS,qS],"cursor-zoom-in":[XS,KS],"cursor-zoom-out":[YS,QS],"resize-nesw":[oC,nC],"resize-nwse":[mC,fC],"resize-north-east":[iC,aC],"resize-north-west":[cC,dC],"resize-south-east":[hC,gC],"resize-south-west":[yC,SC],"resize-east-west":[ZS,eC],"resize-west":[vC,IC],"resize-east":[tC,rC],"resize-north-south":[sC,lC],"resize-north":[uC,pC],"resize-south":[CC,bC],"touch-active":[TC,NC],touch:[wC,xC]};var Sw=Hu.isFirefox(),lr=(t,e=12)=>{let r=H(e)?e:e.x,o=H(e)?e:e.y,[n,i]=RC[t];return Sw?`url(${n}) ${r} ${o}, auto`:`-webkit-image-set(url(${n}) 1x, url(${i}) 2x) ${r} ${o}, default`},pd={x:6,y:2},iL=lr("cursor-vector",pd),aL=lr("cursor-vector-add",pd),sL=lr("cursor-vector-point",pd),lL=lr("cursor-disconnect",10),cL=lr("cursor-add",10),dL=lr("cursor-remove",10),uL=lr("cursor-swap",{x:3,y:3}),pL=lr("cursor-feedback",{x:16,y:16}),js={x:15,y:15},mL=lr("cursor-insert",js),fL=lr("cursor-zoom-in",js),hL=lr("cursor-zoom-out",js),gL=lr("cursor-grabbing",js),Cw=(t,e)=>{switch(t){case 0:{if(e.x&&e.y)return 8;if(e.x)return 6;if(e.y)return 2;break}case 1:{if(e.x)return 7;break}case 2:{if(e.x&&e.y)return 6;if(e.x)return 8;if(e.y)return 0;break}case 3:{if(e.y)return 5;break}case 5:{if(e.y)return 3;break}case 6:{if(e.x&&e.y)return 2;if(e.x)return 0;if(e.y)return 8;break}case 7:{if(e.x)return 1;break}case 8:{if(e.x&&e.y)return 0;if(e.x)return 2;if(e.y)return 6;break}default:break}return t},bw=t=>8-t,vw=(t,e,r)=>{let{fx:o,fy:n}=t,i=e.findIndex(d=>d.fx===o&&d.fy===n),a=Cw(i,r),s=e[a];g(s,"handle must be defined",s,e);let l=bw(a),c=e[l];return g(c,"handle must be defined",c,e),We.angleFromX(c,s)},Iw=t=>{switch(t){case 0:return 15;case 1:return 8;case 2:return 9;case 3:return 14;case 5:return 10;case 6:return 13;case 7:return 12;case 8:return 11}},Xn=t=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M5 10.25v3.5c0 .138.112.25.25.25H13v2.7a.25.25 0 0 0 .415.187l5.37-4.699a.25.25 0 0 0 0-.376l-5.37-4.7a.25.25 0 0 0-.415.189V10H5.25a.25.25 0 0 0-.25.25Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${t} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${t} 0 0)' transform-origin='center center'/><g transform='rotate(${t} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M6 11h8V9l3.5 3-3.5 3v-2H6z'/></g></g></svg>") 12 12, pointer`,Tw=t=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M9 13.98v2.72a.25.25 0 0 1-.415.187l-5.37-4.699a.25.25 0 0 1 0-.376l5.37-4.7A.25.25 0 0 1 9 7.302V10l6 .02V7.3a.25.25 0 0 1 .415-.187l5.37 4.699a.25.25 0 0 1 0 .376l-5.37 4.7a.25.25 0 0 1-.415-.189V14l-6-.02Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${t} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${t} 0 0)' transform-origin='center center'/><g transform='rotate(${t} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M16 13v2l3.5-3L16 9v2H8V9l-3.5 3L8 15v-2z'/></g></g></svg>") 12 12, pointer`,ud=t=>t+180,Nw=(t,e,r)=>{if(e){let o=e.x.max&&e.x.min,n=e.y.max&&e.y.min,i=Iw(t),a=i===8||i===12,s=i===14||i===10;if(a&&n||s&&o)return;if(s&&e.x.max)return Xn(ud(r));if(s&&e.x.min)return Xn(r);if(a&&e.y.max)return Xn(ud(r));if(a&&e.y.min)return Xn(r);let l=i===15||i===13||i===9||i===11;if(l&&e.x.max&&e.y.max)return Xn(ud(r));if(l&&e.x.min&&e.y.min)return Xn(r)}return Tw(r)},yL=(t,e,r,o={})=>{let n=e.findIndex(i=>i.fx===t.fx&&i.fy===t.fy);if(!(n<-1))return Nw(n,r,vw(t,e,o))},ww=t=>{switch(t){case 0:return[6,2];case 2:return[0,8];case 8:return[2,6];case 6:return[8,0];default:return[8,0]}},xw=(t,e)=>{let{fx:r,fy:o}=t,n=e.findIndex(N=>N.fx===r&&N.fy===o),i=e[n];g(i,"handle must be defined",i,e);let[a,s]=ww(n),l=e[a],c=e[s];g(l&&c,"handle must be defined",a,s,e);let d=We.angleFromX(i,l),p=We.angleFromX(i,c),u=Math.abs(d-p),f=(u>180?360-u:u)/2,h=[e[0],e[4],e[2]];return(Sp.isClockwise(h)?d:p)+f-180},Rw=t=>`url("data:image/svg+xml,<svg width='24px' height='24px' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='M10.25,20 C10.1119288,20 10,19.8880712 10,19.75 L10,12.6035534 C10,12.4654822 10.1119288,12.3535534 10.25,12.3535534 C10.3163041,12.3535534 10.3798926,12.3798926 10.4267767,12.4267767 L12.9218922,14.9225703 C13.5940823,14.1362843 14,13.1155457 14,12 C14,10.8844543 13.5940823,9.86371572 12.9218922,9.07742971 L10.4267767,11.5732233 C10.3798926,11.6201074 10.3163041,11.6464466 10.25,11.6464466 C10.1119288,11.6464466 10,11.5345178 10,11.3964466 L10,4.25 C10,4.11192881 10.1119288,4 10.25,4 L17.3964466,4 C17.4627507,4 17.5263392,4.02633921 17.5732233,4.0732233 C17.6708544,4.17085438 17.6708544,4.32914562 17.5732233,4.4267767 L15.7556302,6.24518726 C17.1490803,7.75912242 18,9.78018974 18,12 C18,14.2195857 17.1492525,16.2404687 15.7560531,17.7543533 L17.5732233,19.5732233 C17.6708544,19.6708544 17.6708544,19.8291456 17.5732233,19.9267767 C17.5263392,19.9736608 17.4627507,20 17.3964466,20 L10.25,20 Z' id='b'/><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='0.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='0.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='0.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 0.75) rotate(${t} 12 12)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b'/></g><g transform='translate(0, 1) rotate(${t} 12 12)'><use fill='%23000' filter='url(%23c)' xlink:href='%23b'/></g><g transform='rotate(${t} 12 12)'><use fill='%23FFF' xlink:href='%23b'/><path d='M11,19 L11,14.5 L12.8568184,16.3571474 C14.160342,15.3514059 15,13.7737593 15,12 C15,10.2262407 14.160342,8.6485941 12.8568184,7.64285263 L11,9.5 L11,5 L12.193,4.99949654 L15.5,5 L14.2798125,6.22017067 C15.9414235,7.59584189 17,9.67429905 17,12 C17,14.3257233 15.9414031,16.4041981 14.2797646,17.779869 L15.5,19 L11,19 Z' fill='%23000'/></g></g></svg>") 12 12, pointer`,SL=(t,e)=>Rw(xw(t,e));var TL="appPointerEvents_arpwu8w",NL="appDisablePointerEvents_a1pulxae";var kC=uo(aN());var Ei=uo(gn());async function MC(t,e,r=1/0,o){o??=new Jn(t,{silent:!0});let n=[],i=[],a=[];for(let l of e){if(a.length>=r){i.push(l);continue}if(!bs.includes(l.type)){n.push(l);continue}let c=o.add(l);a.push(c)}return n.length>0&&br({type:"add",key:"importUploadImagesUnsupported",variant:"warning",text:(0,Ei.jsxs)("span",{className:Di,children:["Skipped ",n.length," unsupported images"]}),duration:1e4}),i.length>0&&br({type:"add",key:"importUploadImagesSkipped",variant:"warning",text:(0,Ei.jsxs)("span",{className:Di,children:["Skipped ",i.length," images over field limit"]}),duration:1e4}),md(o,a).catch(()=>{}),(await Promise.all(a)).filter(Pi)}async function md(t,e){let r="uploadEmbeddedImagesByUrl",o={type:"add",key:r,variant:"progress",icon:"image",duration:1/0,showCloseButton:"never"};for await(let{completed:i,started:a}of t.statusUpdates())br({...o,text:(0,Ei.jsxs)("span",{className:Di,children:["Adding ",i," of ",a," images\u2026"]})});await Promise.allSettled(e);let{failed:n}=t.status;n>0&&br({type:"add",key:"importUploadImagesFailed",variant:"warning",text:(0,Ei.jsxs)("span",{className:Di,children:["Failed to upload ",n," ",(0,kC.default)("image",n)]}),duration:5e3}),br({type:"remove",key:r})}var VC=me("ChooseFileService"),fd=class{constructor(e,r,o){this.engine=e;this.assetService=r;this.filePickerRef=o;S(this,"assetUploader");this.assetUploader=new Jn(this.engine)}async pickFile({allowedFileTypes:e,multiple:r}={}){let o=this.filePickerRef.current;if(!o)return null;let n=await o.show(e?.map(i=>`.${i}`),r);return n.isFiles()?n.value:null}async pickImage({allowedFileTypes:e=Cs,multiple:r}={}){return this.pickFile({allowedFileTypes:e,multiple:r})}async pickAndUploadImage(e={}){try{let r=await this.pickImage(e);if(!r)return[];if(r.length===1){let o=await this.assetUploader.add(r[0]);if(!o)return[];if(await this.assetService.refresh().catch(Re),Pi(o))return[o]}else return await MC(this.engine,r,e.maxUploads)}catch(r){VC.warn("Failed to upload file:",r)}return[]}async pickAndUploadFile(e){try{let r=await this.pickFile(e);if(!r)return;let o=r[0];return o?await this.assetUploader.add(o):void 0}catch(r){VC.warn("Failed to upload file:",r)}}async addImages(e){if(!e?.length)return[];let o=(await Promise.all(Array.from(e,n=>this.assetUploader.add(n)))).filter(Pi);return o.length===0||await this.engine.stores.assetStore.assetService?.refresh().catch(Re),o}},{service:DC,resolve:Mw}=wy();function OL(t,e,r){Mw(new fd(t,e,r))}var PC=class{constructor(){S(this,"nodeIdToRenderIdToRect",new Map);S(this,"nodeIdToLayoutTemplateSelectorToRect",new Map);S(this,"nodeIdToRenderIdToChildrenRects",new Map)}processLayoutMeasurements(e){let r=new Set,o=new Set;for(let{nodeId:n,renderId:i,layoutMetrics:a,layoutTemplateSelector:s}of e){let{childrenRects:l,...c}=a;o.has(n)||this.nodeIdToLayoutTemplateSelectorToRect.delete(n),o.add(n);let d=s?this.nodeIdToLayoutTemplateSelectorToRect.get(n)?.get(s):this.nodeIdToRenderIdToRect.get(n)?.get(i),p=this.nodeIdToRenderIdToChildrenRects.get(n)?.get(i);if(!(hr(d,c,!0)&&Vw(p,l))){if(s){let u=this.nodeIdToLayoutTemplateSelectorToRect.get(n)??new Map,f=c.matrix?DOMMatrixReadOnly.fromMatrix(c.matrix):void 0;u.set(s,{...c,matrix:f}),this.nodeIdToLayoutTemplateSelectorToRect.set(n,u)}else{let u=this.nodeIdToRenderIdToRect.get(n)??new Map;u.set(i,et.from(c)),this.nodeIdToRenderIdToRect.set(n,u)}if(l){let u=this.nodeIdToRenderIdToChildrenRects.get(n)??new Map;u.set(i,l),this.nodeIdToRenderIdToChildrenRects.set(n,u)}r.add(n)}}return r}getContentSize(e){let r=this.getRect(e),o=this.getChildrenRects(e);if(!r||!o)return;let{width:n,height:i}=et.merge(...o);return{width:n,height:i}}getRect(e){let r=td(e);return this.nodeIdToRenderIdToRect.get(r)?.get(e)}getRects(e){return this.nodeIdToRenderIdToRect.get(e)}getLayoutTemplateRects(e){return this.nodeIdToLayoutTemplateSelectorToRect.get(e)}getChildrenRects(e){let r=td(e);return this.nodeIdToRenderIdToChildrenRects.get(r)?.get(e)}pruneAfterTreeChanges(e){for(let r of e){let o=r.to.parentid&&r.from?.parentid&&r.to.parentid!==r.from.parentid;r.removed?(this.nodeIdToRenderIdToRect.delete(r.id),this.nodeIdToRenderIdToChildrenRects.delete(r.id),this.nodeIdToLayoutTemplateSelectorToRect.delete(r.id)):o&&this.nodeIdToRenderIdToRect.delete(r.id)}}};function Vw(t,e){return t===e?!0:t===void 0||e===void 0||t.length!==e.length?!1:e.every((r,o)=>et.equals(r,t[o]??null))}var Dw={cache:!0,mutable:!0,update:!0,parentid:!0,originalid:!0,duplicatedFrom:!0,moduleSourceRevision:!0,moduleSourceRevisionHint:!0,moduleSourceRevisionCommittedHint:!0,kitSectionsStructure:!0,layoutTemplateIdentifierOverride:!0};function Mo(t,e){if(!x(e)&&!Dw[t]&&!t.startsWith("export")&&!Rm(t))return e}function Pw(t,e){if(t!=="children")return Mo(t,e)}function Fw(t,e,r,o,n){if(!zp(t)||!wc(e))return e;if(e.type==="slot")return!nr(e.value)||G(r)&&r.slotsAreChildNodes?e:e.value.map(i=>{let a=n.get(i.reference);return Fs(o,a)?a:void 0});if(e.type==="componentinstance"){if(!A(e.value))return e;let i=n.get(e.value);return Fs(o,i)?i:void 0}else if(e.type==="array"){if(!nr(e.value))return e;let i=[],a=!1;for(let s of e.value){if(!wc(s)||s.type!=="componentinstance"||(a=!0,!A(s.value)))continue;let l=n.get(s.value);Fs(o,l)&&i.push(l)}return a?i:e}return e}function Aw(t,e){return(r,o,n)=>Mo(r,Fw(r,o,n,e,t))}var Oi=me("ModuleSourceRevision");function nE(t){return Gr(Kt(t,Mo))}function Lw(t,e){switch(t.__class){case"CollectionItemNode":case"ImageStylePresetNode":case"InlineCodeStylePresetNode":case"LayoutTemplateNode":case"LinkStylePresetNode":case"SmartComponentNode":case"TableStylePresetNode":case"WebPageNode":return Gr(Kt(t,Mo));case"FrameNode":{let r=e.get(t.parentid);return!r||!Pe(r)?void 0:Gr(Kt(t,Aw(e,r.id)))}case"CollectionNode":{g(ot(t),"Expected collection node");let r=Kt(e.root.locales),o=Kt(t,Pw),n=Kt(t.getUnsortedChildren()?.map(i=>i.moduleSourceRevision));return Gr(r+o+n)}case"PresetsListNode":{let r=t.children?.filter(o=>!zt(o,e))??[];return Gr(Kt(r,Mo))}case"TextStylePresetNode":case"BlockquoteStylePresetNode":{if(yi(t))return t.moduleSourceRevision;let r=Kt(t,Mo);return t.cache.replicaInstances?.forEach(o=>{let n=e.getNodeWithTrait(o,yi);n&&(r+=Kt(n,Mo))}),Gr(r)}case"VectorSetNode":{g(De(t),"Expected VectorSetNode");let r=t.getVectorSetItems().map(o=>{let n=pt("vector",o.id,"default").localId,i=e.getNodeWithTrait(n,Af);return i?i.save.moduleId:""});return Gr(Kt(r)+t.name)}case"ShapeContainerNode":{if(!Rt(t))return;let r=e.getScopeNodeFor(t);if(!De(r))return;let o=Kt(t,Mo);return Gr(o+Kt(r.variables))}case"CanvasPageNode":case"RootNode":return;case"ComponentPresetNode":return;case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BooleanShapeNode":case"BoxShadow":case"CanvasNode":case"CanvasScopeNode":case"DesignPageNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeComponentNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HighlightStackItemTool":case"HighlightTool":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"LayoutTemplateEntityTypeRootNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"Menu":case"MoveTool":case"MutableNode":case"OvalShapeNode":case"OverlayNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathNode":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PolygonShapeNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RectangleShapeNode":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextNode":case"RichTextVariableEditTool":case"RotateTool":case"RouteNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"ShapeGroupNode":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"StarShapeNode":case"StringVariableEditTool":case"DateVariableEditTool":case"StyledTextDraft":case"SVGNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextNode":case"VectorSetEntityTypeRootNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"ZoomSelectTool":case"ZoomTool":return;default:$(t.__class,"getModuleRevision: node.__class must be a valid value")}}function gd(t,e){let r=t.get(e);return!r||!zt(r,t)?!1:x(r.moduleSourceRevisionHint)||r.moduleSourceRevisionCommittedHint===r.moduleSourceRevisionHint?(Oi.debug(`Hint hasn't changed for ${r.id}.`),!1):(Oi.debug(`Initial Revision: ${r.moduleSourceRevision}`),!0)}function hd(t,e){let r=t.get(e);if(!r||!zt(r,t))return;let o=performance.now(),n=Lw(r,t);Oi.debug(`Spent ${performance.now()-o}ms computing module revision for ${r.id}`);let i=H(n)&&n!==r.moduleSourceRevision;Oi.debug(`Revisions: ${r.moduleSourceRevision}, ${n}`);let a=r.moduleSourceRevisionHint,s=i?{moduleSourceRevision:n,moduleSourceRevisionCommittedHint:a}:{moduleSourceRevisionCommittedHint:a};return Oi.debug(i?`Updating moduleSourceRevision for ${r.id}.`:`Updating moduleSourceRevisionCommittedHint for ${r.id}.`),r.setIgnoringReplica(s,t),i?n:void 0}function AC(t,e){return e(r=>{if(r.isViewOnly)return;let o=r.get(t);return ot(o)&&o.getUnsortedChildren()?.forEach(n=>{gd(r,n.id)&&hd(r,n.id)}),hd(r,t)})}function LC(t,e){return e(r=>{if(!r.isViewOnly)return t.reduce((o,n)=>(o[n.id]=hd(r,n.id)??1,o),{})})}function EC(t){window.addEventListener("beforeunload",e=>{t()&&(e.preventDefault(),e.returnValue="You have unsaved changes. They might be lost if you leave the page.")})}var Ew={track:!0};function OC(t){let e={...t,event:"preview_shown"};Uu(e,Ew)}var Ow=me("CodeGenerationStore"),Bw="transform",Kn,Ko,Js=class{constructor(e){this.sourceNode=e;W(this,Kn,[]);W(this,Ko)}start(e){let r=performance.now();return{end:o=>{I(this,Kn).push([e,performance.now()-r]),ne(this,Ko,I(this,Ko)??o),e===Bw&&this.completeSession()}}}restartSession(){ne(this,Kn,[]),ne(this,Ko,void 0)}completeSession(){I(this,Ko)?.forEach(({type:e,source:r,artifacts:o})=>{let n=zw(e,this.sourceNode);if(!n)return;let i={codeType:n,durationMs:0,updateCount:0,updateDurationMs:0,serializationDurationMs:0,compilationDurationMs:0,synchronizationDurationMs:0,size:r.length,id:this.sourceNode.id,nodes:o?.metrics?.nodes??1,variants:o?.metrics?.variants??0,svgBytes:o?.metrics?.svgBytes,textBytes:o?.metrics?.textBytes};for(let[s,l]of I(this,Kn))switch(i.durationMs+=l,s){case"update":i.updateCount++,i.updateDurationMs+=l;break;case"serialize":i.serializationDurationMs+=l;break;case"transform":i.compilationDurationMs+=l;break;case"synchronize":i.synchronizationDurationMs+=l;break;default:$(s)}let a;for(a in i){let s=i[a];H(s)&&(i[a]=Math.round(s))}Ow.trace("Code Generation Metrics",i),_t("code_generation",i)}),this.restartSession()}};Kn=new WeakMap,Ko=new WeakMap;function zw(t,e){switch(t){case"canvasComponent":return"smart_component";case"css":return"styles_preset";case"collection":return"collection";case"draftCollection":return"draft_collection";case"componentPresets":return"component_presets";case"screen":return U(e)?"web_page":"prototype_screen";case"prototype":return"prototype";case"vector":return"vector";case"vectorSet":return"vector_set";case"codeFile":case"config":case"siteMetadata":case"webPageMetadata":case"layoutTemplate":case"localization":case"design":case"kit":return;default:$(t)}}function $w(t,e){let r={};if(!e||Xp(t))return r;for(let o of t.cases)for(let n of e){let i=o.nameLocalized;if(!i)continue;let a=i[n.id]?.value;if(!A(a))continue;let s=r[o.id]??{};r[o.id]=s,s[n.id]=a}return r}function BC(t,e,r){if(t.cases.length===0)return m`(value) => value`;let o=$w(t,e),n=m`value`,i=m`locale`,a=m`fallbackLocale`;return new v(re.lines(m`(${n}, ${i}) => {`,m`const ${a} = ${i}?.fallback;`,m`switch (${n}) {`,...t.cases.map(({id:s,name:l})=>{let c=o[s];return c?new v(re.lines(m`case ${s}:`,m`switch (${i}?.id) {`,...Object.entries(c).map(([d,p])=>m`case ${d}: return ${p};`),m`default:`,m`if (${a}) return ${v.fn(r,n,a)};`,m`return ${l};`,m`}`)):m`case ${s}: return ${l};`}),m`default: return "";`,m`}`,m`}`))}var yd="framercms";function zC(t,e,r){return`${t}-${e}.${r}`}var qs=class{constructor(e){this.componentSourceNodeId=e;S(this,"assets",{})}create(e,r,o){let n=zC(this.componentSourceNodeId,e,r);return this.assets[n]=o,m`new URL(${`./${n}`}, import.meta.url).href`}};var $C=uo(iN());function ze(t,...e){if(!t)throw Error("Assertion Error"+(e.length>0?": "+e.join(" "):""))}function Bi(t){throw new Error(`Unexpected value: ${t}`)}var Uw=uo(gn());var UC=`// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
import { ComponentPresetsConsumer, Link, motion } from "framer";

// ../../library/src/router/lazy.tsx
import { forwardRef, isValidElement, useEffect } from "react";
var preloadKey = "preload";
function isLazyComponentType(componentType) {
  return typeof componentType === "object" && componentType !== null && !isValidElement(componentType) && preloadKey in componentType;
}

// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
import { Fragment, createElement } from "react";

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}

// src/code-generation/components/cms/bundled/getRichTextJsonResolver.tsx?bundle
var RichTextJsonType = /* @__PURE__ */ ((RichTextJsonType2) => {
  RichTextJsonType2[RichTextJsonType2["Fragment"] = 1] = "Fragment";
  RichTextJsonType2[RichTextJsonType2["Link"] = 2] = "Link";
  RichTextJsonType2[RichTextJsonType2["Module"] = 3] = "Module";
  RichTextJsonType2[RichTextJsonType2["Tag"] = 4] = "Tag";
  RichTextJsonType2[RichTextJsonType2["Text"] = 5] = "Text";
  return RichTextJsonType2;
})(RichTextJsonType || {});
function getRichTextJsonResolver(components) {
  const cache = /* @__PURE__ */ new Map();
  function deserializeChildren(children) {
    return children.map(deserializeNode);
  }
  function deserializeNode(node) {
    switch (node[0]) {
      case 1 /* Fragment */: {
        const [, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(Fragment, void 0, ...childNodes);
      }
      case 2 /* Link */: {
        const [, props, ...children] = node;
        const childNodes = deserializeChildren(children);
        return createElement(Link, props, ...childNodes);
      }
      case 3 /* Module */: {
        const [, identifier, props] = node;
        const Component = components[identifier];
        assert(Component, "Module not found");
        if (isLazyComponentType(Component)) {
          void Component.preload();
        }
        return <ComponentPresetsConsumer componentIdentifier={identifier}>
                        {(presetProps) => <Component {...presetProps} {...props} />}
                    </ComponentPresetsConsumer>;
      }
      case 4 /* Tag */: {
        const [, tag, props, ...children] = node;
        const childNodes = deserializeChildren(children);
        if (tag === "a") {
          return createElement(motion.a, props, ...childNodes);
        }
        return createElement(tag, props, ...childNodes);
      }
      case 5 /* Text */: {
        const [, text] = node;
        return text;
      }
    }
  }
  return (pointer) => {
    const cached = cache.get(pointer);
    if (cached) return cached;
    const json = JSON.parse(pointer);
    const result = deserializeNode(json);
    cache.set(pointer, result);
    return result;
  };
}
export {
  RichTextJsonType,
  getRichTextJsonResolver
};
`;var Xs=class{constructor(e,r,o,n,i,a,s,l){this.collectionNode=e;this.treeStore=r;this.imports=o;this.submodules=n;this.bindings=i;this.declarations=a;this.assets=s;this.links=l;S(this,"scopeNode");S(this,"cache",new Map);S(this,"components",{});S(this,"resolvers");S(this,"serializers",{fragment:e=>[1,...e],link:(e,r)=>[2,e,...r],module:(e,r)=>{if(this.addModuleImport(e))return[3,e,r]},tag:(e,r,o)=>[4,e,r,...o],text:e=>[5,e]});S(this,"resolveRichTextBinding");this.resolveRichTextBinding=this.bindings.create("resolveRichText"),this.scopeNode=this.treeStore.tree.getScopeNodeFor(this.collectionNode),this.resolvers=tS(this.assets,this.links,void 0,void 0)}addModuleImport(e){if(e in this.components)return!0;let r=Q(e),o=this.imports.addModuleImport(r,{lazy:!0});return o?(this.components[e]=o,!0):!1}add(e){let r=this.cache.get(e);if(r)return r;let o=eS(e,this.resolvers,this.serializers,{definitionProvider:P,tree:this.treeStore.tree,nodeId:this.collectionNode.id,scopeId:this.scopeNode?.id}),n=JSON.stringify(o);return this.cache.set(e,n),n}serialize(){let e=this.imports.addImport(this.submodules.create(UC).submoduleImport,{exportSpecifier:"getRichTextJsonResolver"}),r=this.declarations.dedupe("richTextComponents",this.components);this.declarations.create(m`const ${this.resolveRichTextBinding} = ${v.fn(e,r)}`)}};var Ks=class{constructor(){S(this,"values",new Map)}add(e){let r=this.values.get(e);if(H(r))return r;let o=this.values.size;return this.values.set(e,o),o}serialize(e,r){let o=[];for(let[i,a]of this.values){let s=Q(i),{importSpecifier:l}=Yr(s,"collection",e);g(l,"Import specifier must be defined"),o[a]=m`() => import(${l})`}let n=r.dedupe("vectors",o);return r.dedupe("resolveVectorSetItem",m`(pointer: number) => {${m.joinLines(m`const vector = ${n}[pointer]`,m`if (vector) return vector().then(v => v.default)`)}}`)}};var Ye={Uint8:1,Uint16:2,Uint32:4,BigUint64:8,Int8:1,Int16:2,Int32:4,BigInt64:8,Float32:4,Float64:8},Ys=class{constructor(e){this.bytes=e;S(this,"offset",0);S(this,"view");S(this,"decoder",new TextDecoder);this.view=Yn(this.bytes)}getOffset(){return this.offset}ensureLength(e){let r=this.bytes.length;if(!(this.offset+e<=r))throw new Error("Reading out of bounds")}readUint8(){let e=Ye.Uint8;this.ensureLength(e);let r=this.view.getUint8(this.offset);return this.offset+=e,r}readUint16(){let e=Ye.Uint16;this.ensureLength(e);let r=this.view.getUint16(this.offset);return this.offset+=e,r}readUint32(){let e=Ye.Uint32;this.ensureLength(e);let r=this.view.getUint32(this.offset);return this.offset+=e,r}readUint64(){let e=this.readBigUint64();return Number(e)}readBigUint64(){let e=Ye.BigUint64;this.ensureLength(e);let r=this.view.getBigUint64(this.offset);return this.offset+=e,r}readInt8(){let e=Ye.Int8;this.ensureLength(e);let r=this.view.getInt8(this.offset);return this.offset+=e,r}readInt16(){let e=Ye.Int16;this.ensureLength(e);let r=this.view.getInt16(this.offset);return this.offset+=e,r}readInt32(){let e=Ye.Int32;this.ensureLength(e);let r=this.view.getInt32(this.offset);return this.offset+=e,r}readInt64(){let e=this.readBigInt64();return Number(e)}readBigInt64(){let e=Ye.BigInt64;this.ensureLength(e);let r=this.view.getBigInt64(this.offset);return this.offset+=e,r}readFloat32(){let e=Ye.Float32;this.ensureLength(e);let r=this.view.getFloat32(this.offset);return this.offset+=e,r}readFloat64(){let e=Ye.Float64;this.ensureLength(e);let r=this.view.getFloat64(this.offset);return this.offset+=e,r}readBytes(e){let r=this.offset,o=r+e,n=this.bytes.subarray(r,o);return this.offset=o,n}readString(){let e=this.readUint32(),r=this.readBytes(e);return this.decoder.decode(r)}readJson(){let e=this.readString();return JSON.parse(e)}};function Yn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}var Ww=1024,Hw=1.5,Sd=t=>2**t-1,Cd=t=>-(2**(t-1)),bd=t=>2**(t-1)-1,Fr={Uint8:0,Uint16:0,Uint32:0,Uint64:0,BigUint64:0,Int8:Cd(8),Int16:Cd(16),Int32:Cd(32),Int64:Number.MIN_SAFE_INTEGER,BigInt64:-(BigInt(2)**BigInt(63))},Ar={Uint8:Sd(8),Uint16:Sd(16),Uint32:Sd(32),Uint64:Number.MAX_SAFE_INTEGER,BigUint64:BigInt(2)**BigInt(64)-BigInt(1),Int8:bd(8),Int16:bd(16),Int32:bd(32),Int64:Number.MAX_SAFE_INTEGER,BigInt64:BigInt(2)**BigInt(63)-BigInt(1)};function Lr(t,e,r,o){ze(t>=e,t,"outside lower bound for",o),ze(t<=r,t,"outside upper bound for",o)}var Yo=class{constructor(){S(this,"offset",0);S(this,"bytes",new Uint8Array(Ww));S(this,"view",Yn(this.bytes));S(this,"encoder",new TextEncoder);S(this,"encodedStrings",new Map)}getOffset(){return this.offset}slice(e=0,r=this.offset){return this.bytes.slice(e,r)}subarray(e=0,r=this.offset){return this.bytes.subarray(e,r)}ensureLength(e){let r=this.bytes.length;if(this.offset+e<=r)return;let o=Math.ceil(r*Hw)+e,n=new Uint8Array(o);n.set(this.bytes),this.bytes=n,this.view=Yn(n)}writeUint8(e){Lr(e,Fr.Uint8,Ar.Uint8,"Uint8");let r=Ye.Uint8;this.ensureLength(r),this.view.setUint8(this.offset,e),this.offset+=r}writeUint16(e){Lr(e,Fr.Uint16,Ar.Uint16,"Uint16");let r=Ye.Uint16;this.ensureLength(r),this.view.setUint16(this.offset,e),this.offset+=r}writeUint32(e){Lr(e,Fr.Uint32,Ar.Uint32,"Uint32");let r=Ye.Uint32;this.ensureLength(r),this.view.setUint32(this.offset,e),this.offset+=r}writeUint64(e){Lr(e,Fr.Uint64,Ar.Uint64,"Uint64");let r=BigInt(e);this.writeBigUint64(r)}writeBigUint64(e){Lr(e,Fr.BigUint64,Ar.BigUint64,"BigUint64");let r=Ye.BigUint64;this.ensureLength(r),this.view.setBigUint64(this.offset,e),this.offset+=r}writeInt8(e){Lr(e,Fr.Int8,Ar.Int8,"Int8");let r=Ye.Int8;this.ensureLength(r),this.view.setInt8(this.offset,e),this.offset+=r}writeInt16(e){Lr(e,Fr.Int16,Ar.Int16,"Int16");let r=Ye.Int16;this.ensureLength(r),this.view.setInt16(this.offset,e),this.offset+=r}writeInt32(e){Lr(e,Fr.Int32,Ar.Int32,"Int32");let r=Ye.Int32;this.ensureLength(r),this.view.setInt32(this.offset,e),this.offset+=r}writeInt64(e){Lr(e,Fr.Int64,Ar.Int64,"Int64");let r=BigInt(e);this.writeBigInt64(r)}writeBigInt64(e){Lr(e,Fr.BigInt64,Ar.BigInt64,"BigInt64");let r=Ye.BigInt64;this.ensureLength(r),this.view.setBigInt64(this.offset,e),this.offset+=r}writeFloat32(e){let r=Ye.Float32;this.ensureLength(r),this.view.setFloat32(this.offset,e),this.offset+=r}writeFloat64(e){let r=Ye.Float64;this.ensureLength(r),this.view.setFloat64(this.offset,e),this.offset+=r}writeBytes(e){let r=e.length;this.ensureLength(r),this.bytes.set(e,this.offset),this.offset+=r}encodeString(e){let r=this.encodedStrings.get(e);if(r)return r;let o=this.encoder.encode(e);return this.encodedStrings.set(e,o),o}writeString(e){let r=this.encodeString(e),o=r.length;this.writeUint32(o),this.writeBytes(r)}writeJson(e){let r=JSON.stringify(e);this.writeString(r)}};var WC=`var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// ../../../node_modules/dataloader/index.js
var require_dataloader = __commonJS({
  "../../../node_modules/dataloader/index.js"(exports, module) {
    "use strict";
    var DataLoader2 = /* @__PURE__ */ function() {
      function DataLoader3(batchLoadFn, options) {
        if (typeof batchLoadFn !== "function") {
          throw new TypeError("DataLoader must be constructed with a function which accepts " + ("Array<key> and returns Promise<Array<value>>, but got: " + batchLoadFn + "."));
        }
        this._batchLoadFn = batchLoadFn;
        this._maxBatchSize = getValidMaxBatchSize(options);
        this._batchScheduleFn = getValidBatchScheduleFn(options);
        this._cacheKeyFn = getValidCacheKeyFn(options);
        this._cacheMap = getValidCacheMap(options);
        this._batch = null;
        this.name = getValidName(options);
      }
      var _proto = DataLoader3.prototype;
      _proto.load = function load(key) {
        if (key === null || key === void 0) {
          throw new TypeError("The loader.load() function must be called with a value, " + ("but got: " + String(key) + "."));
        }
        var batch = getCurrentBatch(this);
        var cacheMap = this._cacheMap;
        var cacheKey = this._cacheKeyFn(key);
        if (cacheMap) {
          var cachedPromise = cacheMap.get(cacheKey);
          if (cachedPromise) {
            var cacheHits = batch.cacheHits || (batch.cacheHits = []);
            return new Promise(function(resolve) {
              cacheHits.push(function() {
                resolve(cachedPromise);
              });
            });
          }
        }
        batch.keys.push(key);
        var promise = new Promise(function(resolve, reject) {
          batch.callbacks.push({
            resolve,
            reject
          });
        });
        if (cacheMap) {
          cacheMap.set(cacheKey, promise);
        }
        return promise;
      };
      _proto.loadMany = function loadMany(keys) {
        if (!isArrayLike(keys)) {
          throw new TypeError("The loader.loadMany() function must be called with Array<key> " + ("but got: " + keys + "."));
        }
        var loadPromises = [];
        for (var i = 0; i < keys.length; i++) {
          loadPromises.push(this.load(keys[i])["catch"](function(error) {
            return error;
          }));
        }
        return Promise.all(loadPromises);
      };
      _proto.clear = function clear(key) {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          var cacheKey = this._cacheKeyFn(key);
          cacheMap["delete"](cacheKey);
        }
        return this;
      };
      _proto.clearAll = function clearAll() {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          cacheMap.clear();
        }
        return this;
      };
      _proto.prime = function prime(key, value) {
        var cacheMap = this._cacheMap;
        if (cacheMap) {
          var cacheKey = this._cacheKeyFn(key);
          if (cacheMap.get(cacheKey) === void 0) {
            var promise;
            if (value instanceof Error) {
              promise = Promise.reject(value);
              promise["catch"](function() {
              });
            } else {
              promise = Promise.resolve(value);
            }
            cacheMap.set(cacheKey, promise);
          }
        }
        return this;
      };
      return DataLoader3;
    }();
    var enqueuePostPromiseJob = typeof process === "object" && typeof process.nextTick === "function" ? function(fn) {
      if (!resolvedPromise) {
        resolvedPromise = Promise.resolve();
      }
      resolvedPromise.then(function() {
        process.nextTick(fn);
      });
    } : typeof setImmediate === "function" ? function(fn) {
      setImmediate(fn);
    } : function(fn) {
      setTimeout(fn);
    };
    var resolvedPromise;
    function getCurrentBatch(loader) {
      var existingBatch = loader._batch;
      if (existingBatch !== null && !existingBatch.hasDispatched && existingBatch.keys.length < loader._maxBatchSize) {
        return existingBatch;
      }
      var newBatch = {
        hasDispatched: false,
        keys: [],
        callbacks: []
      };
      loader._batch = newBatch;
      loader._batchScheduleFn(function() {
        dispatchBatch(loader, newBatch);
      });
      return newBatch;
    }
    function dispatchBatch(loader, batch) {
      batch.hasDispatched = true;
      if (batch.keys.length === 0) {
        resolveCacheHits(batch);
        return;
      }
      var batchPromise;
      try {
        batchPromise = loader._batchLoadFn(batch.keys);
      } catch (e) {
        return failedDispatch(loader, batch, new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function " + ("errored synchronously: " + String(e) + ".")));
      }
      if (!batchPromise || typeof batchPromise.then !== "function") {
        return failedDispatch(loader, batch, new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did " + ("not return a Promise: " + String(batchPromise) + ".")));
      }
      batchPromise.then(function(values) {
        if (!isArrayLike(values)) {
          throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did " + ("not return a Promise of an Array: " + String(values) + "."));
        }
        if (values.length !== batch.keys.length) {
          throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys." + ("\\n\\nKeys:\\n" + String(batch.keys)) + ("\\n\\nValues:\\n" + String(values)));
        }
        resolveCacheHits(batch);
        for (var i = 0; i < batch.callbacks.length; i++) {
          var value = values[i];
          if (value instanceof Error) {
            batch.callbacks[i].reject(value);
          } else {
            batch.callbacks[i].resolve(value);
          }
        }
      })["catch"](function(error) {
        failedDispatch(loader, batch, error);
      });
    }
    function failedDispatch(loader, batch, error) {
      resolveCacheHits(batch);
      for (var i = 0; i < batch.keys.length; i++) {
        loader.clear(batch.keys[i]);
        batch.callbacks[i].reject(error);
      }
    }
    function resolveCacheHits(batch) {
      if (batch.cacheHits) {
        for (var i = 0; i < batch.cacheHits.length; i++) {
          batch.cacheHits[i]();
        }
      }
    }
    function getValidMaxBatchSize(options) {
      var shouldBatch = !options || options.batch !== false;
      if (!shouldBatch) {
        return 1;
      }
      var maxBatchSize = options && options.maxBatchSize;
      if (maxBatchSize === void 0) {
        return Infinity;
      }
      if (typeof maxBatchSize !== "number" || maxBatchSize < 1) {
        throw new TypeError("maxBatchSize must be a positive number: " + maxBatchSize);
      }
      return maxBatchSize;
    }
    function getValidBatchScheduleFn(options) {
      var batchScheduleFn = options && options.batchScheduleFn;
      if (batchScheduleFn === void 0) {
        return enqueuePostPromiseJob;
      }
      if (typeof batchScheduleFn !== "function") {
        throw new TypeError("batchScheduleFn must be a function: " + batchScheduleFn);
      }
      return batchScheduleFn;
    }
    function getValidCacheKeyFn(options) {
      var cacheKeyFn = options && options.cacheKeyFn;
      if (cacheKeyFn === void 0) {
        return function(key) {
          return key;
        };
      }
      if (typeof cacheKeyFn !== "function") {
        throw new TypeError("cacheKeyFn must be a function: " + cacheKeyFn);
      }
      return cacheKeyFn;
    }
    function getValidCacheMap(options) {
      var shouldCache = !options || options.cache !== false;
      if (!shouldCache) {
        return null;
      }
      var cacheMap = options && options.cacheMap;
      if (cacheMap === void 0) {
        return /* @__PURE__ */ new Map();
      }
      if (cacheMap !== null) {
        var cacheFunctions = ["get", "set", "delete", "clear"];
        var missingFunctions = cacheFunctions.filter(function(fnName) {
          return cacheMap && typeof cacheMap[fnName] !== "function";
        });
        if (missingFunctions.length !== 0) {
          throw new TypeError("Custom cacheMap missing methods: " + missingFunctions.join(", "));
        }
      }
      return cacheMap;
    }
    function getValidName(options) {
      if (options && options.name) {
        return options.name;
      }
      return null;
    }
    function isArrayLike(x) {
      return typeof x === "object" && x !== null && typeof x.length === "number" && (x.length === 0 || x.length > 0 && Object.prototype.hasOwnProperty.call(x, x.length - 1));
    }
    module.exports = DataLoader2;
  }
});

// src/code-generation/components/cms/bundled/DatabaseCollection.ts?bundle
var import_dataloader = __toESM(require_dataloader());

// src/code-generation/components/cms/bundled/BufferReader.ts
var BYTE_LENGTH = {
  Uint8: 1,
  Uint16: 2,
  Uint32: 4,
  BigUint64: 8,
  Int8: 1,
  Int16: 2,
  Int32: 4,
  BigInt64: 8,
  Float32: 4,
  Float64: 8
};
var BufferReader = class {
  constructor(bytes) {
    this.bytes = bytes;
    __publicField(this, "offset", 0);
    __publicField(this, "view");
    __publicField(this, "decoder", new TextDecoder());
    this.view = getDataView(this.bytes);
  }
  getOffset() {
    return this.offset;
  }
  ensureLength(requiredBytes) {
    const oldLength = this.bytes.length;
    if (this.offset + requiredBytes <= oldLength) return;
    throw new Error("Reading out of bounds");
  }
  readUint8() {
    const size = BYTE_LENGTH.Uint8;
    this.ensureLength(size);
    const value = this.view.getUint8(this.offset);
    this.offset += size;
    return value;
  }
  readUint16() {
    const size = BYTE_LENGTH.Uint16;
    this.ensureLength(size);
    const value = this.view.getUint16(this.offset);
    this.offset += size;
    return value;
  }
  readUint32() {
    const size = BYTE_LENGTH.Uint32;
    this.ensureLength(size);
    const value = this.view.getUint32(this.offset);
    this.offset += size;
    return value;
  }
  readUint64() {
    const bigint = this.readBigUint64();
    return Number(bigint);
  }
  readBigUint64() {
    const size = BYTE_LENGTH.BigUint64;
    this.ensureLength(size);
    const value = this.view.getBigUint64(this.offset);
    this.offset += size;
    return value;
  }
  readInt8() {
    const size = BYTE_LENGTH.Int8;
    this.ensureLength(size);
    const value = this.view.getInt8(this.offset);
    this.offset += size;
    return value;
  }
  readInt16() {
    const size = BYTE_LENGTH.Int16;
    this.ensureLength(size);
    const value = this.view.getInt16(this.offset);
    this.offset += size;
    return value;
  }
  readInt32() {
    const size = BYTE_LENGTH.Int32;
    this.ensureLength(size);
    const value = this.view.getInt32(this.offset);
    this.offset += size;
    return value;
  }
  readInt64() {
    const bigint = this.readBigInt64();
    return Number(bigint);
  }
  readBigInt64() {
    const size = BYTE_LENGTH.BigInt64;
    this.ensureLength(size);
    const value = this.view.getBigInt64(this.offset);
    this.offset += size;
    return value;
  }
  readFloat32() {
    const size = BYTE_LENGTH.Float32;
    this.ensureLength(size);
    const value = this.view.getFloat32(this.offset);
    this.offset += size;
    return value;
  }
  readFloat64() {
    const size = BYTE_LENGTH.Float64;
    this.ensureLength(size);
    const value = this.view.getFloat64(this.offset);
    this.offset += size;
    return value;
  }
  readBytes(length) {
    const start = this.offset;
    const end = start + length;
    const value = this.bytes.subarray(start, end);
    this.offset = end;
    return value;
  }
  readString() {
    const length = this.readUint32();
    const bytes = this.readBytes(length);
    return this.decoder.decode(bytes);
  }
  readJson() {
    const string = this.readString();
    return JSON.parse(string);
  }
};
function getDataView(bytes) {
  return new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);
}

// src/code-generation/components/cms/bundled/DatabaseDictionaryIndex.ts
import { ControlType as ControlType2 } from "framer";

// ../../library/src/utils/utils.ts
var isWindow = typeof window !== "undefined";
var supportsRequestIdleCallback = isWindow && typeof window.requestIdleCallback === "function";

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}
function assertNever(condition) {
  throw new Error(\`Unexpected value: \${condition}\`);
}

// src/code-generation/components/cms/bundled/BufferWriter.ts
var INITIAL_BUFFER_SIZE = 1024;
var GROWTH_FACTOR = 1.5;
var maxUnsignedNumber = (bits) => 2 ** bits - 1;
var minSignedNumber = (bits) => -(2 ** (bits - 1));
var maxSignedNumber = (bits) => 2 ** (bits - 1) - 1;
var MIN_VALUE = {
  Uint8: 0,
  Uint16: 0,
  Uint32: 0,
  Uint64: 0,
  BigUint64: 0,
  Int8: minSignedNumber(8),
  Int16: minSignedNumber(16),
  Int32: minSignedNumber(32),
  Int64: Number.MIN_SAFE_INTEGER,
  BigInt64: -(BigInt(2) ** BigInt(63))
};
var MAX_VALUE = {
  Uint8: maxUnsignedNumber(8),
  Uint16: maxUnsignedNumber(16),
  Uint32: maxUnsignedNumber(32),
  Uint64: Number.MAX_SAFE_INTEGER,
  BigUint64: BigInt(2) ** BigInt(64) - BigInt(1),
  Int8: maxSignedNumber(8),
  Int16: maxSignedNumber(16),
  Int32: maxSignedNumber(32),
  Int64: Number.MAX_SAFE_INTEGER,
  BigInt64: BigInt(2) ** BigInt(63) - BigInt(1)
};
function assertRange(value, min, max, dataType) {
  assert(value >= min, value, "outside lower bound for", dataType);
  assert(value <= max, value, "outside upper bound for", dataType);
}
var BufferWriter = class {
  constructor() {
    __publicField(this, "offset", 0);
    __publicField(this, "bytes", new Uint8Array(INITIAL_BUFFER_SIZE));
    __publicField(this, "view", getDataView(this.bytes));
    __publicField(this, "encoder", new TextEncoder());
    __publicField(this, "encodedStrings", /* @__PURE__ */ new Map());
  }
  getOffset() {
    return this.offset;
  }
  slice(start = 0, end = this.offset) {
    return this.bytes.slice(start, end);
  }
  subarray(start = 0, end = this.offset) {
    return this.bytes.subarray(start, end);
  }
  ensureLength(requiredBytes) {
    const oldLength = this.bytes.length;
    if (this.offset + requiredBytes <= oldLength) return;
    const newLength = Math.ceil(oldLength * GROWTH_FACTOR) + requiredBytes;
    const newBytes = new Uint8Array(newLength);
    newBytes.set(this.bytes);
    this.bytes = newBytes;
    this.view = getDataView(newBytes);
  }
  writeUint8(value) {
    assertRange(value, MIN_VALUE.Uint8, MAX_VALUE.Uint8, "Uint8");
    const size = BYTE_LENGTH.Uint8;
    this.ensureLength(size);
    this.view.setUint8(this.offset, value);
    this.offset += size;
  }
  writeUint16(value) {
    assertRange(value, MIN_VALUE.Uint16, MAX_VALUE.Uint16, "Uint16");
    const size = BYTE_LENGTH.Uint16;
    this.ensureLength(size);
    this.view.setUint16(this.offset, value);
    this.offset += size;
  }
  writeUint32(value) {
    assertRange(value, MIN_VALUE.Uint32, MAX_VALUE.Uint32, "Uint32");
    const size = BYTE_LENGTH.Uint32;
    this.ensureLength(size);
    this.view.setUint32(this.offset, value);
    this.offset += size;
  }
  writeUint64(value) {
    assertRange(value, MIN_VALUE.Uint64, MAX_VALUE.Uint64, "Uint64");
    const bigint = BigInt(value);
    this.writeBigUint64(bigint);
  }
  writeBigUint64(value) {
    assertRange(value, MIN_VALUE.BigUint64, MAX_VALUE.BigUint64, "BigUint64");
    const size = BYTE_LENGTH.BigUint64;
    this.ensureLength(size);
    this.view.setBigUint64(this.offset, value);
    this.offset += size;
  }
  writeInt8(value) {
    assertRange(value, MIN_VALUE.Int8, MAX_VALUE.Int8, "Int8");
    const size = BYTE_LENGTH.Int8;
    this.ensureLength(size);
    this.view.setInt8(this.offset, value);
    this.offset += size;
  }
  writeInt16(value) {
    assertRange(value, MIN_VALUE.Int16, MAX_VALUE.Int16, "Int16");
    const size = BYTE_LENGTH.Int16;
    this.ensureLength(size);
    this.view.setInt16(this.offset, value);
    this.offset += size;
  }
  writeInt32(value) {
    assertRange(value, MIN_VALUE.Int32, MAX_VALUE.Int32, "Int32");
    const size = BYTE_LENGTH.Int32;
    this.ensureLength(size);
    this.view.setInt32(this.offset, value);
    this.offset += size;
  }
  writeInt64(value) {
    assertRange(value, MIN_VALUE.Int64, MAX_VALUE.Int64, "Int64");
    const bigint = BigInt(value);
    this.writeBigInt64(bigint);
  }
  writeBigInt64(value) {
    assertRange(value, MIN_VALUE.BigInt64, MAX_VALUE.BigInt64, "BigInt64");
    const size = BYTE_LENGTH.BigInt64;
    this.ensureLength(size);
    this.view.setBigInt64(this.offset, value);
    this.offset += size;
  }
  writeFloat32(value) {
    const size = BYTE_LENGTH.Float32;
    this.ensureLength(size);
    this.view.setFloat32(this.offset, value);
    this.offset += size;
  }
  writeFloat64(value) {
    const size = BYTE_LENGTH.Float64;
    this.ensureLength(size);
    this.view.setFloat64(this.offset, value);
    this.offset += size;
  }
  writeBytes(value) {
    const size = value.length;
    this.ensureLength(size);
    this.bytes.set(value, this.offset);
    this.offset += size;
  }
  encodeString(value) {
    const cached = this.encodedStrings.get(value);
    if (cached) return cached;
    const bytes = this.encoder.encode(value);
    this.encodedStrings.set(value, bytes);
    return bytes;
  }
  writeString(value) {
    const bytes = this.encodeString(value);
    const size = bytes.length;
    this.writeUint32(size);
    this.writeBytes(bytes);
  }
  writeJson(value) {
    const json = JSON.stringify(value);
    this.writeString(json);
  }
};

// src/utils/typeChecks.ts
function isString(value) {
  return typeof value === "string";
}
function isNumber(value) {
  return Number.isFinite(value);
}
function isNull(value) {
  return value === null;
}

// src/code-generation/components/cms/bundled/models/DatabaseItemPointerModel.ts
var DatabaseItemPointerModel = class _DatabaseItemPointerModel {
  constructor(chunkId, offset, length) {
    this.chunkId = chunkId;
    this.offset = offset;
    this.length = length;
  }
  static fromString(value) {
    const [chunkId, offset, length] = value.split("/").map(Number);
    assert(isNumber(chunkId), "Invalid chunkId");
    assert(isNumber(offset), "Invalid offset");
    assert(isNumber(length), "Invalid length");
    return new _DatabaseItemPointerModel(chunkId, offset, length);
  }
  toString() {
    return \`\${this.chunkId}/\${this.offset}/\${this.length}\`;
  }
  static read(reader) {
    const chunkId = reader.readUint16();
    const offset = reader.readUint32();
    const length = reader.readUint32();
    return new _DatabaseItemPointerModel(chunkId, offset, length);
  }
  write(writer) {
    writer.writeUint16(this.chunkId);
    writer.writeUint32(this.offset);
    writer.writeUint32(this.length);
  }
  compare(other) {
    if (this.chunkId < other.chunkId) return -1;
    if (this.chunkId > other.chunkId) return 1;
    if (this.offset < other.offset) return -1;
    if (this.offset > other.offset) return 1;
    assert(this.length === other.length);
    return 0;
  }
};

// src/code-generation/components/cms/bundled/models/DatabaseValueModel.ts
import { ControlType } from "framer";
function getValueType(value) {
  if (isNull(value)) {
    return 0 /* Null */;
  }
  switch (value.type) {
    case ControlType.Array:
      return 1 /* Array */;
    case ControlType.Boolean:
      return 2 /* Boolean */;
    case ControlType.Color:
      return 3 /* Color */;
    case ControlType.Date:
      return 4 /* Date */;
    case ControlType.Enum:
      return 5 /* Enum */;
    case ControlType.File:
      return 6 /* File */;
    case ControlType.ResponsiveImage:
      return 10 /* ResponsiveImage */;
    case ControlType.Link:
      return 7 /* Link */;
    case ControlType.Number:
      return 8 /* Number */;
    case ControlType.Object:
      return 9 /* Object */;
    case ControlType.RichText:
      return 11 /* RichText */;
    case ControlType.String:
      return 12 /* String */;
    case ControlType.VectorSetItem:
      return 13 /* VectorSetItem */;
    default:
      assertNever(value);
  }
}
var DatabaseValueModel;
((DatabaseValueModel2) => {
  function read(reader) {
    const type = reader.readUint8();
    switch (type) {
      case 0 /* Null */:
        return null;
      case 1 /* Array */:
        return readArray(reader);
      case 2 /* Boolean */:
        return readBoolean(reader);
      case 3 /* Color */:
        return readColor(reader);
      case 4 /* Date */:
        return readDate(reader);
      case 5 /* Enum */:
        return readEnum(reader);
      case 6 /* File */:
        return readFile(reader);
      case 7 /* Link */:
        return readLink(reader);
      case 8 /* Number */:
        return readNumber(reader);
      case 9 /* Object */:
        return readObject(reader);
      case 10 /* ResponsiveImage */:
        return readResponsiveImage(reader);
      case 11 /* RichText */:
        return readRichText(reader);
      case 12 /* String */:
        return readString(reader);
      case 13 /* VectorSetItem */:
        return readVectorSetItem(reader);
      default:
        assertNever(type);
    }
  }
  DatabaseValueModel2.read = read;
  function write(writer, value) {
    const type = getValueType(value);
    writer.writeUint8(type);
    if (isNull(value)) return;
    switch (value.type) {
      case ControlType.Array:
        return writeArray(writer, value);
      case ControlType.Boolean:
        return writeBoolean(writer, value);
      case ControlType.Color:
        return writeColor(writer, value);
      case ControlType.Date:
        return writeDate(writer, value);
      case ControlType.Enum:
        return writeEnum(writer, value);
      case ControlType.File:
        return writeFile(writer, value);
      case ControlType.Link:
        return writeLink(writer, value);
      case ControlType.Number:
        return writeNumber(writer, value);
      case ControlType.Object:
        return writeObject(writer, value);
      case ControlType.ResponsiveImage:
        return writeResponsiveImage(writer, value);
      case ControlType.RichText:
        return writeRichText(writer, value);
      case ControlType.VectorSetItem:
        return writeVectorSetItem(writer, value);
      case ControlType.String:
        return writeString(writer, value);
      default:
        assertNever(value);
    }
  }
  DatabaseValueModel2.write = write;
  function compare(left, right, collation) {
    const leftType = getValueType(left);
    const rightType = getValueType(right);
    if (leftType < rightType) return -1;
    if (leftType > rightType) return 1;
    if (isNull(left) || isNull(right)) return 0;
    switch (left.type) {
      case ControlType.Array:
        assert(right.type === ControlType.Array);
        return compareArray(left, right, collation);
      case ControlType.Boolean:
        assert(right.type === ControlType.Boolean);
        return compareBoolean(left, right);
      case ControlType.Color:
        assert(right.type === ControlType.Color);
        return compareColor(left, right);
      case ControlType.Date:
        assert(right.type === ControlType.Date);
        return compareDate(left, right);
      case ControlType.Enum:
        assert(right.type === ControlType.Enum);
        return compareEnum(left, right);
      case ControlType.File:
        assert(right.type === ControlType.File);
        return compareFile(left, right);
      case ControlType.Link:
        assert(right.type === ControlType.Link);
        return compareLink(left, right);
      case ControlType.Number:
        assert(right.type === ControlType.Number);
        return compareNumber(left, right);
      case ControlType.Object:
        assert(right.type === ControlType.Object);
        return compareObject(left, right, collation);
      case ControlType.ResponsiveImage:
        assert(right.type === ControlType.ResponsiveImage);
        return compareResponsiveImage(left, right);
      case ControlType.RichText:
        assert(right.type === ControlType.RichText);
        return compareRichText(left, right);
      case ControlType.VectorSetItem:
        assert(right.type === ControlType.VectorSetItem);
        return compareVectorSetItem(left, right);
      case ControlType.String:
        assert(right.type === ControlType.String);
        return compareString(left, right, collation);
      default:
        assertNever(left);
    }
  }
  DatabaseValueModel2.compare = compare;
})(DatabaseValueModel || (DatabaseValueModel = {}));
function readArray(reader) {
  const length = reader.readUint16();
  const value = [];
  for (let i = 0; i < length; i++) {
    const item = DatabaseValueModel.read(reader);
    value.push(item);
  }
  return {
    type: ControlType.Array,
    value
  };
}
function writeArray(writer, value) {
  writer.writeUint16(value.value.length);
  for (const item of value.value) {
    DatabaseValueModel.write(writer, item);
  }
}
function compareArray(left, right, collation) {
  const leftLength = left.value.length;
  const rightLength = right.value.length;
  if (leftLength < rightLength) return -1;
  if (leftLength > rightLength) return 1;
  for (let i = 0; i < leftLength; i++) {
    const leftItem = left.value[i];
    const rightItem = right.value[i];
    const result = DatabaseValueModel.compare(leftItem, rightItem, collation);
    if (result !== 0) return result;
  }
  return 0;
}
function readBoolean(reader) {
  return {
    type: ControlType.Boolean,
    value: reader.readUint8() !== 0
  };
}
function writeBoolean(writer, value) {
  writer.writeUint8(value.value ? 1 : 0);
}
function compareBoolean(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readColor(reader) {
  return {
    type: ControlType.Color,
    value: reader.readString()
  };
}
function writeColor(writer, value) {
  writer.writeString(value.value);
}
function compareColor(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readDate(reader) {
  const timestamp = reader.readInt64();
  const date = new Date(timestamp);
  return {
    type: ControlType.Date,
    value: date.toISOString()
  };
}
function writeDate(writer, value) {
  const date = new Date(value.value);
  const timestamp = date.getTime();
  writer.writeInt64(timestamp);
}
function compareDate(left, right) {
  const leftDate = new Date(left.value);
  const rightDate = new Date(right.value);
  if (leftDate < rightDate) return -1;
  if (leftDate > rightDate) return 1;
  return 0;
}
function readEnum(reader) {
  return {
    type: ControlType.Enum,
    value: reader.readString()
  };
}
function writeEnum(writer, value) {
  writer.writeString(value.value);
}
function compareEnum(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readFile(reader) {
  return {
    type: ControlType.File,
    value: reader.readString()
  };
}
function writeFile(writer, value) {
  writer.writeString(value.value);
}
function compareFile(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readLink(reader) {
  return {
    type: ControlType.Link,
    value: reader.readJson()
  };
}
function writeLink(writer, value) {
  writer.writeJson(value.value);
}
function compareLink(left, right) {
  const leftEncoded = JSON.stringify(left.value);
  const rightEncoded = JSON.stringify(right.value);
  if (leftEncoded < rightEncoded) return -1;
  if (leftEncoded > rightEncoded) return 1;
  return 0;
}
function readNumber(reader) {
  return {
    type: ControlType.Number,
    value: reader.readFloat64()
  };
}
function writeNumber(writer, value) {
  writer.writeFloat64(value.value);
}
function compareNumber(left, right) {
  if (left.value < right.value) return -1;
  if (left.value > right.value) return 1;
  return 0;
}
function readObject(reader) {
  const length = reader.readUint16();
  const result = {};
  for (let i = 0; i < length; i++) {
    const key = reader.readString();
    result[key] = DatabaseValueModel.read(reader);
  }
  return {
    type: ControlType.Object,
    value: result
  };
}
function writeObject(writer, value) {
  const entries = Object.entries(value.value);
  writer.writeUint16(entries.length);
  for (const [key, item] of entries) {
    writer.writeString(key);
    DatabaseValueModel.write(writer, item);
  }
}
function compareObject(left, right, collation) {
  const leftKeys = Object.keys(left.value).sort();
  const rightKeys = Object.keys(right.value).sort();
  if (leftKeys.length < rightKeys.length) return -1;
  if (leftKeys.length > rightKeys.length) return 1;
  for (let i = 0; i < leftKeys.length; i++) {
    const leftKey = leftKeys[i];
    const rightKey = rightKeys[i];
    if (leftKey < rightKey) return -1;
    if (leftKey > rightKey) return 1;
    const leftValue = left.value[leftKey] ?? null;
    const rightValue = right.value[rightKey] ?? null;
    const result = DatabaseValueModel.compare(leftValue, rightValue, collation);
    if (result !== 0) return result;
  }
  return 0;
}
function readResponsiveImage(reader) {
  return {
    type: ControlType.ResponsiveImage,
    value: reader.readJson()
  };
}
function writeResponsiveImage(writer, value) {
  writer.writeJson(value.value);
}
function compareResponsiveImage(left, right) {
  const leftEncoded = JSON.stringify(left.value);
  const rightEncoded = JSON.stringify(right.value);
  if (leftEncoded < rightEncoded) return -1;
  if (leftEncoded > rightEncoded) return 1;
  return 0;
}
function readRichText(reader) {
  const type = reader.readInt8();
  if (type === 0) {
    return {
      type: ControlType.RichText,
      value: reader.readUint32()
    };
  }
  if (type === 1) {
    return {
      type: ControlType.RichText,
      value: reader.readString()
    };
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function writeRichText(writer, value) {
  if (isNumber(value.value)) {
    writer.writeInt8(0);
    writer.writeUint32(value.value);
    return;
  }
  if (isString(value.value)) {
    writer.writeInt8(1);
    writer.writeString(value.value);
    return;
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function compareRichText(left, right) {
  const leftValue = left.value;
  const rightValue = right.value;
  if (isNumber(leftValue) && isNumber(rightValue)) {
    if (leftValue < rightValue) return -1;
    if (leftValue > rightValue) return 1;
    return 0;
  }
  if (isString(leftValue) && isString(rightValue)) {
    if (leftValue < rightValue) return -1;
    if (leftValue > rightValue) return 1;
    return 0;
  }
  throw new Error(\`Invalid rich text pointer\`);
}
function readString(reader) {
  return {
    type: ControlType.String,
    value: reader.readString()
  };
}
function writeString(writer, value) {
  writer.writeString(value.value);
}
function compareString(left, right, collation) {
  let leftValue = left.value;
  let rightValue = right.value;
  if (collation.type === 0 /* CaseInsensitive */) {
    leftValue = left.value.toLowerCase();
    rightValue = right.value.toLowerCase();
  }
  if (leftValue < rightValue) return -1;
  if (leftValue > rightValue) return 1;
  return 0;
}
function readVectorSetItem(reader) {
  return {
    type: ControlType.VectorSetItem,
    value: reader.readUint32()
  };
}
function writeVectorSetItem(writer, value) {
  writer.writeUint32(value.value);
}
function compareVectorSetItem(left, right) {
  const leftValue = left.value;
  const rightValue = right.value;
  if (leftValue < rightValue) return -1;
  if (leftValue > rightValue) return 1;
  return 0;
}

// src/code-generation/components/cms/bundled/models/DatabaseDictionaryIndexModel.ts
var DatabaseDictionaryIndexModel = class _DatabaseDictionaryIndexModel {
  constructor(fieldNames, options) {
    this.fieldNames = fieldNames;
    this.options = options;
    __publicField(this, "entries", []);
  }
  sortEntries() {
    this.entries.sort((left, right) => {
      for (let i = 0; i < this.fieldNames.length; i++) {
        const leftValue = left.values[i];
        const rightValue = right.values[i];
        const result = DatabaseValueModel.compare(leftValue, rightValue, this.options.collation);
        if (result !== 0) return result;
      }
      return left.pointer.compare(right.pointer);
    });
  }
  static deserialize(bytes) {
    const reader = new BufferReader(bytes);
    const collation = reader.readJson();
    const fieldCount = reader.readUint8();
    const fieldNames = [];
    for (let i = 0; i < fieldCount; i++) {
      const fieldName = reader.readString();
      fieldNames.push(fieldName);
    }
    const index = new _DatabaseDictionaryIndexModel(fieldNames, {
      collation
    });
    const entryCount = reader.readUint32();
    for (let i = 0; i < entryCount; i++) {
      const values = [];
      for (let j = 0; j < fieldCount; j++) {
        const fieldValue = DatabaseValueModel.read(reader);
        values.push(fieldValue);
      }
      const pointer = DatabaseItemPointerModel.read(reader);
      index.entries.push({ values, pointer });
    }
    return index;
  }
  serialize() {
    const writer = new BufferWriter();
    writer.writeJson(this.options.collation);
    writer.writeUint8(this.fieldNames.length);
    for (const fieldName of this.fieldNames) {
      writer.writeString(fieldName);
    }
    this.sortEntries();
    writer.writeUint32(this.entries.length);
    for (const entry of this.entries) {
      const { values, pointer } = entry;
      for (const value of values) {
        DatabaseValueModel.write(writer, value);
      }
      pointer.write(writer);
    }
    return writer.subarray();
  }
  addItem(item, pointer) {
    const values = this.fieldNames.map((fieldName) => {
      return item.getField(fieldName) ?? null;
    });
    this.entries.push({ values, pointer });
  }
};

// src/code-generation/components/cms/bundled/fetchWithRetries.ts
var maxRetries = 3;
var baseDelay = 250;
var retriableHTTPCodes = [
  408,
  // Request Timeout
  429,
  // Too Many Requests
  500,
  // Internal Server Error
  502,
  // Bad Gateway
  503,
  // Service Unavailable
  504
  // Gateway Timeout
];
var fetchWithRetries = async (input, init) => {
  let retryCount = 0;
  while (true) {
    try {
      const res = await fetch(input, init);
      if (!retriableHTTPCodes.includes(res.status) || ++retryCount > maxRetries) {
        return res;
      }
    } catch (error) {
      if (init?.signal?.aborted || ++retryCount > maxRetries) {
        throw error;
      }
    }
    await retryDelay(retryCount);
  }
};
async function retryDelay(retryCount) {
  const backoffExponent = retryCount - 1;
  const jitter = Math.random() + 1;
  const timeout = Math.floor(baseDelay * jitter * 2 ** backoffExponent);
  await new Promise((resolve) => {
    setTimeout(resolve, timeout);
  });
}

// src/code-generation/components/cms/bundled/rangeRequest.ts
async function rangeRequest(url, ranges) {
  const collapsedRanges = collapseRanges(ranges);
  const rangeStrings = [];
  let expectedLength = 0;
  for (const range of collapsedRanges) {
    rangeStrings.push(\`\${range.from}-\${range.to - 1}\`);
    expectedLength += range.to - range.from;
  }
  const rangeUrl = new URL(url);
  const rangeQuery = rangeStrings.join(",");
  rangeUrl.searchParams.set("range", rangeQuery);
  const response = await fetchWithRetries(rangeUrl);
  if (response.status !== 200) {
    throw new Error(\`Request failed: \${response.status} \${response.statusText}\`);
  }
  const buffer = await response.arrayBuffer();
  const bytes = new Uint8Array(buffer);
  if (bytes.length !== expectedLength) {
    throw new Error("Request failed: Unexpected response length");
  }
  const file = new PartialFile();
  let start = 0;
  for (const range of collapsedRanges) {
    const length = range.to - range.from;
    const end = start + length;
    const part = bytes.subarray(start, end);
    file.write(range.from, part);
    start = end;
  }
  return ranges.map((range) => {
    return file.read(range.from, range.to - range.from);
  });
}
var PartialFile = class {
  constructor() {
    __publicField(this, "chunks", []);
  }
  read(position, length) {
    for (const chunk of this.chunks) {
      if (position < chunk.start) {
        throw new Error("Missing data");
      }
      if (position > chunk.end) {
        continue;
      }
      if (position + length > chunk.end) {
        throw new Error("Missing data");
      }
      const from = position - chunk.start;
      const to = from + length;
      return chunk.data.slice(from, to);
    }
    throw new Error("Missing data");
  }
  write(position, data) {
    let start = position;
    let end = start + data.length;
    let fromIndex = 0;
    let toIndex = this.chunks.length;
    for (; fromIndex < toIndex; fromIndex++) {
      const chunk2 = this.chunks[fromIndex];
      assert(chunk2, "Missing chunk");
      if (start > chunk2.end) {
        continue;
      }
      if (start > chunk2.start) {
        const offset = start - chunk2.start;
        const prefix = chunk2.data.subarray(0, offset);
        data = join(prefix, data);
        start = chunk2.start;
      }
      break;
    }
    for (; toIndex > fromIndex; toIndex--) {
      const chunk2 = this.chunks[toIndex - 1];
      assert(chunk2, "Missing chunk");
      if (end < chunk2.start) {
        continue;
      }
      if (end < chunk2.end) {
        const offset = end - chunk2.start;
        const suffix = chunk2.data.subarray(offset);
        data = join(data, suffix);
        end = chunk2.end;
      }
      break;
    }
    const chunk = {
      start,
      end,
      data
    };
    const deleteCount = toIndex - fromIndex;
    this.chunks.splice(fromIndex, deleteCount, chunk);
  }
};
function join(left, right) {
  const length = left.length + right.length;
  const result = new Uint8Array(length);
  result.set(left, 0);
  result.set(right, left.length);
  return result;
}
function collapseRanges(ranges) {
  assert(ranges.length > 0, "Must have at least one range");
  const sorted = [...ranges].sort((a, b) => a.from - b.from);
  const collapsed = [];
  for (const range of sorted) {
    const index = collapsed.length - 1;
    const previous = collapsed[index];
    if (previous && range.from <= previous.to) {
      collapsed[index] = {
        from: previous.from,
        to: Math.max(previous.to, range.to)
      };
    } else {
      collapsed.push(range);
    }
  }
  return collapsed;
}

// src/code-generation/components/cms/bundled/DatabaseDictionaryIndex.ts
var DatabaseDictionaryIndex = class {
  constructor(options) {
    this.options = options;
    __publicField(this, "schema");
    __publicField(this, "fields");
    __publicField(this, "supportedLookupTypes", [
      "All" /* All */,
      "Equals" /* Equals */,
      "NotEquals" /* NotEquals */,
      "LessThan" /* LessThan */,
      "GreaterThan" /* GreaterThan */,
      "Contains" /* Contains */,
      "StartsWith" /* StartsWith */,
      "EndsWith" /* EndsWith */
    ]);
    __publicField(this, "modelPromise");
    __publicField(this, "model");
    __publicField(this, "collation");
    const schema = {};
    const fields = [];
    for (const fieldName of this.options.fieldNames) {
      const definition = this.options.collectionSchema[fieldName];
      assert(definition, "Missing definition for field", fieldName);
      schema[fieldName] = definition;
      fields.push({ type: "Identifier", name: fieldName });
    }
    this.schema = schema;
    this.fields = fields;
    this.collation = this.options.collation;
  }
  async loadModel() {
    const [bytes] = await rangeRequest(this.options.url, [this.options.range]);
    assert(bytes, "Failed to load model");
    return DatabaseDictionaryIndexModel.deserialize(bytes);
  }
  async getModel() {
    this.modelPromise ??= this.loadModel();
    this.model ??= await this.modelPromise;
    return this.model;
  }
  async lookupItems(queries) {
    assert(queries.length === this.fields.length, "Invalid query length");
    const model = await this.getModel();
    const chunks = queries.reduce(
      (memo, query, position) => memo.flatMap((entries) => {
        switch (query.type) {
          case "All" /* All */:
            return [entries];
          case "Equals" /* Equals */:
            return this.queryEquals(entries, query, position);
          case "NotEquals" /* NotEquals */:
            return this.queryNotEquals(entries, query, position);
          case "LessThan" /* LessThan */:
            return this.queryLessThan(entries, query, position);
          case "GreaterThan" /* GreaterThan */:
            return this.queryGreaterThan(entries, query, position);
          case "Contains" /* Contains */:
            return this.queryContains(entries, query, position);
          case "StartsWith" /* StartsWith */:
            return this.queryStartsWith(entries, query, position);
          case "EndsWith" /* EndsWith */:
            return this.queryEndsWith(entries, query, position);
          default:
            assertNever(query);
        }
      }),
      [model.entries]
    );
    const result = [];
    for (const entries of chunks) {
      for (const entry of entries) {
        const data = {};
        for (let i = 0; i < this.options.fieldNames.length; i++) {
          const fieldName = this.options.fieldNames[i];
          const fieldValue = entry.values[i];
          data[fieldName] = fieldValue;
        }
        result.push({ pointer: entry.pointer.toString(), data });
      }
    }
    return result;
  }
  queryEquals(entries, query, position) {
    const leftMost = this.getLeftMost(entries, position, query.value);
    const rightMost = this.getRightMost(entries, position, query.value);
    const slice = entries.slice(leftMost, rightMost + 1);
    return slice.length > 0 ? [slice] : [];
  }
  queryNotEquals(entries, query, position) {
    const leftMost = this.getLeftMost(entries, position, query.value);
    const rightMost = this.getRightMost(entries, position, query.value);
    const result = [];
    const before = entries.slice(0, leftMost);
    if (before.length > 0) result.push(before);
    const after = entries.slice(rightMost + 1);
    if (after.length > 0) result.push(after);
    return result;
  }
  queryLessThan(entries, query, position) {
    const nullBound = this.getRightMost(entries, position, null);
    entries = entries.slice(nullBound + 1);
    if (query.inclusive) {
      const rightMost = this.getRightMost(entries, position, query.value);
      const slice2 = entries.slice(0, rightMost + 1);
      return slice2.length > 0 ? [slice2] : [];
    }
    const leftMost = this.getLeftMost(entries, position, query.value);
    const slice = entries.slice(0, leftMost);
    return slice.length > 0 ? [slice] : [];
  }
  queryGreaterThan(entries, query, position) {
    const nullBound = this.getRightMost(entries, position, null);
    entries = entries.slice(nullBound + 1);
    if (query.inclusive) {
      const leftMost = this.getLeftMost(entries, position, query.value);
      const slice2 = entries.slice(leftMost);
      return slice2.length > 0 ? [slice2] : [];
    }
    const rightMost = this.getRightMost(entries, position, query.value);
    const slice = entries.slice(rightMost + 1);
    return slice.length > 0 ? [slice] : [];
  }
  queryContains(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.includes(target);
    });
  }
  queryStartsWith(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.startsWith(target);
    });
  }
  queryEndsWith(entries, query, position) {
    return this.findItems(entries, position, (current) => {
      if (current?.type !== ControlType2.String) return false;
      if (query.value?.type !== ControlType2.String) return false;
      let source = current.value;
      let target = query.value.value;
      if (this.collation.type === 0 /* CaseInsensitive */) {
        source = source.toLowerCase();
        target = target.toLowerCase();
      }
      return source.endsWith(target);
    });
  }
  /**
   * Returns the index of the left most entry that is equal to the target.
   *
   * \`\`\`text
   *   Left most
   *       \u2193
   * \u250C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2510
   * \u2502 1 \u2502 2 \u2502 2 \u2502 2 \u2502 2 \u2502 3 \u2502
   * \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518
   * \`\`\`
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param target The target value to search for.
   * @returns The index of the left most entry that is equal to the target.
   */
  getLeftMost(entries, position, target) {
    let left = 0;
    let right = entries.length;
    while (left < right) {
      const middle = left + right >> 1;
      const entry = entries[middle];
      const value = entry.values[position];
      if (DatabaseValueModel.compare(value, target, this.collation) < 0) {
        left = middle + 1;
      } else {
        right = middle;
      }
    }
    return left;
  }
  /**
   * Returns the index of the right most entry that is equal to the target.
   *
   * \`\`\`text
   *              Right most
   *                   \u2193
   * \u250C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2510
   * \u2502 1 \u2502 2 \u2502 2 \u2502 2 \u2502 2 \u2502 3 \u2502
   * \u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518
   * \`\`\`
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param target The target value to search for.
   * @returns The index of the right most entry that is equal to the target.
   */
  getRightMost(entries, position, target) {
    let left = 0;
    let right = entries.length;
    while (left < right) {
      const middle = left + right >> 1;
      const entry = entries[middle];
      const value = entry.values[position];
      if (DatabaseValueModel.compare(value, target, this.collation) > 0) {
        right = middle;
      } else {
        left = middle + 1;
      }
    }
    return right - 1;
  }
  /**
   * Finds all items that are matching the predicate and groups adjacent items together.
   *
   * @param entries The entries array to search in.
   * @param position The position of the value in the entry.
   * @param predicate The predicate to match the values against.
   * @returns An array of chunks that match the predicate.
   */
  findItems(entries, position, predicate) {
    const result = [];
    let start = 0;
    for (let i = 0; i < entries.length; i++) {
      const entry = entries[i];
      const value = entry.values[position];
      const isMatching = predicate(value);
      if (isMatching) continue;
      if (start < i) {
        const slice = entries.slice(start, i);
        result.push(slice);
      }
      start = i + 1;
    }
    if (start < entries.length) {
      const slice = entries.slice(start);
      result.push(slice);
    }
    return result;
  }
};

// src/code-generation/components/cms/bundled/models/DatabaseItemModel.ts
var DatabaseItemModel = class _DatabaseItemModel {
  constructor() {
    __publicField(this, "fields", /* @__PURE__ */ new Map());
  }
  static read(reader) {
    const item = new _DatabaseItemModel();
    const fieldCount = reader.readUint16();
    for (let i = 0; i < fieldCount; i++) {
      const key = reader.readString();
      const value = DatabaseValueModel.read(reader);
      item.setField(key, value);
    }
    return item;
  }
  write(writer) {
    writer.writeUint16(this.fields.size);
    for (const [key, value] of this.fields) {
      writer.writeString(key);
      DatabaseValueModel.write(writer, value);
    }
  }
  getData() {
    const data = {};
    for (const [key, value] of this.fields) {
      data[key] = value;
    }
    return data;
  }
  setField(key, value) {
    this.fields.set(key, value);
  }
  getField(key) {
    return this.fields.get(key);
  }
};

// src/code-generation/components/cms/bundled/DatabaseCollection.ts?bundle
var DatabaseChunk = class {
  constructor(id, url) {
    this.id = id;
    this.url = url;
    __publicField(this, "itemsPromise");
    __publicField(this, "itemLoader", new import_dataloader.default(async (pointers) => {
      const ranges = pointers.map((pointer) => {
        const pointerModel = DatabaseItemPointerModel.fromString(pointer);
        return { from: pointerModel.offset, to: pointerModel.offset + pointerModel.length };
      });
      const rangeBytes = await rangeRequest(this.url, ranges);
      return rangeBytes.map((bytes, index) => {
        const reader = new BufferReader(bytes);
        const itemModel = DatabaseItemModel.read(reader);
        const pointer = pointers[index];
        assert(pointer, "Missing pointer");
        return {
          pointer,
          data: itemModel.getData()
        };
      });
    }));
  }
  scanItems() {
    this.itemsPromise ??= fetchWithRetries(this.url).then(async (response) => {
      if (!response.ok) {
        throw new Error(\`Request failed: \${response.status} \${response.statusText}\`);
      }
      const buffer = await response.arrayBuffer();
      const bytes = new Uint8Array(buffer);
      const reader = new BufferReader(bytes);
      const items = [];
      const itemCount = reader.readUint32();
      for (let i = 0; i < itemCount; i++) {
        const offset = reader.getOffset();
        const itemModel = DatabaseItemModel.read(reader);
        const length = reader.getOffset() - offset;
        const pointerModel = new DatabaseItemPointerModel(this.id, offset, length);
        const pointer = pointerModel.toString();
        const item = {
          pointer,
          data: itemModel.getData()
        };
        this.itemLoader.prime(pointer, item);
        items.push(item);
      }
      return items;
    });
    return this.itemsPromise;
  }
  resolveItem(pointer) {
    return this.itemLoader.load(pointer);
  }
};
var DatabaseCollection = class {
  constructor(options) {
    this.options = options;
    __publicField(this, "schema");
    __publicField(this, "indexes");
    __publicField(this, "resolveRichText");
    __publicField(this, "resolveVectorSetItem");
    __publicField(this, "chunks");
    this.chunks = this.options.chunks.map((url, id) => {
      return new DatabaseChunk(id, url);
    });
    this.schema = options.schema;
    this.indexes = options.indexes;
    this.resolveRichText = options.resolveRichText;
    this.resolveVectorSetItem = options.resolveVectorSetItem;
  }
  async scanItems() {
    const chunkedItems = await Promise.all(
      this.chunks.map(async (chunk) => {
        return chunk.scanItems();
      })
    );
    return chunkedItems.flat();
  }
  async resolveItems(pointers) {
    return Promise.all(
      pointers.map((pointer) => {
        const pointerModel = DatabaseItemPointerModel.fromString(pointer);
        const chunk = this.chunks[pointerModel.chunkId];
        assert(chunk, "Missing chunk");
        return chunk.resolveItem(pointer);
      })
    );
  }
  compareItems(left, right) {
    const leftModel = DatabaseItemPointerModel.fromString(left.pointer);
    const rightModel = DatabaseItemPointerModel.fromString(right.pointer);
    return leftModel.compare(rightModel);
  }
  compareValues(left, right, collation) {
    return DatabaseValueModel.compare(left, right, collation);
  }
};
export {
  DatabaseCollection,
  DatabaseDictionaryIndex
};
`;var HC=`var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/code-generation/components/cms/bundled/DraftDatabaseCollection.ts?bundle
import { ControlType } from "framer";

// src/utils/typeChecks.ts
function isString(value) {
  return typeof value === "string";
}
function isNumber(value) {
  return Number.isFinite(value);
}

// src/code-generation/components/cms/bundled/assert.ts
function assert(condition, ...msg) {
  if (condition) return;
  throw Error("Assertion Error" + (msg.length > 0 ? ": " + msg.join(" ") : ""));
}

// src/code-generation/components/cms/bundled/DraftDatabaseCollection.ts?bundle
var DraftDatabaseCollection = class {
  constructor(draftCollection, originalCollection, previousItemId, nextItemId) {
    this.draftCollection = draftCollection;
    this.originalCollection = originalCollection;
    this.previousItemId = previousItemId;
    this.nextItemId = nextItemId;
    __publicField(this, "schema");
    // We cannot use the original indexes because the draft items
    // are not in the original collection.
    // Having no indexes means that we perform a full collection scan for every query.
    __publicField(this, "indexes", []);
    __publicField(this, "itemsPromise");
    this.schema = originalCollection.schema;
    this.itemsPromise = this.getItems();
  }
  async getItems() {
    const [[...draftItems], [...originalItems]] = await Promise.all([
      this.draftCollection.scanItems(),
      this.originalCollection.scanItems()
    ]);
    const lastDraftItem = draftItems.pop();
    const firstOriginalItem = originalItems.shift();
    if (lastDraftItem) {
      draftItems.push({
        ...lastDraftItem,
        data: {
          ...lastDraftItem.data,
          [this.nextItemId]: firstOriginalItem?.data.id ?? null
        }
      });
    }
    if (firstOriginalItem) {
      originalItems.unshift({
        ...firstOriginalItem,
        data: {
          ...firstOriginalItem.data,
          [this.previousItemId]: lastDraftItem?.data.id ?? null
        }
      });
    }
    return draftItems.map(draftItem).concat(...originalItems);
  }
  /**
   * Get all items, updating pointers for draft items.
   */
  async scanItems() {
    return this.itemsPromise;
  }
  /**
   * Depending on the pointer, resolve draft rich text from the draft
   * collection, and original rich text from the original collection.
   */
  async resolveRichText(pointer) {
    if (isDraftRichTextPointer(pointer)) {
      const originalPointer = undraftRichTextPointer(pointer);
      return this.draftCollection.resolveRichText(originalPointer);
    }
    return this.originalCollection.resolveRichText(pointer);
  }
  async resolveVectorSetItem(pointer) {
    if (isDraftVectorSetItemPointer(pointer)) {
      const originalPointer = undraftVectorSetItemPointer(pointer);
      return this.draftCollection.resolveVectorSetItem?.(originalPointer);
    }
    return this.originalCollection.resolveVectorSetItem?.(pointer);
  }
  async resolveItems(pointers) {
    const items = await this.itemsPromise;
    return pointers.map((pointer) => {
      const item = items.find((current) => current.pointer === pointer);
      assert(item, "Item must exist");
      return item;
    });
  }
  /**
   * Compare two items, the draft items should come first.
   */
  compareItems(left, right) {
    const leftIsDraft = isDraftPointer(left.pointer);
    const rightIsDraft = isDraftPointer(right.pointer);
    if (leftIsDraft && rightIsDraft) {
      const originalLeft = undraftItem(left);
      const originalRight = undraftItem(right);
      return this.draftCollection.compareItems(originalLeft, originalRight);
    }
    if (leftIsDraft) return -1;
    if (rightIsDraft) return 1;
    return this.originalCollection.compareItems(left, right);
  }
};
var draftPrefix = "draft:";
function isDraftPointer(pointer) {
  return pointer.startsWith(draftPrefix);
}
function draftPointer(pointer) {
  assert(!isDraftPointer(pointer), "Should be a non-draft pointer");
  return draftPrefix + pointer;
}
function undraftPointer(pointer) {
  assert(isDraftPointer(pointer), "Should be a draft pointer");
  return pointer.slice(draftPrefix.length);
}
function isDraftRichTextPointer(pointer) {
  if (isNumber(pointer)) {
    return pointer < 0;
  }
  if (isString(pointer)) {
    return pointer.startsWith(draftPrefix);
  }
  throw new Error("Invalid rich text pointer");
}
function draftRichTextPointer(pointer) {
  assert(!isDraftRichTextPointer(pointer), "Should be a non-draft rich text pointer");
  if (isNumber(pointer)) {
    return -pointer - 1;
  }
  if (isString(pointer)) {
    return draftPrefix + pointer;
  }
  throw new Error("Invalid rich text pointer");
}
function undraftRichTextPointer(pointer) {
  assert(isDraftRichTextPointer(pointer), "Should be a draft rich text pointer");
  if (isNumber(pointer)) {
    return -pointer - 1;
  }
  if (isString(pointer)) {
    return pointer.slice(draftPrefix.length);
  }
  throw new Error("Invalid rich text pointer");
}
function isDraftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  return pointer < 0;
}
function draftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  assert(!isDraftVectorSetItemPointer(pointer), "Should be a non-draft vector set item pointer");
  return -pointer - 1;
}
function undraftVectorSetItemPointer(pointer) {
  assert(isNumber(pointer), "Invalid vector set item pointer");
  assert(isDraftVectorSetItemPointer(pointer), "Should be a draft vector set item pointer");
  return -pointer - 1;
}
function draftItem(item) {
  const data = {};
  for (const [key, value] of Object.entries(item.data)) {
    if (value?.type === ControlType.RichText) {
      data[key] = {
        type: ControlType.RichText,
        value: draftRichTextPointer(value.value)
      };
    } else if (value?.type === ControlType.VectorSetItem) {
      data[key] = {
        type: ControlType.VectorSetItem,
        value: draftVectorSetItemPointer(value.value)
      };
    } else {
      data[key] = value;
    }
  }
  return {
    pointer: draftPointer(item.pointer),
    data
  };
}
function undraftItem(item) {
  const data = {};
  for (const [key, value] of Object.entries(item.data)) {
    if (value?.type === ControlType.RichText) {
      data[key] = {
        type: ControlType.RichText,
        value: undraftRichTextPointer(value.value)
      };
    } else if (value?.type === ControlType.VectorSetItem) {
      data[key] = {
        type: ControlType.VectorSetItem,
        value: undraftVectorSetItemPointer(value.value)
      };
    } else {
      data[key] = value;
    }
  }
  return {
    pointer: undraftPointer(item.pointer),
    data
  };
}
export {
  DraftDatabaseCollection
};
`;var Qn=class t{constructor(e,r,o){this.chunkId=e;this.offset=r;this.length=o}static fromString(e){let[r,o,n]=e.split("/").map(Number);return ze(H(r),"Invalid chunkId"),ze(H(o),"Invalid offset"),ze(H(n),"Invalid length"),new t(r,o,n)}toString(){return`${this.chunkId}/${this.offset}/${this.length}`}static read(e){let r=e.readUint16(),o=e.readUint32(),n=e.readUint32();return new t(r,o,n)}write(e){e.writeUint16(this.chunkId),e.writeUint32(this.offset),e.writeUint32(this.length)}compare(e){return this.chunkId<e.chunkId?-1:this.chunkId>e.chunkId?1:this.offset<e.offset?-1:this.offset>e.offset?1:(ze(this.length===e.length),0)}};function vd(t){if(rt(t))return 0;switch(t.type){case"array":return 1;case"boolean":return 2;case"color":return 3;case"date":return 4;case"enum":return 5;case"file":return 6;case"responsiveimage":return 10;case"link":return 7;case"number":return 8;case"object":return 9;case"richtext":return 11;case"string":return 12;case"vectorsetitem":return 13;default:Bi(t)}}var jt;(o=>{function t(n){let i=n.readUint8();switch(i){case 0:return null;case 1:return _w(n);case 2:return qw(n);case 3:return Yw(n);case 4:return ex(n);case 5:return ox(n);case 6:return ax(n);case 7:return cx(n);case 8:return px(n);case 9:return hx(n);case 10:return Sx(n);case 11:return vx(n);case 12:return Nx(n);case 13:return Rx(n);default:Bi(i)}}o.read=t;function e(n,i){let a=vd(i);if(n.writeUint8(a),!rt(i))switch(i.type){case"array":return jw(n,i);case"boolean":return Xw(n,i);case"color":return Qw(n,i);case"date":return tx(n,i);case"enum":return nx(n,i);case"file":return sx(n,i);case"link":return dx(n,i);case"number":return mx(n,i);case"object":return gx(n,i);case"responsiveimage":return Cx(n,i);case"richtext":return Ix(n,i);case"vectorsetitem":return kx(n,i);case"string":return wx(n,i);default:Bi(i)}}o.write=e;function r(n,i,a){let s=vd(n),l=vd(i);if(s<l)return-1;if(s>l)return 1;if(rt(n)||rt(i))return 0;switch(n.type){case"array":return ze(i.type==="array"),Jw(n,i,a);case"boolean":return ze(i.type==="boolean"),Kw(n,i);case"color":return ze(i.type==="color"),Zw(n,i);case"date":return ze(i.type==="date"),rx(n,i);case"enum":return ze(i.type==="enum"),ix(n,i);case"file":return ze(i.type==="file"),lx(n,i);case"link":return ze(i.type==="link"),ux(n,i);case"number":return ze(i.type==="number"),fx(n,i);case"object":return ze(i.type==="object"),yx(n,i,a);case"responsiveimage":return ze(i.type==="responsiveimage"),bx(n,i);case"richtext":return ze(i.type==="richtext"),Tx(n,i);case"vectorsetitem":return ze(i.type==="vectorsetitem"),Mx(n,i);case"string":return ze(i.type==="string"),xx(n,i,a);default:Bi(n)}}o.compare=r})(jt||={});function _w(t){let e=t.readUint16(),r=[];for(let o=0;o<e;o++){let n=jt.read(t);r.push(n)}return{type:"array",value:r}}function jw(t,e){t.writeUint16(e.value.length);for(let r of e.value)jt.write(t,r)}function Jw(t,e,r){let o=t.value.length,n=e.value.length;if(o<n)return-1;if(o>n)return 1;for(let i=0;i<o;i++){let a=t.value[i],s=e.value[i],l=jt.compare(a,s,r);if(l!==0)return l}return 0}function qw(t){return{type:"boolean",value:t.readUint8()!==0}}function Xw(t,e){t.writeUint8(e.value?1:0)}function Kw(t,e){return t.value<e.value?-1:t.value>e.value?1:0}function Yw(t){return{type:"color",value:t.readString()}}function Qw(t,e){t.writeString(e.value)}function Zw(t,e){return t.value<e.value?-1:t.value>e.value?1:0}function ex(t){let e=t.readInt64(),r=new Date(e);return{type:"date",value:r.toISOString()}}function tx(t,e){let o=new Date(e.value).getTime();t.writeInt64(o)}function rx(t,e){let r=new Date(t.value),o=new Date(e.value);return r<o?-1:r>o?1:0}function ox(t){return{type:"enum",value:t.readString()}}function nx(t,e){t.writeString(e.value)}function ix(t,e){return t.value<e.value?-1:t.value>e.value?1:0}function ax(t){return{type:"file",value:t.readString()}}function sx(t,e){t.writeString(e.value)}function lx(t,e){return t.value<e.value?-1:t.value>e.value?1:0}function cx(t){return{type:"link",value:t.readJson()}}function dx(t,e){t.writeJson(e.value)}function ux(t,e){let r=JSON.stringify(t.value),o=JSON.stringify(e.value);return r<o?-1:r>o?1:0}function px(t){return{type:"number",value:t.readFloat64()}}function mx(t,e){t.writeFloat64(e.value)}function fx(t,e){return t.value<e.value?-1:t.value>e.value?1:0}function hx(t){let e=t.readUint16(),r={};for(let o=0;o<e;o++){let n=t.readString();r[n]=jt.read(t)}return{type:"object",value:r}}function gx(t,e){let r=Object.entries(e.value);t.writeUint16(r.length);for(let[o,n]of r)t.writeString(o),jt.write(t,n)}function yx(t,e,r){let o=Object.keys(t.value).sort(),n=Object.keys(e.value).sort();if(o.length<n.length)return-1;if(o.length>n.length)return 1;for(let i=0;i<o.length;i++){let a=o[i],s=n[i];if(a<s)return-1;if(a>s)return 1;let l=t.value[a]??null,c=e.value[s]??null,d=jt.compare(l,c,r);if(d!==0)return d}return 0}function Sx(t){return{type:"responsiveimage",value:t.readJson()}}function Cx(t,e){t.writeJson(e.value)}function bx(t,e){let r=JSON.stringify(t.value),o=JSON.stringify(e.value);return r<o?-1:r>o?1:0}function vx(t){let e=t.readInt8();if(e===0)return{type:"richtext",value:t.readUint32()};if(e===1)return{type:"richtext",value:t.readString()};throw new Error("Invalid rich text pointer")}function Ix(t,e){if(H(e.value)){t.writeInt8(0),t.writeUint32(e.value);return}if(A(e.value)){t.writeInt8(1),t.writeString(e.value);return}throw new Error("Invalid rich text pointer")}function Tx(t,e){let r=t.value,o=e.value;if(H(r)&&H(o)||A(r)&&A(o))return r<o?-1:r>o?1:0;throw new Error("Invalid rich text pointer")}function Nx(t){return{type:"string",value:t.readString()}}function wx(t,e){t.writeString(e.value)}function xx(t,e,r){let o=t.value,n=e.value;return r.type===0&&(o=t.value.toLowerCase(),n=e.value.toLowerCase()),o<n?-1:o>n?1:0}function Rx(t){return{type:"vectorsetitem",value:t.readUint32()}}function kx(t,e){t.writeUint32(e.value)}function Mx(t,e){let r=t.value,o=e.value;return r<o?-1:r>o?1:0}var Er=class t{constructor(e,r){this.fieldNames=e;this.options=r;S(this,"entries",[])}sortEntries(){this.entries.sort((e,r)=>{for(let o=0;o<this.fieldNames.length;o++){let n=e.values[o],i=r.values[o],a=jt.compare(n,i,this.options.collation);if(a!==0)return a}return e.pointer.compare(r.pointer)})}static deserialize(e){let r=new Ys(e),o=r.readJson(),n=r.readUint8(),i=[];for(let l=0;l<n;l++){let c=r.readString();i.push(c)}let a=new t(i,{collation:o}),s=r.readUint32();for(let l=0;l<s;l++){let c=[];for(let p=0;p<n;p++){let u=jt.read(r);c.push(u)}let d=Qn.read(r);a.entries.push({values:c,pointer:d})}return a}serialize(){let e=new Yo;e.writeJson(this.options.collation),e.writeUint8(this.fieldNames.length);for(let r of this.fieldNames)e.writeString(r);this.sortEntries(),e.writeUint32(this.entries.length);for(let r of this.entries){let{values:o,pointer:n}=r;for(let i of o)jt.write(e,i);n.write(e)}return e.subarray()}addItem(e,r){let o=this.fieldNames.map(n=>e.getField(n)??null);this.entries.push({values:o,pointer:r})}};var Qs=class t{constructor(){S(this,"fields",new Map)}static read(e){let r=new t,o=e.readUint16();for(let n=0;n<o;n++){let i=e.readString(),a=jt.read(e);r.setField(i,a)}return r}write(e){e.writeUint16(this.fields.size);for(let[r,o]of this.fields)e.writeString(r),jt.write(e,o)}getData(){let e={};for(let[r,o]of this.fields)e[r]=o;return e}setField(e,r){this.fields.set(e,r)}getField(e){return this.fields.get(e)}};function Id(t){return m`${t}.replace("/modules/", "/cms/")`}var Dx=me("serializeDatabase"),Td=4*1024*1024,Px=5e3;async function GC(t,e,r,o,n,i,a,s,l,c,d,p){let u=new Xs(t,e,i,o,l,c,a,s),f=t.getPropertyControls(e.tree),h=Object.entries(f),y=Nf(e.tree,{includeDrafts:!0}),C={[Qr]:{type:Ai("string",i),isNullable:!1},[Ni]:{type:Ai("string",i),isNullable:!0},[wi]:{type:Ai("string",i),isNullable:!0}};function b(ee){return Ai(ee,i)}for(let[ee,ue]of h){let ie=aS(ue,b);ie&&(C[ee]=ie)}let N=c.dedupe("schema",new E(C,0)),T=oS(t.variables),w=t.variables.find(qp),V=o.create(WC),L,F,_=p?!0:void 0,z=t.getSortedChildren().filter(ee=>ee.isDraft===_);if(p){let ee=Ee("collection",t.id);if(L=m`${i.addImport(`../${ee}`,{exportSpecifier:"default",importBinding:"originalCollection"})}.collectionByLocaleId`,z.length===0){let ie={displayName:t.name??"Unknown",collectionByLocaleId:L};return m`${ie}`}let ue=o.create(HC);F=i.addImport(ue.submoduleImport,{exportSpecifier:"DraftDatabaseCollection"})}let Z=i.addImport(V.submoduleImport,{exportSpecifier:"DatabaseCollection"}),M={};for(let ee of y){let K=function(){let te=new Yo;return te.writeUint32(0),te},qe=function(te){let le=ke.subarray(0,te);Yn(le).setUint32(0,ae),B.push(le)};var Ie=K,de=qe;let ue=[new Er([Qr],{collation:{type:1}}),new Er([Ni],{collation:{type:1}}),new Er([wi],{collation:{type:1}})];w&&ue.push(new Er([Qr,w.id],{collation:{type:1}}),new Er([w.id,Qr],{collation:{type:1}}));for(let[te]of h)ue.push(new Er([te],{collation:{type:0}}));let ie=new Ks,Te=z.filter(te=>{let le=Uy(e.tree,te);return le?le.includes(ee.id):!0}),st=[];for(let te=0;te<Te.length;te++){let le=Te[te];g(le,"Node must exist");let Ue=new Qs;Ue.setField(Qr,{type:"string",value:le.id});let fr=Te[te-1];fr&&Ue.setField(Ni,{type:"string",value:fr.id});let Ir=Te[te+1];Ir&&Ue.setField(wi,{type:"string",value:Ir.id});let Hr={resolveColor(Me){return d.addColor(Me)},resolveFile(Me){return a.resolve(Me)?.src},resolveImage(Me,ut){return a.resolveResponsiveImage(Me,void 0,ut)},resolveLink(Me){let ut=s.create(Me);if(!x(ut)&&!wt(ut))return ut},resolveRichTextPointer(Me){return u.add(Me)},resolveVectorSetItemPointer(Me){return ie.add(Me)}};for(let[Me,ut]of h){let Tr=nS(Me,ut,T,f,le);if(x(Tr))continue;let Xt=iS({control:ut,controlProp:Tr,resolvers:Hr,locale:ee});x(Xt)||Ue.setField(Me,Xt)}st.push(Ue)}let B=[],ae=0,ke=K();for(let te of st){let le=ke.getOffset();te.write(ke),ke.getOffset()>Td&&(qe(le),ke=K(),le=ke.getOffset(),ae=0,te.write(ke)),ae++;let Ue=ke.getOffset()-le,fr=new Qn(B.length,le,Ue);for(let Ir of ue)Ir.addItem(te,fr)}ke.getOffset()>0&&qe();let Dt=i.addImport(V.submoduleImport,{exportSpecifier:"DatabaseDictionaryIndex"}),xe=B.map((te,le)=>Id(n.create(`chunk-${ee.id}-${le}`,yd,te)));B.reduce((te,le)=>te+le.length,0)<Px&&(ue.length=0);let Tt=[],Wr=1/0;for(let te of ue){let le=te.serialize();if(le.length>=Td){Dx.warn("Skipping index:",le.length);continue}Wr+le.length>Td&&(Tt.push([]),Wr=0);let Ue=Tt.at(-1);g(Ue,"Chunk must exist"),Ue.push({model:te,bytes:le}),Wr+=le.length}let or=[];for(let te=0;te<Tt.length;te++){let le=Tt[te];g(le,"Chunk must exist");let Ue=new Yo,fr=[];for(let{bytes:ut}of le){let Tr=Ue.getOffset();Ue.writeBytes(ut);let Xt=Ue.getOffset();fr.push({from:Tr,to:Xt})}let Ir=Ue.subarray(),Hr=Id(n.create(`indexes-${ee.id}-${te}`,yd,Ir)),Me=le.map(({model:ut},Tr)=>{if(ut instanceof Er){let Xt=fr[Tr];g(Xt,"Can't find range for index");let hi={url:Hr,range:Xt,fieldNames:c.dedupe("fieldNames",ut.fieldNames),collation:c.dedupe("collation",ut.options.collation),collectionSchema:N};return m`new ${Dt}(${hi})`}throw new Error("Unsupported index type")});or.push(...Me)}let Pt=ie.serialize(r,c),dt={schema:N,chunks:xe,indexes:or,resolveRichText:u.resolveRichTextBinding,resolveVectorSetItem:Pt};if(L&&F){let te=m`new ${Z}(${dt})`,le=m`${L}[${ee.id}]`;M[ee.id]=m`new ${F}(${te}, ${le}, ${Ni}, ${wi})`}else M[ee.id]=m`new ${Z}(${dt})`}u.serialize();let he={displayName:t.name??"Unknown",collectionByLocaleId:M};return m`${he}`}var jC=kt(async(t,e,r)=>Promise.all([_C(t.id,e,!1),_C(t.id,e,!0)]));async function _C(t,e,r){let{modulesStore:o,treeStore:n,assetMap:i}=e,{tree:a}=n,s=r?"draftCollection":"collection",l=new ko(i),c=new qs(t),d=new Ry(s,o,t),p=a.getNodeWithTrait(t,ot);g(p,"Must have a source node to serialize");let u=p.moduleSourceRevision,f=Iy(p);await $s(f,o);let{module:h}=by(o,p);_t("collection_update",{moduleId:h?.id,recordCount:p.getItemCount(),source:"unknown"});let y=vy(p)?.id,C=new Kr,b=new No(s,o,C),N=new fs(C),T=new Ln(p,b,C,void 0,n,o),w=new On,V=await GC(p,n,o,d,c,b,l,T,C,N,w,r),L=xo("",{framerRecordIdKey:Qr,framerSlug:y,framerEnumToDisplayNameUtils:"2",framerCollectionUtils:"1",framerCollectionId:p.id,framerColorSyntax:w.hasColorsOfType("wideGamut"),framerAutoSizeImages:!0,framerData:""}),F=C.create("data"),_=Ox(p,F,e,{imports:b},s),z=Ax(b,N,F,Qr,y),Z=m.joinLines(...b.statements,...N.list(),L,m`const ${F} = ${V}`,m`export default ${F}`,_,...Fx(p.variables,a.root.locales),z);return{type:s,revision:u,source:Z,artifacts:{assets:new Set(l.keys),binaryAssets:c.assets,submodules:d.serialize(),metrics:{nodes:p.getItemCount()}}}}function Fx(t,e){let r=[],o=new E;for(let n of t){if(n.type!=="enum")continue;let i=new v(ky(n.id));r.push(m`export const ${i} = ${BC(n,e,i)};`),o[n.id]=i}return r.push(m`export const ${new v(My)} = ${o};`),r}function Ax(t,e,r,o,n){return m.joinLines(m`export const utils = {`,m`async getSlugByRecordId(id, locale) {`,n?Lx(t,e,r,o,n):void 0,m`},`,m`async getRecordIdBySlug(slug, locale) {`,n?Ex(t,e,r,o,n):void 0,m`},`,m`}`)}function JC(t,e){let r=t.addImport("framer",{exportSpecifier:"QueryEngine"}),o=e.dedupe("queryEngine",m`new ${r}()`),n=t.addImport("framer",{exportSpecifier:"QueryCache"});return e.dedupe("queryCache",m`new ${n}(${o})`)}function Lx(t,e,r,o,n){let i=JC(t,e),a={from:{type:"Collection",data:r},select:[{type:"Identifier",name:n}],where:{type:"BinaryOperation",operator:"==",left:{type:"Identifier",name:o},right:{type:"LiteralValue",value:m`id`}},limit:{type:"LiteralValue",value:1}};return m.joinLines(m`const [item] = await ${i}.get(${a}, locale).readAsync()`,m`return item?.[${n}]`)}function Ex(t,e,r,o,n){let i=JC(t,e),a={from:{type:"Collection",data:r},select:[{type:"Identifier",name:o}],where:{type:"BinaryOperation",operator:"==",left:{type:"Identifier",name:n},right:{type:"LiteralValue",value:m`slug`}},limit:{type:"LiteralValue",value:1}};return m.joinLines(m`const [item] = await ${i}.get(${a}, locale).readAsync()`,m`return item?.[${o}]`)}function Ox(t,e,r,o,n){let i=rS(t,r,o,n);if(x(i))return;let a=o.imports.addImport("framer",{exportSpecifier:"addPropertyControls"});return v.fn(a,e,i)}var Vo=class{constructor(e){this.declarationCollector=e;S(this,"fontObjects",new Set);S(this,"fontReferences",new Map);S(this,"referencedComponentIdentifiers",new Set);S(this,"fontObjectsBySelector",new Map)}createDedupedVariationAxesBinding(e){return e.variationAxes?this.declarationCollector.dedupe("variationAxes",[...e.variationAxes]):void 0}addFontObjectBySelector(e,r){let o=this.fontObjectsBySelector.get(e);if(o){if(!r)return;let i=o[0];if(!i)return;if(Ea(i.source,r)&&!i.openType)for(let a of o)a.openType=!0;return}let n=Bo.getFontBySelector(e);if(!(!n||!n.file))if(n.subsets){let i=[];this.fontObjectsBySelector.set(e,i);for(let a of n.subsets){let s={url:a.file,family:n.family.name,style:n.style,weight:n.weight!==void 0?String(n.weight):void 0,source:n.family.source,unicodeRange:a.unicodeRange,variationAxes:this.createDedupedVariationAxesBinding(n),openType:Ea(n.family.source,r)};this.fontObjects.add(s),i.push(s)}}else{let i={url:n.file,family:n.family.name,style:n.style,weight:n.weight!==void 0?String(n.weight):void 0,source:n.family.source,variationAxes:this.createDedupedVariationAxesBinding(n),openType:Ea(n.family.source,r)};this.fontObjects.add(i),this.fontObjectsBySelector.set(e,[i])}}addFontReference({componentIdentifier:e,fontReference:r}){this.fontReferences.set(Y(r),r),this.referencedComponentIdentifiers.add(e)}};function Zn(t,e,r,{pixelSize:o,repeaterInfo:n,context:i}){return cs(e,r,{resolveAsset:(a,s,l,c)=>{let d,p=yn(s)?s.__defaultAssetReference:void 0;return a!==p&&(d=(c?i.assets.resolveResponsiveImage(a,o):i.assets.resolve(a))?.src),!Ba(l)||!i.localizedValues?d:i.localizedValues.add(d,l.valueLocalized,u=>{let f=l.valueLocalized?.[u]?.value;return xa(f)?void 0:f===p?m`undefined`:(c?i.assets.resolveResponsiveImage(a,o):i.assets.resolve(a))?.src})},resolveResponsiveImage:(a,s,l)=>{let c,d,p,u;if(ka(s)&&Ra(s.__vekterDefault)?(d=s.__vekterDefault.assetReference,p=s.__vekterDefault.positionX,u=s.__vekterDefault.positionY):yn(s)&&(d=s.__defaultAssetReference),(a!==d||l.positionX!==p||l.positionY!==u)&&(c=v.fromValue(i.assets.resolveResponsiveImage(a,o,l))),i.localizedValues&&(c=i.localizedValues.add(c,l.valueLocalized,h=>{let y=l.valueLocalized?.[h];if(!Oa(y))return;if(y.value===d&&y.imageFocalPoint?.positionX===p&&y.imageFocalPoint?.positionY===u)return m`undefined`;let C=i.assets.resolveResponsiveImage(y.value,o,y.imageFocalPoint);return v.fromValue(C)})),!c)return;if(!i.valueTransforms)return c;let f=l.alt??ls;return i.localizedValues&&(f=i.localizedValues.add(f,l.altLocalized,h=>l.altLocalized?.[h]?.value)),i.valueTransforms.wrapInAddImageAlt(c,v.fromValue(f))},resolveDynamicValue:(a,s)=>{let l;if(ce(a))g(i.variables,"Variables are not supported"),l=i.variables.create(a);else if(Lt(a)){if(!i.valueTransforms)return;g(t.cache,"Node cache must be passed in when computed values can be created"),l=i.valueTransforms.createComputedValue(a,t,s)}else{return}if(!i.valueTransforms)return l;switch(s.type){case"image":return i.valueTransforms.wrapInToImageSrc(l);case"responsiveimage":return i.valueTransforms.wrapInToResponsiveImage(l);case"gap":case"padding":case"borderradius":return i.valueTransforms.wrapInNumberToPixelString(l);default:return l}},resolveLink:(a,s,l)=>{let c=Uo(s.value);if(Jr(c)&&i.localizedValues){let d=s.valueLocalized;return i.localizedValues.add(c.url,d,p=>d?.[p]?.value)}if(Lt(c)){if(!i.valueTransforms)return;g(t.cache,"Node cache must be passed in when computed values can be created");let d=i.valueTransforms.createComputedValue(c,t,l);return i.links.createResolvedBinding(t,d)}return i.links.resolve(t,c,n)},resolvePageScope:a=>i.links.resolvePageScope(Uo(a)),resolveLocalizedValue:(a,s)=>i.localizedValues?i.localizedValues.add(a,s,l=>s?.[l]?.value):a,compileRichText:(a,s)=>{let l=Zr(a,{collectors:i,nodeId:t.originalid??t.id});return i.localizedValues?i.localizedValues.add(l,s,(c,d)=>{if(!s)return;let p=s[c];if(!p)return;let u=p.value;if(A(u))return Zr(u,{collectors:{...i,...d},nodeId:t.originalid??t.id})}):l},resolveFont:a=>{if(!Ha(a))return{};let s=vn(t);return i.fonts.addFontObjectBySelector(a.fontSelector,s),Ga(a)},resolveScrollSectionRef:(a,s)=>{if(!x(s)){if(ce(s))return i.variables?.create(s);if(A(s.target)){let l=i.elementIds?.scrollTargetInfo(s);if(l?.ref)return l.ref}}},resolveCustomCursor:(a,s)=>{if(!x(s))return ce(s)?i.variables?.create(s):i.customCursors?.addControl(a,t,s)},resolveVectorSetItem:(a,s)=>{if(!x(a))return i.vectorSets?.resolveControl(a,s,t)},resolveColor:a=>A(a)?i.cssVariableDefinitions?.resolveColor(a)??a:a})}function el({componentName:t,fontObjects:e,fontReferences:r,imports:o,declarations:n,sharedFontArrays:i=[]}){return m.joinLines(...n.list(),v.fn(o.addImport("framer",{exportSpecifier:"addFonts"}),t,zi({fontObjects:e,fontReferences:r,sharedFontArrays:i}),{supportsExplicitInterCodegen:!0}))}function zi({fontObjects:t,fontReferences:e,sharedFontArrays:r=[]}){let o=[],n={explicitInter:!0,fonts:[]};for(let i of t){try{new URL(i.url)}catch{throw new Error(`Expected URL for font "${i.family}" to be a valid, absolute URL, but got: ${i.url}`)}n.fonts.push(i)}o.push(n);for(let i of e.values())o.push(m`...${i}`);for(let i of r)o.push(m`...${i}`);return o}var XC=kt(async(t,{assetMap:e,treeStore:r,modulesStore:o})=>{let n=new Kr,i=new ko(e),a=new No("componentPresets",o,n),s=new Ln(t,a,n,void 0,r,o),l=new fs(n),c=new ms(t),d=new Bs(t,r,c,l,n,a,i),p=new Os(n,c,d,i,s),u=t.moduleSourceRevision,f={},h={},y=t.getComponentPresets();await $s(y.map(N=>N.componentIdentifier),o);let C=new Kr,b=new hs(C);for(let N of y){let T=P.reactComponentForIdentifier(N.componentIdentifier);g(T,"Can't find react component for preset");let w=N.getFontsForCodeGeneration(P);await Bo.loadFonts(w);let V=new Vo(b),L=am(Qh(T,"onlyPresets"),N.getRawControlProps()),F=Zn(N,T.properties,L,{pixelSize:void 0,repeaterInfo:void 0,context:{assets:i,imports:a,links:s,fonts:V,fetches:p}});f[N.id]=new E(F),(V.fontObjects.size>0||V.fontReferences.size>0)&&(h[N.id]=zi({fontObjects:V.fontObjects,fontReferences:V.fontReferences}))}return[{revision:u,type:"componentPresets",source:m.joinLines(...a.statements,m`export const props = ${f}`,...b.list(),m`export const fonts = ${h}`),artifacts:{assets:i.keys,metrics:{nodes:Object.keys(f).length}}}]});var Bx=me("CodeGenerationStore");function KC(t,e,r){return r.add(t),e[t]?.forEach(o=>{r.has(o)||KC(o,e,r)}),r}function zx(t,e){let r={};for(let{fromNode:o,toNode:n}of e){let i=r[o]??new Set;i.add(n),r[o]=i}return KC(t,r,new Set([t]))}var YC=kt(async(t,{treeStore:e,modulesStore:r})=>{let o=Y(`Prototype/${t.name||"Generated Prototype"}`),n=e.tree.get(t.homeNodeId);g(n,"Can't serialize",o,": home node must exist.");let i=e.tree.getRect(n),a=new No("prototype",r);a.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),a.addImport("framer",{exportSpecifier:"PageRoot"}),a.addImport("framer",{exportSpecifier:"useInitialRouteComponent"});let s={};for(let u of zx(n.id,e.treeIndex.getPrototypeScreenLinks(e.tree,t.id))){let h=`../${Ee("screen",u)}`;try{await Gn(P,[pt("screen",u,"default").value],r);let y=a.addImport(h,{exportSpecifier:"default",importBinding:"Screen",lazy:u!==t.homeNodeId});s[u]={page:y,path:u}}catch{Bx.error("Missing module for prototype screen",{screenId:u})}}let l=Y(t.homeNodeId),c=Y(s),d=m`${a.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.useId`,p=new v(re.sections(re.linesFrom(a.statements),`const routes = ${c}`,re.lines("function Prototype({ layoutId }: { layoutId?: string }): JSX.Element {",`  const InitialRouteComponent = useInitialRouteComponent(routes, "${t.homeNodeId}")`,`  const defaultLayoutId = ${v.fn(d)};`,"  if (!InitialRouteComponent) return null","  return (","    <LayoutGroup id={layoutId ?? defaultLayoutId} inherit={false}>",`      <PageRoot RootComponent={InitialRouteComponent} isWebsite={false} routeId={${l}} routes={routes} />`,"    </LayoutGroup>","  )","}"),re.lines(xo("This is a generated Framer component.",{framerIntrinsicHeight:i?.height,framerIntrinsicWidth:i?.width,framerSupportedLayoutWidth:"fixed",framerSupportedLayoutHeight:"fixed",framerPrototype:""}),"const Component: React.ComponentType<{}> = React.memo(Prototype)","export default Component;"),`Component.displayName = ${o};`));return[{type:"prototype",source:p,revision:void 0}]});var F1={url:"url"};function QC(t){return Mp(t)&&t.actionIdentifier==="framer/useOpenURL"}function A1(t,e){let r={...t.controls,...e};return{...t,controls:r}}var $x=me("EventCollector"),wd=Symbol("previous"),ob=m`pathVariables`,ZC=m`navigate`,eb=m`setVariant`,tl=m`overlay`,Nd=m`loadMore`,tb={onMouseEnter:{isHovered:!0},onMouseLeave:{isHovered:!1},onTapStart:{isPressed:!0},onTap:{isPressed:!1},onTapCancel:{isPressed:!1}},nl={visible:"visible",show:"show",hide:"hide",toggle:"toggle"};function rl(t,e){return new v(`${t}.${e}`)}var ol=class{constructor(e,r,o,n,i,a={type:"canvasComponent"}){this.sourceNode=e;this.variables=r;this.treeStore=o;this.bindings=n;this.imports=i;this.options=a;S(this,"handlers",new Map);S(this,"variantOnAppearId",new Map);S(this,"keyBindHooks",new Set);S(this,"navigationTargets",new Set);S(this,"needsPathVariables",!1);S(this,"routeHandlers",new Map);S(this,"overlayState",new Map);S(this,"overlayTriggerOverlayBindings",new Map);S(this,"relativeOverlayPrimaryTriggers",new Set)}addHandler({trigger:e,node:r,actionInfo:o}){o?.forEach(c=>{!Uc(c)||!c.controls.id?.value||this.variables.create(cp(c.controls.id.value,void 0))});let n=e===Dm&&Xr(r),i=e===Vm&&Xr(r),a=rm(this.treeStore.tree,r.id)??this.sourceNode,s=!o||o.length===0;if(n&&s){this.variantOnAppearId.has(a.id)||this.variantOnAppearId.set(a.id,m`undefined`);return}if(s)return;let l=i?this.createKeydownEvents(r,o,this.imports):this.createCombinedEvents(r,o,e);if(n){l&&!this.variantOnAppearId.has(a.id)&&this.variantOnAppearId.set(a.id,l);return}if(!(i||!l))return l}eventHandlersForNode(e){if(!ds(e)||Co(e))return;let r=e.getActions(P),o={};for(let n in r)o[n]=this.addHandler({node:e,trigger:n,actionInfo:r[n]});return this.options.type!=="canvasComponent"||!Ot(e),o}getOverlayIdForNode(e){return Si(e)?this.treeStore.tree.get(e.cache.overlayAncestorId)?.originalid:e.cache.overlayAncestorId}transformAction(e,r,o){return n=>{if(!Pc(e)||x(r.meta?.inputValue))return n;let i=m`inputValue`;switch(o.bindings.add(m`const ${i} = args[0]?.target?.value?.trim()`),r.meta.inputValue){case"empty":return m`if (!${i}) { ${n} }`;case"set":return m`if (${i}?.length > 0 ) { ${n} }`;default:$(r.meta.inputValue,"All inputValue values should be handled")}}}getRepeaterIdForNode(e){let r=Rf(e);return r?Si(e)?r.originalid:r.id:null}createCombinedEvents(e,r,o){let n=rb(),i=this.getOverlayIdForNode(e);o in tb&&this.options.type==="canvasComponent"&&Ot(e)&&n.gestureHandlers.add(v.fn(R.setGestureState,tb[o]));for(let l of r){if(this.extractActionsToGroups(e,l,n,o,this.transformAction(o,l,n)),n.navigationActions.size>0)break;Fc(l)&&!Rn(e)&&(i||(i=l.controls.overlay.value))}if(nb.every(l=>n[l].size===0))return m`undefined`;let a=this.createEventFromGroups(o,n),s=this.getRepeaterIdForNode(e);if(n.overlayActions.size>0&&i||n.repeaterActions.size>0&&s){let l=i?this.overlayState.get(i):void 0,c=this.treeStore.tree.get(s),p=jr(c)&&Cr(c)?this.bindings.createWithNode("loadMore",c):void 0;if(l||p)return v.fn(a,{[tl.toString()]:l,[Nd.toString()]:p})}return a}createEventFromGroups(e,r){let o=Ux(r),n=`${e}${Ne(Y(o))}`,i=new v(n),a=m`const ${i} = ${o}`;return this.handlers.set(n,a),i}createKeydownEvents(e,r,o){g(this.options.type==="screen","Smart Components do not support keydown events");for(let n of r){let i=n.meta?.key;if(x(i))continue;let a=rb();if(this.extractActionsToGroups(e,n,a,"onKeyDown",this.transformAction("onKeyDown",n,a)),Object.keys(a).every(l=>a[l].size===0))continue;let s=this.createEventFromGroups("onKeyDown",a);if(g(o,"An Import collector must be provided to add gamepad or hotkey bindings."),Vp(i))this.keyBindHooks.add(v.fn(o.addImport("framer",{exportSpecifier:"useGamepad"}),i.key,s,{mapping:i.mapping}));else{let l=i.key,c=Wx(i),d=c.length?c.concat(l).join("+"):l;this.keyBindHooks.add(v.fn(o.addImport("framer",{exportSpecifier:"useHotkey"}),d,s))}}}extractActionsToGroups(e,r,o,n,i){if(uy(r)){if(this.options.type!=="canvasComponent"||!Pc(n)&&o.setVariantActions.size>0)return;let a=Gx(this.imports,r,n);a&&o.setVariantActions.add(i(a))}else if(Uc(r)){if(this.options.type!=="canvasComponent")return;let a=_x(r);a&&o.eventActions.add(i(a))}else if(Bf(r)){if(this.options.type!=="screen"||o.navigationActions.size>0)return;let a=this.createNavigateAction(r.controls.type.value,r.controls.target.value,r.meta?.delay,r.controls);a&&o.navigationActions.add(i(a))}else if(r.actionIdentifier==="framer/useLog"){if(this.options.type!=="screen")return;let a=Jx(r);a&&o.otherActions.add(i(a))}else if(r.actionIdentifier==="framer/useSetLocale"){let a=r.controls.localeId?.value;if(!A(a))return;o.otherActions.add(i(v.fn(R.setLocale,a)))}else if(QC(r)){let a=Uo(r.controls.url.value);if(x(a)||D(a))return;if(za(a)){let s=this.createOpenPageAction(a.webPageId,a.hash,r.meta?.delay);s&&o.navigationActions.add(i(s))}else{let s=jx(r,a);s&&o.otherActions.add(i(s))}}else if(!Rn(e)&&Fc(r)){if(r.actionIdentifier==="framer/useShowOverlay"&&this.options.type==="canvasComponent")return;let a=r.controls.overlay.value,s=this.createOverlayTriggers(a,e.id);s&&o.overlayActions.add(i(s))}else if(Lm(r)){if(!Rn(e))return;let a=this.getOverlayIdForNode(e);if(g(a,"overlayAncestorId must not be null when nodeIsInOverlay is true"),!this.overlayState.has(a))return;o.overlayActions.add(i(this.createDismissOverlayAction(r.meta?.delay)))}else if(Hf(r)){let a=this.getRepeaterIdForNode(e),s=this.treeStore.tree.get(a);if(!jr(s))return;o.repeaterActions.add(v.fn(Nd))}}createDismissOverlayAction(e){return eo(v.fn(rl(tl,"hide")),e)}createOpenPageAction(e,r,o){if(!this.getNavigationTarget(e))return;let i=`${Ne(e)}${r?Ne(r):""}`,a=new v(`openRoute${i}`),s=[e,m`true`];r&&s.push(r),this.routeHandlers.set(i,m`const ${a} = ${v.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteHandler"}),...s)}`);let l=v.fn(a);return m`return ${eo(l,o)}`}createNavigateAction(e,r,o,n){if(e==="previous")return this.navigationTargets.add(wd),m`return ${eo(v.fn(ZC,"previous"),o)}`;if(!r||!this.isValidNavigationTarget(r))return;let i={};for(let a in n){if(a==="target")continue;let s=n[a];i[a]=s.value}return this.navigationTargets.add(r),m`return ${eo(v.fn(ZC,r,i),o)}`}getNavigationTarget(e){if(!e)return null;let r=this.treeStore.tree.getNode(e);return!r||!(this.treeStore.tree.isGroundNode(r)||U(r))?null:r}isValidNavigationTarget(e){return!!this.getNavigationTarget(e)}createOverlayTriggers(e,r){let o=this.treeStore.tree.get(e);if(!o)return;let n=this.treeStore.tree.get(r);if(!n)return;let i=this.treeStore.tree.get(n.originalid??n.id);if(!i)return;if(!n?.children?.find(c=>(c.originalid??c.id)===e&&Nt(c))){$x.reportError("EventCollector: Tried to create a event handler to show an overlay which is not a descendant of the trigger.",{triggerId:r,overlayId:e});return}let s=this.overlayState.get(e)??this.bindings.create("overlay");this.overlayState.set(e,s);let l=this.overlayTriggerOverlayBindings.get(i.id)??new Map;return l.set(o.originalid??o.id,s),this.overlayTriggerOverlayBindings.set(i.id,l),Bt(o)&&this.relativeOverlayPrimaryTriggers.add(i.id),v.fn(rl(tl,Bt(o)?"show":"toggle"))}};function rb(){return{bindings:new v.Set,gestureHandlers:new v.Set,eventActions:new v.Set,setVariantActions:new v.Set,navigationActions:new v.Set,otherActions:new v.Set,overlayActions:new v.Set,repeaterActions:new v.Set}}var nb=["bindings","gestureHandlers","eventActions","setVariantActions","otherActions","overlayActions","repeaterActions","navigationActions"];function Ux(t){let e=[];for(let o of nb)for(let n of t[o])e.push(n);let r=m.joinLines(m`activeVariantCallback(async (...args) => {`,...e,m`})`);return t.overlayActions.size>0||t.repeaterActions.size>0?m`({${tl}, ${Nd}}) => ${r}`:r}function Wx(t){let e=[];for(let r in t)if(t[r])switch(r){case"altKey":e.push("alt");break;case"ctrlKey":e.push("ctrl");break;case"metaKey":e.push("meta");break;case"shiftKey":e.push("shift");break;default:break}return e}function Hx(t,e,r,o){if(e==="cycle")return v.fn(eb,t.addImport("framer",{exportSpecifier:"CycleVariantState"}),o);if(r)return v.fn(eb,r,o)}function Gx(t,e,r){let o=e.controls.type?.value,n=e.controls.variantId?.value,i=e.controls.pauseOffscreen?.value;if(!dy(o))return;let a=Hx(t,o,n,r==="onAppear"?i:void 0);if(a)return eo(a,e.meta?.delay)}function _x(t){let e=t.controls.id?.value;if(!A(e))return;let r=new v(e);return m.joinLines(m`if (${r}) {${m.joinLines(t.meta?.delay&&m`await delay(() => {}, ${t.meta?.delay*1e3});`,m`const res = await ${r}(...args);`,m`if (res === false) return false;`)}}`)}function jx(t,e){if(!Jr(e))return;let{href:r,target:o=m`undefined`,rel:n}=bp(e.url);if(!r)return;let i=[r,o??m`undefined`,n??"noopener"];return eo(v.fn(m`window.open`,...i),t.meta?.delay)}function Jx(t){let e=t.controls?.type?.value,r=t.controls?.message?.value;if(A(e))switch(e){case"event":return new v(re.lines('if (args[0] && "persist" in args[0]) args[0].persist()',eo(m`console.log(...args)`,t.meta?.delay)));case"message":return A(r)?eo(m`console.log(${r})`,t.meta?.delay):void 0;case"count":return A(r)?eo(m`console.count(${r})`,t.meta?.delay):void 0}}function eo(t,e){return!x(e)&&e>0?m`await delay(() => ${t}, ${e*1e3})`:t}function il(t){switch(t.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":return!0;default:return!1}}function vr(t){return G(t)&&!il(t)&&!t.isVectorInstance}function ib(t){switch(t.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":case"framer/Prototype":return!0;default:return!1}}function ab(t){switch(t.codeComponentIdentifier){case"framer/Page":return"Page";case"framer/Scroll":return"Scroll";case"framer/Prototype":return"DeviceCodeComponent"}}var Xx=t=>[`.${t}[data-border="true"]::after, .${t} [data-border="true"]::after { content: ""; border-width: var(--border-top-width, 0) var(--border-right-width, 0) var(--border-bottom-width, 0) var(--border-left-width, 0); border-color: var(--border-color, none); border-style: var(--border-style, none); width: 100%; height: 100%; position: absolute; box-sizing: border-box; left: 0; top: 0; border-radius: inherit; pointer-events: none; }`],Kx=t=>[`.${t}[data-selection="true"] * ::selection, .${t} [data-selection="true"] * ::selection { color: var(--selection-color, none); background-color: var(--selection-background-color, none); }`],Yx=t=>[`.${t}[data-hide-scrollbars="true"]::-webkit-scrollbar, .${t} [data-hide-scrollbars="true"]::-webkit-scrollbar { width: 0px; height: 0px; }`,`.${t}[data-hide-scrollbars="true"]::-webkit-scrollbar-thumb, .${t} [data-hide-scrollbars="true"]::-webkit-scrollbar-thumb { background: transparent; }`,`.${t}[data-hide-scrollbars="true"], .${t} [data-hide-scrollbars="true"] { scrollbar-width: none; }`],Ui="data-layout-template",Qx={0:Xx,1:Yx,2:Kx},ei,al=class{constructor(e,r,o,n){this.entryNode=e;this.sourceNode=r;this.serializationId=o;this.cssVariableDefinitions=n;S(this,"sharedStyleIds",new Set);S(this,"rules",{});W(this,ei,new Set);S(this,"selectorsByNodeId",new Map)}get(e=this.sourceNode.id){return e===this.sourceNode.id&&this.getWideGamutColorRule(),{rules:this.rules[e]??new Map}}createScopingSelector(e,r){if(e){let o=`.${this.serializationId}.${cm}v-${Ne(e)}`;return r?`${o}.${r}`:o}return`.${this.serializationId}`}createSelector(e,r,o,n,i=e===this.sourceNode.id){let a=this.createScopingSelector(o,n);return e===this.entryNode.id?`${a}.${r}, ${a} .${r}`:i?`${a}.${r}`:`${a} .${r}`}addRule(e,r,o={}){let{scope:n,gesture:i,container:a,ruleType:s=0,hasScopingSelector:l}=o,c=r.originalid??r.id,d=dm(s,c);a&&(d+="-container");let p=this.createSelector(c,d,n,i,l);this.selectorsByNodeId.set(c,p);let u=o.variant?.id??this.sourceNode.id;if(this.createRule(p,Pn(e),u),eR(e)){let f=rR(r,this.serializationId);for(let h in f)this.createRule(h,Pn(f[h]),u)}return d}addConditionalRule(e){I(this,ei).add(e)}hasConditionalRule(e){return I(this,ei).has(e)}conditionalRules(e){let r=[];return I(this,ei).forEach(o=>{let n=Qx[o],i=n(e);r.push(...i)}),r}addSharedStyle(e){this.sharedStyleIds.add(e)}createRule(e,r,o=this.sourceNode.id){let n=this.rules[o];if(n){n.set(e,r);return}this.rules[o]=new Map([[e,r]])}getWideGamutColorRule(){let e=this.cssVariableDefinitions.getWideGamutColorRules(`.${this.serializationId}`,this.selectorsByNodeId);e.length!==0&&this.createRule("@supports (color: color(display-p3 1 1 1))",e.join(" "))}};ei=new WeakMap;var Zx="viewTransitionName";function eR(t){return Zx in t&&tR(t)}var sb="-exclude";function tR(t){return Gu(t.viewTransitionName)&&t.viewTransitionName.endsWith(sb)}function xd(t,e,r){let o=Ne(t.originalid??t.id);return r?`${e}-${o}${sb}`:o}function rR(t,e){let r=xd(t,e,!0);return{[`::view-transition-group(${r})`]:{animation:"none !important"},[`::view-transition-new(${r})`]:{animation:"none !important"},[`::view-transition-old(${r})`]:{animation:"none !important"}}}function lb(t,e,r){return!!(Fe(t)||Fe(e)||t.id===r.rootId)}var sl=class{constructor(e,r){this.repeaterNode=e;this.parent=r;S(this,"subqueries",new Map);S(this,"variableDependencies",new Map);S(this,"childRepeaterIds",new Set)}addSubquery(e,r,o){let n=this.getSubqueries(e);n.set(r,o),this.subqueries.set(e,n),this.childRepeaterIds.add(r)}getSubqueries(e){return this.subqueries.get(e)??new Map}addVariableDependencies(e,r){let o=this.getVariableDependencies(e);o.push(...r),this.variableDependencies.set(e,o)}getVariableDependencies(e){return this.variableDependencies.get(e)??[]}};function Rd(t,e){return!Mi(t)||x(t.visible)?!0:D(t.visible)?e.createDeduplicatedDynamicValueBinding(t.visible,t,"visible"):t.isVisible()}function kd(t,e,r,o){if(r.inComponentSlot||o||Xe(t)||xt(t)||Bt(t)||sr(t)&&lt.isOn("layoutScroll")||Xr(t)&&Pm.some(i=>(t[i]?.length??0)>0)||it(t)&&!nt(t))return!0;switch(e.scopeType){case"CanvasPage":return!0;case"SmartComponent":return!0;case"LayoutTemplate":case"WebPage":case"DesignPage":if(Ot(t)||ps(t))return!0;if(es(t)){let i=t.rotation;if(D(i)||H(i)&&i!==0)return!0}return vs(t);case"VectorSet":return!1;default:At(e.scopeType)}}function It(t,e){if(Number.isNaN(t)&&Number.isNaN(e)||t===e)return!0;if(rt(t)||rt(e)||A(t)||A(e)||x(t)||x(e)||H(t)||H(e)||gr(t)||gr(e)||Cc(t)||Cc(e))return!1;if(wt(t)||wt(e))return wt(t)&&wt(e)?Y(t)===Y(e):!1;if(nr(t)||nr(e)){if(nr(t)&&nr(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!It(t[r],e[r]))return!1;return!0}return!1}if(tt(t)||tt(e)){if(tt(t)&&tt(e)){for(let a in t)if(!It(t[a],e[a]))return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;let r,o,n,i;return xi(t)&&(r=E.spreadsAtStart(t),o=E.spreadsAtEnd(t)),xi(e)&&(n=E.spreadsAtStart(e),i=E.spreadsAtEnd(e)),!It(r,n)||!It(o,i)?!1:xi(t)&&xi(e)?E.isSorted(t)===E.isSorted(e):!0}return!1}throw new Error(`Tried to compare unsupported primitive types. ${typeof t} / ${typeof e}`)}var cb={js:m`undefined`,css:"unset"};function oR(t,e){switch(e){case"js":return cb[e];case"css":return t==="display"?"block":cb[e];default:$(e,`target is not a defined enum: ${e}`)}}function to(t,e,r){if(!t)return;if(!e)return t;let o={},n=!1;for(let i in t){let a=t[i],s=e[i];It(a,s)||(x(a)?i in e&&(o[i]=r?oR(i,r):void 0,n=!0):(o[i]=a,n=!0))}if(n)return o}var ll=(t,e)=>{if(!Im(t)||!t.codeOverrideEnabled||!t.codeOverrideIdentifier)return;let r=P.componentForIdentifier(t.codeOverrideIdentifier);if(!(r&&hc(r)))return;let o=Q(t.codeOverrideIdentifier);if(!be(o))return;let{importSpecifier:n,exportSpecifier:i}=Yr(o,e.moduleType,e.modulesStore);if(!(!n||!i))return{importSpecifier:n,exportSpecifier:i}};function cl(t,e){let r=[];if(lt.isOn("overridesWithPropertyControls")&&rg(t)&&t.codeOverrides)for(let o of t.codeOverrides){let n=P.componentForIdentifier(o.identifier);if(!(n&&hc(n)))continue;let i=Q(o.identifier);if(!be(i))continue;let a=e.imports.addModuleImport(i);if(!a)continue;let s=og(o),l=Object.keys(s).length>0&&Pr(s);r.push(l?[a,s]:a)}return r}function nR(t){return!wt(t)&&(A(t)||H(t)||rt(t)||x(t))}function Md(t,e){return e.scopeType!=="SmartComponent"?nR(t):Pr(t)}var db=je((t,e,r)=>{if(!G(t)||!t.isVectorInstance||!J(r))return;let o=P.reactComponentForIdentifier(t.codeComponentIdentifier);if(!o)return;let n=Zn(t,o.properties,t.getControlProps(o.properties),{context:r,pixelSize:void 0,repeaterInfo:void 0});for(let i in n){let a=n[i],s=`--${Ne(i)}`;Md(a,r)&&(e[s]=a??void 0)}});function ub(t,e,r,o,n){let i={...e};Wp.has(t.codeComponentIdentifier)&&(i.__fromCodeComponentNode=!0);let a=o.reactComponentForIdentifier(t.codeComponentIdentifier);if(a?.properties){let f=jh(t.intrinsicWidth,t.intrinsicHeight),h=Zn(t,a.properties,t.getControlProps(a.properties),{pixelSize:f,context:r,repeaterInfo:n?r.repeaterInfo.get(n):void 0});if(t.isVectorInstance)for(let y in h){let C=h[y],b=r.scopeType!=="SmartComponent"?!0:void 0;i[y]=Md(C,r)?b:C}else Object.assign(i,h)}let s=Yh(o,t.codeComponentIdentifier,i),l=t.getActions(o);for(let f in l)s[f]=r.events?.addHandler({node:t,trigger:f,actionInfo:l[f]});if(t.isVectorInstance)return Xc(s);let c=Xh(t,o);Hp(t)&&Object.assign(s,t.getStylingProps(c,!1));let d=t.id===r.rootId&&r.scopeType!=="SmartComponent",p=c?Object.keys(c):[],u=tt(c)&&p.length>0&&p.some(f=>!x(c[f]));return tt(c)&&(u||d)&&d&&(c.width=m`style?.width`,c.height=m`style?.heigh`,u=!0),u&&(s.style?Object.assign(s.style,c):s.style=c),Xc(s)}var iR=/\/assets\/(?:(\d+)\/)?([^?]+)\?/u;function aR(t,e){if(typeof DOMParser>"u"||t.indexOf("image")<0)return;let r=Ip(t),o=r.querySelector("svg");if(!o)return;let n=new Map;if(r.querySelectorAll("image").forEach(i=>{let a=i.getAttribute("xlink:href");if(!a)return;let s=iR.exec(a);if(!s)return;let l=Number.parseInt(s[1],10),c=s[2],d="::ASSET::"+n.size+"::",u=e?.resolveResponsiveImage(c,l)?.src??_u(c,l);n.set(d,u),i.setAttribute("xlink:href",d)}),n.size!==0)return o.outerHTML.replace(/::ASSET::\d+::/gu,i=>n.get(i)??`missing:${i}`)}function dl(t,e){let r=t.svg;A(r)&&(t.svg=aR(r,e)??r)}var pb=O((t,e,r)=>{if(!tg(t)||!Hn(r?.scopeType))return;if(Pf(t)||xt(t)&&D(t.fillImage)){e["aria-label"]=void 0;return}if(J(r)&&D(t.ariaLabel)){e["aria-label"]=r.createDeduplicatedDynamicValueBinding(t.ariaLabel,t,"ariaLabel");return}let o=t.resolveValue("ariaLabel",r?.variableOverrides);if(A(o)&&o!==""){e["aria-label"]=o;return}e["aria-label"]=void 0});var mb=O((t,e,r)=>{let o=it(t),n=!!(t.parentid&&r?.renderAsListNodes?.has(t.parentid));if(!ar(t)){if(!nt(t)&&o&&(e.as="a"),n){e.as="li";return}return}if(!xt(t))return;let i=t;if(o){e.as="a";return}if(n){e.as="li";return}let a=i.htmlTag??us;a!=="div"&&(e.as=a)});var fb=O((t,e,r)=>{if(!Ng(t)||!J(r))return;let o=t.originalid??t.id,n=r.events.overlayState.get(o);n&&(D(t.backdropDismissible)?e.onTap=m`() => ${r.createDeduplicatedDynamicValueBinding(t.backdropDismissible,t,"backdropDismissible")} && ${v.fn(m`${n}.hide`)}`:e.onTap=t.resolveValue("backdropDismissible")?m`() => ${v.fn(m`${n}.hide`)}`:void 0,e.initial={opacity:0},e.key=o,t.backdropTransitionLocked?(e.transition=So(t.backdropEnterTransition??xs),e.animate={opacity:1},e.exit={opacity:0}):(e.animate={opacity:1,transition:So(t.backdropEnterTransition??xs)},e.exit={opacity:0,transition:So(t.backdropExitTransition??xs)}))});var hb=O((t,e,r)=>{if(!ts(t)&&kn(t)){if(Mn(t)&&!t.fillEnabled){e.background=void 0;return}e.background=qh(t,!0,r),e.background&&ct(t)&&(t.heightType===5?e.fitImageDimension="height":t.widthType===5?e.fitImageDimension="width":e.fitImageDimension=void 0)}});var yb=O((t,e,r)=>{!Ym(t)||!t.borderEnabled||nf(t)||(e["data-border"]=!0,J(r)&&r.css.addConditionalRule(0))});var Sb="data-reset",Cb=O((t,e,r)=>{if(J(r)&&!(r.scopeType==="CanvasPage"||r.scopeType==="DesignPage")&&wo(t)){if(!Xf(t.htmlTag)){e[Sb]=void 0;return}t.htmlTag==="button"&&(e[Sb]="button")}});function bb(t,e){if(Ft(t))return Q(t).type;if(Nr(t)){let o=e.getExternalModuleNodes().find(n=>n.codeComponentIdentifier===t);return o?o.type:void 0}}var vb=O((t,e,r)=>{if(!G(t)||!J(r)||!vr(t))return;e.scopeId=r.scopeId,e.nodeId=t.originalid??t.id,e.isAuthoredByUser=bb(t.codeComponentIdentifier,r.treeStore.tree)==="codeFile"?!0:void 0;let o=Nr(t.codeComponentIdentifier);o&&(e.isModuleExternal=o);let n=r.nodeRendersWithMotion.get(t);n&&(e.rendersWithMotion=n);let i=Q(t.codeComponentIdentifier);e["data-code-component-plugin-id"]=Xy(r.treeStore.tree,r.modulesStore,i)});var Ib=O((t,e,r)=>{ag(t)&&Hn(r?.scopeType)&&(e["data-nosnippet"]=sg(t)?t.dataNosnippet:void 0)});var Tb=O((t,e,r)=>{if(!qf(t))return;let o=J(r)&&D(t.draggable)?r.createDeduplicatedDynamicValueBinding(t.draggable,t,"draggable"):t.resolveValue("draggable");e.draggable=!x(o)&&!D(t.draggable)?o.toString():o});var Nb=O((t,e,r)=>{if(!J(r)||Co(t)||!ds(t)&&!Fm(t))return;let o=r.treeStore.tree.get(r.scopeId);Ct(o)&&Uf(o)&&Object.assign(e,r?.events?.eventHandlersForNode(t))});var wb=O((t,e,r)=>{if(!nt(t))return;let o=t.getFontsForLoading();if(J(r)){let n=vn(t);for(let i of o)r.fonts?.addFontObjectBySelector(i,n)}e.fonts=o.length>0?o:void 0});var xb=O((t,e,r)=>{qg(t)&&(e.step=J(r)&&D(t.formInputStep)?r.createDeduplicatedDynamicValueBinding(t.formInputStep,t,"step"):t.resolveValue("formInputStep"))});var Rb=O((t,e,r)=>{if(lg(t)){if(J(r)){e["data-hide-scrollbars"]=D(t.hideScrollbars)?r.createDeduplicatedDynamicValueBinding(t.hideScrollbars,t,"hideScrollbars"):t.hideScrollbars||void 0,x(t.hideScrollbars)||r.css.addConditionalRule(1);return}e["data-hide-scrollbars"]=t.resolveValue("hideScrollbars",r?.variableOverrides)?!0:void 0}});var kb=O((t,e,r)=>{!Xr(t)||r?.scopeType==="WebPage"||(e["data-highlight"]=Am(t,P)||void 0)});var Mb=O((t,e,r)=>{if(!St(t)||!Ke(t)||!J(r)||r.scopeType!=="LayoutTemplate")return;let o=t.tree()?.getParent(t.id);if(!Be(o))return;let{center:n}=Sh(t);tp(e,bh(t)?n:void 0)});var Vb=O((t,e,r)=>{if(!it(t)||nt(t))return;if(r?.variables&&ce(t.linkOpenInNewTab)){e.openInNewTab=r.variables.create(t.linkOpenInNewTab);return}let o=t.resolveValue("linkOpenInNewTab",r?.variableOverrides);gr(o)&&(e.openInNewTab=o)}),Db=O((t,e,r)=>{if(!it(t)||nt(t))return;if(r?.variables&&ce(t.linkSmoothScroll)){e.smoothScroll=r.variables.create(t.linkSmoothScroll);return}let o=t.resolveValue("linkSmoothScroll",r?.variableOverrides);gr(o)&&(e.smoothScroll=o)}),Pb=O((t,e,r)=>{if(!it(t)||nt(t))return;if(r?.variables&&ce(t.linkClickTrackingId)){e.clickTrackingId=r.variables.create(t.linkClickTrackingId);return}let o=t.resolveValue("linkClickTrackingId",r?.variableOverrides);A(o)&&(e.clickTrackingId=o)}),Fb=O((t,e,r)=>{if(!it(t)||nt(t))return;let o=t.resolveValue("linkRelValues",r?.variableOverrides);if(r?.variables&&ce(t.linkRelValues)){e.relValues=r.variables.create(t.linkRelValues);return}Pp(o)&&(e.relValues=o)}),Ab=O((t,e,r)=>{if(!it(t)||nt(t))return;if(r?.variables&&ce(t.linkPreserveParams)){e.preserveParams=r.variables.create(t.linkPreserveParams);return}let o=t.resolveValue("linkPreserveParams",r?.variableOverrides);gr(o)&&(e.preserveParams=o)}),Lb=O((t,e,r)=>{if(!Ro(t)||nt(t))return;if(!it(t)){e.href=void 0;return}let o=t.getLink();Lt(o)?e.href=r?.valueTransforms?.createComputedValue(o,t,void 0):Jr(o)&&t.linkLocalized&&r?.localizedValues?e.href=r.localizedValues.add(o.url,t.linkLocalized,n=>t.linkLocalized?.[n]?.value):e.href=r?.links?.create(o)}),Eb=O((t,e)=>{if(pp(t)){let r=new Set,o=t.getInlineLinks(!1);A(t.link)&&o.push(t.link),o.forEach(n=>{if(!n||!gp(n))return;let i=yp(n)?.target;i&&r.add(i)}),e.__link=t.link,r.size&&(e.preload=Array.from(r))}}),Ob=O((t,e)=>{e.nodeId=t.originalid??t.id}),Bb=O((t,e,r)=>{e.scopeId=r?.scopeId});var zb=O((t,e,r)=>{if(!jf(t)||!J(r)||!Is(r.scopeType)||Nt(t))return;if(!Jf(t)){e.drag=void 0;return}let o,n;!t.dragEffectFreeform&&r.scopeType!=="SmartComponent"?o=r.elementIds.scrollTargetInfo({target:t.dragEffectConstraintElement,collectionItem:t.dragEffectConstraintItem})?.ref:t.dragEffectSnapBack&&(n=!0);let i=t.dragEffectTransition?So(t.dragEffectTransition):void 0,a=i?r.declarations.file.dedupe("inertia",i):void 0,s=o||n,l=m`e`,c={drag:!0,dragConstraints:o,dragMomentum:!!t.dragEffectMomentum,dragTransition:s?a:void 0,dragSnapToOrigin:n,onMouseDown:r.declarations.file.dedupe("preventDefault",m`(${l}) => ${l}.preventDefault()`)};Object.assign(e,c)});var sR="--extracted-",lR=["--framer-text-color","--framer-text-stroke-width","--framer-text-stroke-color","--framer-font-variation-axes"];function Wi(t,e){let r=$n(t);return $b(r,(o,n)=>{for(let i of lR){let a=o.style.getPropertyValue(i);if(!a)continue;let s=cR(n,i),l=dR(s,a);e&&(e[s]=a),o.style.setProperty(i,l)}}),r.innerHTML}function cR(t,e){return sR+Ne(t+e)}function dR(t,e){return`var(${t}, ${e})`}function $b(t,e,r=""){for(let o=0;o<t.children.length;o++){let n=t.children[o];if(n instanceof HTMLElement){let i=r+n.tagName+o;e(n,i),$b(n,e,i)}}}var Ub=O((t,e,r)=>{if(!qa(t)||!J(r))return;let o=r.scopeType==="SmartComponent",n=o?Wi(t.html):t.html,{assets:i,imports:a,variables:s,links:l,cssVariableDefinitions:c}=r||{};if(g(i&&a&&l,"assets, imports, links must exist at this point"),ce(t.htmlContent))g(s,"context.variables should exist if we are dealing with variables references"),e.children=s.create(t.htmlContent);else{let d=Zr(n,{collectors:{assets:i,imports:a,links:l,variables:s,cssVariableDefinitions:c},useFramerMotion:o,nodeId:t.originalid??t.id,scopeId:r.scopeId}),p=$y(n);e.children=r.localizedValues.add(d,t.htmlLocalized,(u,f)=>{let h=lS(p,t.htmlLocalized?.[u],n);if(!h)return;let y;return h.type==="rich-text"?(y=sS(t.html,h.value),o&&(y=Wi(y))):y=Tg(n,h.value),Zr(y,{collectors:{assets:i,...f},useFramerMotion:o,nodeId:t.originalid??t.id,scopeId:r.scopeId})})}Xe(t)&&wa(t.anchorLinkOffsetY)&&(e.anchorLinkOffsetY=t.anchorLinkOffsetY),r.metrics?.measureLength("textBytes",e.__htmlStructure),r.metrics?.measureLength("textBytes",e.htmlFromDesign),r.metrics?.measureLength("textBytes",e.children)});var Wb=O((t,e,r)=>{if(!(!Da(t)||!t.colorable)){if(Mn(t)&&!t.fillEnabled){e.fill=null;return}if(kn(t)&&!(t.fillType==="linear-gradient"&&t.fillLinearGradient||t.fillType==="radial-gradient"&&t.fillRadialGradient||t.fillType==="conic-gradient"&&t.fillConicGradient)){if(t.fillType==="image"&&t.fillImage){e.fill=Jh(t,r,r?.variableOverrides);return}if(t.fillColor){if(D(t.fillColor)&&J(r)){e.fill=r.createDeduplicatedDynamicValueBinding(t.fillColor,t,"fillColor");return}e.fill=t.resolveValue("fillColor",r?.variableOverrides)}}}});var Hb=O((t,e,r)=>{if(!wm(t)||!wp(t))return;let o=Ro(t)&&A(t.link)?t.link:void 0,n=fp(t)?t.htmlTextTag:void 0,{alignment:i,rawHTML:a}=t.getStyledText().getProps(t,o,n,()=>{});e.alignment=i,e.rawHTML=a?m`${a}`:void 0,r?.metrics?.measureLength("textBytes",e.rawHTML)});var Gb=O((t,e,r)=>{if(hf(t)){if(!t.textContent){e.text=void 0;return}J(r)&&(D(t.textContent)?e.text=r.createDeduplicatedDynamicValueBinding(t.textContent,t,"textContent"):$(t.textContent,"text content must be a variable or a computed value"),r?.metrics?.measureLength("textBytes",e.text))}});var _b=O((t,e,r)=>{!ws(t)||!t.resolveValue("textSelection")||(e["data-selection"]=!0,J(r)&&r.css.addConditionalRule(2))});var jb=O((t,e)=>{Vg(t)&&(e.verticalAlignment=t.textVerticalAlignment)});var Jb=O((t,e)=>{Og(t)&&(e.description=A(t.description)&&t.description!==""?t.description:void 0,e.title=A(t.title)&&t.title!==""?t.title:void 0)});function uR(t){if(Ot(t))return t.variantTransition;if(nh(t))return t.transition}var qb=O((t,e,r)=>{if(r.scopeType!=="SmartComponent")return;let o=uR(t);if(D(o)){e.value=r.createDeduplicatedDynamicValueBinding(o,t,"transition");return}if(!o){e.value=void 0;return}let n=So(o);e.value=r.declarations.file.dedupe("transition",n)});var pR="-container",Pd=m`formState`,mR=O((t,e,r)=>{Da(t)&&(e.withExternalLayout=!0,e.intrinsicHeight=t.intrinsicHeight||void 0,e.intrinsicWidth=t.intrinsicWidth||void 0,e.svg=m`${t.svg}`,dl(e,r?.assets),r?.metrics?.measureLength("svgBytes",e.svg))}),fR=O((t,e,r)=>{if(!Cn(t))return;g(e instanceof E,"");let o=od.shared().getSVGStringForNode(t),n=t.contentHash;E.assign(e,{layout:r?.scopeType==="SmartComponent"?"position":void 0,intrinsicWidth:void 0,intrinsicHeight:void 0,...qc(t),withExternalLayout:!0,svgContentId:n,svg:o});let i=e.style?.opacity;(i||Number.isFinite(Number(i)))&&(e.opacity=i),dl(e,r?.assets),r?.metrics?.measureLength("svgBytes",e.svg)}),hR=O((t,e,r)=>{if(!Up(t))return;let o=od.shared().getSVGStringForNode(t);Object.assign(e,{intrinsicWidth:void 0,intrinsicHeight:void 0,...qc(t),svg:o,withExternalLayout:!0,requiresOverflowVisible:cS(t)});let n=e.style?.opacity;(n||Number.isFinite(Number(n)))&&(e.opacity=n),dl(e,r?.assets),r?.metrics?.measureLength("svgBytes",e.svg)});function gR(t){return t.codeComponentIdentifier==="framer/Prototype"}function Vd(t,e,r,o,n){if(!G(t))return;let{lastRepeaterId:i,layoutId:a}=n;if(E.assign(e,ub(t,void 0,r,P,i)),gR(t))e.scaleTo="dynamic";else if(il(t))e.__fromCanvasComponent=!0;else if(!t.isVectorInstance)e.width="100%",e.height="100%",e.id=t.originalid??t.id,t.name!==null&&!e.name&&(e.name=t.name);else{let c=es(t)&&(D(t.rotation)||H(t.rotation)&&t.rotation!==0);e[dh]=r.scopeType==="SmartComponent"?!0:ps(t)||c||vs(t)}Nh(t,e,r);let s=r.events.overlayTriggerOverlayBindings.get(t.originalid??t.id);if(sh(t)&&s?.size){let c=new v(Array.from(s.values())?.map(d=>m`${d}.visible`)?.join(" || "));e.variant=m`(${c}) ? ${t.whileOpenEffectVariant} : ${e.variant??m`undefined`}`}Qf(r.treeStore.tree,t)&&(e.type="submit",Yf(t)&&(e.variant=v.fn(r.declarations.file.dedupe("formVariants",m`(form, variants, currentVariant) => { ${m.joinLines(m`switch(form.state) {${m.joinLines(m`case "success": return variants.success ?? currentVariant`,m`case "pending": return variants.pending ?? currentVariant`,m`case "error": return variants.error ?? currentVariant`,m`case "incomplete": return variants.incomplete ?? currentVariant`)}}`)} }`),Pd,{success:t.formButtonSuccessVariantEnabled?t.formButtonSuccessVariant:void 0,error:t.formButtonErrorVariantEnabled?t.formButtonErrorVariant:void 0,pending:t.formButtonPendingVariantEnabled?t.formButtonPendingVariant:void 0,incomplete:t.formButtonIncompleteVariantEnabled?t.formButtonIncompleteVariant:void 0},e.variant??m`undefined`)));let l=r.treeStore.tree.get(n.lastRepeaterId);if(jr(l)&&Cr(l)&&(jo(t,l)||Gf(t))&&(e.variant=l&&_f(t)?v.fn(r.declarations.file.dedupe("loaderVariants",m`(repeaterState, variants, currentVariant) => { ${m.joinLines(m`if (repeaterState.currentPage >= repeaterState.totalPages) return variants.disabled ?? currentVariant`,m`if (repeaterState.isLoading) return variants.loading ?? currentVariant`,m`return currentVariant`)} }`),r.bindings.createWithNode("paginationInfo",l),{disabled:t.dataLoaderDisabledVariantEnabled?t.dataLoaderDisabledVariant:void 0,loading:t.dataLoaderLoadingVariantEnabled?t.dataLoaderLoadingVariant:void 0},e.variant??m`undefined`):void 0),bn(t)||o.identifiers&&o.identifiers.size>1){let c=Q(t.codeComponentIdentifier);g(be(c),`Expected a module export identifier, got ${c}`);let{importSpecifier:d,exportSpecifier:p,importBinding:u}=Yr(c,r.moduleType,r.modulesStore);g(d,"A module must have an import specifier."),e.Component=ce(t.dynamicVectorSetIdentifier)?r.vectorSets.resolveVariableInstance(t):r.imports.addImport(d,{exportSpecifier:p,importBinding:u})}e.layoutId=a??t.originalid??t.id}var yR=(t,e,r,o)=>{let n=new E;return Vd(t,n,e,r,o),n},SR=Go(pb,mb,fb,hb,yb,vb,Cb,Ib,Tb,Nb,wb,Wg,dg,_g,Kg,xb,ny,Yg,Qg,ug,wh,Rb,kb,Mb,Eb,xh,zb,Ih,yh,Rh,kh,vh,Ub,fR,Hb,Dg,Wb,mR,zg,Gb,Pg,Fg,_b,jb,Jb,hR);function CR(t){if(x(t)||t instanceof E&&E.hasSpreads(t))return t;for(let e of Object.values(t))if(!x(e))return t}function Dd(t){return t.declarations.component.dedupe("scopingClassNames",v.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),R.serializationHash,m`...${R.sharedStyleClassNames}`))}var bR=(t,e,r,o,{style:n,className:i})=>{let a=new E;SR(t,a,e);let s=(t.originalid??t.id)===e.rootId;if(a.style||n||s){let f={};if(tt(a.style)&&Object.assign(f,a.style),n&&Object.assign(f,n),a.style=CR(f),s){let h=new E(a.style);E.addSpreadAtEnd(h,m`style`),a.style=h}}let l=[];a.className&&l.push(a.className),i&&l.push(i),s&&(l.unshift(Dd(e)),l.push(R.className),a.ref=R.refBinding,E.addSpreadAtStart(a,R.restProps),e.scopeType==="SmartComponent"&&(l.push(R.classNames),E.addSpreadAtStart(a,R.gestureHandlers))),Ef(t)&&t.customizationsSectionId&&(a["data-section-id"]=t.id),(Fe(t)||Fe(e.treeStore.tree.getParent(t.id)))&&l.unshift(Dd(e)),l.length===1?a.className=l[0]:l.length>1&&(a.className=v.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),...l)),e.scopeType==="LayoutTemplate"&&Be(t)&&(a[Ui]=!0);let{withKey:c,layoutId:d}=r,p=d??t.originalid??t.id;c&&(a.key=p),e.scopeType==="SmartComponent"?(a.layoutId=vr(t)?p+pR:p,a.layoutDependency=m`layoutDependency`):e.scopeType==="CanvasPage"&&(a.layoutIdKey=p,t.duplicatedFrom&&t.duplicatedFrom.length>0&&(a.duplicatedFrom=t.duplicatedFrom)),G(t)&&(vr(t)?r.inComponentSlot&&(a.inComponentSlot=r.inComponentSlot):(il(t)&&(a.__fromCanvasComponent=!0),Vd(t,a,e,o,r)),sr(t)&&(a.layoutScroll=!0)),nt(t)&&(a.withExternalLayout=!0,a.__fromCanvasComponent=!0),as(t)&&e?.scopeType==="WebPage"&&!Ot(t)&&(a.id=t.scrollTargetEnabled?e.elementIds.id(t):void 0),a["data-framer-cursor"]=e.customCursors.add(t),Bt(t)?Object.assign(a,{role:"dialog"}):a[vc]=e.elementIds.portalId(t);let u=e.treeStore.tree.get(r.lastRepeaterId);return u&&G(t)&&jo(t,u)&&Object.assign(a,{__paginationInfo:e.bindings.createWithNode("paginationInfo",u),__loadMore:e.bindings.createWithNode("loadMore",u)}),a},vR=Go(Lb,Vb,Db,Pb,Fb,Ab,Ob,Bb);function IR(t,e){let r=new E({motionChild:!0});return vR(t,r,e),r}function TR(t,e){let r=new E;return qb(t,r,e),r}var NR=new E({placement:void 0,alignment:void 0,offsetX:void 0,offsetY:void 0,className:void 0,anchorRef:void 0,floatingRef:void 0,onDismiss:void 0,portalSelector:void 0,safeArea:void 0,collisionDetection:void 0});function wR(t,e){if(!Om(t))return;if(!Bt(t))return NR;let r=e.events.overlayState.get(t.originalid??t.id);if(!r)return;let o=e.treeStore.tree.getParent(t.originalid??t.id);if(o)return new E({placement:t.floatingPlacement,alignment:t.floatingAlignment,offsetX:t.floatingOffsetX,offsetY:t.floatingOffsetY,anchorRef:e.rootId===o.id?m`${R.refBinding}`:e.elementIds.ref(o),onDismiss:m`${rl(r,"hide")}`,safeArea:t.floatingSafeArea??!0,zIndex:Yp(t)?t.zIndex:void 0,collisionDetection:t.floatingCollisionDetection??!1,collisionDetectionPadding:t.floatingCollisionDetection?t.floatingCollisionPadding??Em:void 0,[vc]:e.elementIds.portalId(t),className:v.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),Dd(e),e.scopeType==="SmartComponent"?R.classNames:void 0)})}function Xb(t,e){let r=e.fetches.getFetchesForNode(t);return new E({requests:r??[],disabled:e.scopeType==="SmartComponent"?R.isLoading:void 0})}function xR(t,e){if(!G(t))return;let r=new E;if(P.reactComponentForIdentifier(t.codeComponentIdentifier)?.annotations?.framerComponentViewportWidth==="true"){let i=e.simulatedDOM.getComponentViewportContext(t);Object.assign(r,i)}return r}function Fd(t,e,r,o,{className:n,style:i}={}){let a=bR(t,e,o,r,{style:i,className:n}),s=TR(t,e),l=wR(t,e);if(Co(t)&&vr(t)){let c=yR(t,e,r,o),d=Xb(t,e);return{container:a,transition:s,floating:l,fetcher:d,element:c,componentViewport:xR(t,e)}}return{element:a,transition:s,floating:l,link:IR(t,e),fetcher:Xb(t,e)}}var RR=["onTap","onTapStart","onClick","onMouseDown","onMouseUp"],kR=(t,e)=>{if(!Xr(e)||!Wf(t,e))return!1;let r=e.getActions(P);return RR.some(o=>{if(o in r){let n=r[o];return n?n.length>0:!1}return!1})},Kb=je((t,e,r)=>{if(!em(t)||Rr(t))return;if(D(t.cursor)&&J(r)){e.cursor=r.cssVariableDefinitions.create(t,"cursor");return}if(t.cursor&&Qp(t.cursor)){e.cursor=t.resolveValue("cursor",r?.variableOverrides),Xe(t)&&t.hasLinks()&&(e.cursor=void 0,e[Zp]=t.cursor);return}if(!J(r))return;let o=Ot(t)&&r.topLevelVariantsWithGestures[t.id];e.cursor=o||kR(r.treeStore.tree,t)?"pointer":void 0});var Yb=je((t,e)=>{it(t)&&(e.textDecoration="none")});var Qb=je((t,e,r)=>{St(t)&&wo(t)&&r?.renderAsListNodes?.has(t.id)&&(e.listStyle="none",e.margin=0)});var Zb=je((t,e,r)=>{if(!(!Ep(t)||!Ua(t))&&Lp(t)){if(D(t.overscrollBehavior)&&J(r)){e.overscrollBehavior=r.cssVariableDefinitions.create(t,"overscrollBehavior");return}e.overscrollBehavior=t.resolveValue("overscrollBehavior",r?.variableOverrides)}});var ev=je((t,e)=>{as(t)&&(e.scrollMarginTop=H(t.scrollMarginTop)&&t.scrollTargetEnabled&&t.scrollMarginTop>0?t.scrollMarginTop:void 0)});var tv=je((t,e,r)=>{if(!cg(t))return;if(D(t.tapHighlightColor)&&J(r)){e.WebkitTapHighlightColor=r.cssVariableDefinitions.create(t,"tapHighlightColor");return}let o=t.resolveValue("tapHighlightColor",r?.variableOverrides);if(Wa(o)){e.WebkitTapHighlightColor=Gp(o);return}e.WebkitTapHighlightColor=o?Qu.toRgbString(o):void 0});var rv=je((t,e,r)=>{if(!ws(t))return;let o=t.resolveValue("textSelection");e["--selection-color"]=o?.color,e["--selection-background-color"]=o?.backgroundColor});var ov=je((t,e,r)=>{if(Op(t)){if(D(t.userSelect)&&J(r)){e.userSelect=e.WebkitUserSelect=r.cssVariableDefinitions.create(t,"userSelect");return}e.userSelect=e.WebkitUserSelect=Bp(t)?t.resolveValue("userSelect",r?.variableOverrides):void 0}});var nv=je((t,e,r)=>{if(!ih(t)||!J(r)||r.scopeType!=="LayoutTemplate")return;let o=r.treeStore?.tree.getParent(t.id);Be(o)&&(e.viewTransitionName=t.viewTransitionNone===!0?xd(t,r.serializationId,!0):void 0)});var av=je((t,e,r)=>{let o=MR(t,r);e.willChange=o}),iv=`var(${ep}, transform)`;function MR(t,e){if(Is(e?.scopeType)&&(gh(t)&&(ah(t)||lh(t))||e?.scopeType!=="SmartComponent"&&oh(t)&&rh(t.styleAppearEffectTrigger)==="onMount"))return iv;if(!Vn(t)||!Ua(t)||!Ap(t.overflow))return;let r=ef(t)&&t.radius,o=Rp(t)&&t.radiusPerCorner&&(t.radiusBottomLeft||t.radiusBottomRight||t.radiusTopLeft||t.radiusTopRight);if(r||o)return`var(${Zu}, transform)`}var VR=Go(kg,hh,Gg,Kb,pg,jg,mg,Vh,fg,hg,ey,Ch,Yb,Qb,Bh,Zb,df,Ph,ev,rv,Ah,tv,Zg,Hh,Uh,ov,nv,av,_h),Ad=Go(Rg,sf,Eh,Hg,lf,Oh,Mh,cf,Jg,ty,oy,ry,ff,mh,Dh,uf,pf,zh,$h,mf,db),Ld=Go(Wh,Fh,Lh);function DR(t,e){return rt(t)||po(t)||G(t)?"relative":Fe(t)?"fixed":Pa(t)||Bt(e)?"relative":"absolute"}function Ed(t,e,r,o){let n={position:DR(e,t),zIndex:Fe(e)?Gh(e,r):void 0,...o},i={};VR(t,n,r);let a=r.scopeType==="WebPage"||r.scopeType==="LayoutTemplate"||r.nodeRendersWithMotion?.get(t)===!1;return Ad(t,a?n:i,r),qa(t)&&r.scopeType==="SmartComponent"&&Wi(t.html,i),Ld(t,i,r),{css:n,style:Ve(i)?void 0:i}}var ti={opacity:1,rotate:0,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"rgba(0, 0, 0, 0)",boxShadow:"none",filter:"none",WebkitFilter:"none",backdropFilter:"none",WebkitBackdropFilter:"none",mask:"none",WebkitMask:"none",textShadow:"none",scale:1,rotateX:0,rotateY:0,skewX:0,skewY:0,z:0,padding:0};function PR(){let t={},e={},r={},o={},n={},i={};return[[new gg({fillEnabled:!0,fillType:"color",fillColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderEnabled:!0,borderColor:"rgba(0, 0, 0, 0)",borderStyle:"solid"}),t],[new Ug,e],[new Ag,r],[new Kh({codeComponentIdentifier:"framer/Page"}),o],[new Bg,n],[new $g,i]].forEach(([s,l])=>{Ad(s,l,{}),Ld(s,l,{})}),{FrameNode:Object.assign(t,ti),TextNode:Object.assign(e,ti),RichTextNode:Object.assign(r,ti),CodeComponentNode:Object.assign(o,ti),SVGNode:Object.assign(n,ti),ShapeContainerNode:Object.assign(i,ti)}}var sv=PR();function lv(t,e,r){if(!(!r||x(t.__class)||wt(e.style))&&!(!x(e.style)&&!tt(e.style)))for(let o in r){if(x(e.style?.[o])&&x(r[o])||e.style&&o in e.style&&!x(e.style[o])&&!x(r[o]))continue;let n=sv?.[t.__class];if(!n||!(o in n)){x(r[o])&&(r[o]=m`undefined`);continue}let i=n[o];if(x(e.style?.[o])){let a=e.style??{};a[o]=i,e.style=a}x(r[o])&&(r[o]=i)}}function Zo(t,e,r){let o=t.originalid===e?t.id:km(t.id,e);return r.get(o)}function FR(t){let e=t.children?.find(n=>ho(n));if(!e)return;let r=t.itemsOrder?t.itemsOrder.indexOf(e.originalid??e.id):t.children?.indexOf(e);if(!H(r)||r<0||!t.itemsOrder&&t.children&&r===t.children.length-1)return;let o=new Map;return t.itemsOrder?t.itemsOrder.forEach((n,i)=>{if(n===e.originalid)return;let a=i<r?-1e3:1e3;o.set(n,i+a)}):t.children?.forEach((n,i)=>{if(n===e)return;let a=i<r?-1e3:1e3;o.set(n.originalid??n.id,i+a)}),o}function cv(t,e){if(e==="LayoutTemplate"&&Be(t))return FR(t);let r=t.itemsOrder;if(!r||r.length<1)return;let o=new Map;return r.forEach((n,i)=>{o.set(n,i)}),o}var AR=t=>(e,r)=>!r||!t?e:{...e,...r[t]};function mv(t,e,r,o){let{combinedVariableControlMap:n}=t.combineVariableControlMap(r.treeStore.tree,o.inheritedControlMap,P,P.activeBundleHash);e&&(rd(e,t),ER(e,t));let i=Cr(t),a=o.subqueries;Oe(t)&&mt(t)?a=new sl(t,i?void 0:o.subqueries):Xo(t)&&(a=void 0);let s=r.scopeType==="WebPage",l=r.scopeType==="SmartComponent",c=o.inCodeOverride||!x(ll(t,r))||cl(t,r).length>0,d=r.treeStore.tree.get(o.lastRepeaterId),p=r.kitSectionsStructure.addSection(t),u={isAnyVariantAnImage:xt(t),isAnyVariantALink:it(t)&&!nt(t),isAnyVariantAnEffect:jc(t,r.scopeType),isAnyVariantAVariantAppearEffect:Gc(t),isAnyVariantARef:s&&_o(t)||Bt(t)||G(t)&&Oe(d)&&jo(t,d),isAnyVariantATransitionOverride:l&&(Hc(t)||Rc(t)),isAnyVariantOptimizedAppearEffect:_c(t,r),itemsOrderOverrides:{},hiddenInVariants:new Set(o.hiddenInVariants),inCodeOverride:c,inheritedControlMap:n,isAnyVariantFloating:Bt(t),isAnyVariantPaginated:i,identifiers:G(t)?new Set([uv(t)]):void 0,subqueries:a,kitSectionId:p};r.trackingIds.add(t),r.kitSectionsStructure.addCustomizations(t,o.kitSectionId),Dr(t)&&r.formIds.add(t.id),r.scopeType==="LayoutTemplate"&&Xa(t)&&Be(t)&&(u.itemsOrderOverrides[t.id]=cv(t,r.scopeType));let f=Rd(t,r),h=new Map,y=kd(t,r,o,c),C=[],b=Bc(t);for(let K of r.variants){let B=Zo(K,t.id,r.treeStore.tree);if(!B)continue;B.combineVariableControlMap(r.treeStore.tree,o.inheritedControlMap,P,P.activeBundleHash);let ae=r.treeStore.tree.getParent(B.id);if(u.hiddenInVariants.has(K.id))continue;ae&&rd(ae,B);let ke=dv(K),qe=Rd(B,r);if(!It(qe,h.get(K.replicaInfo?.inheritsFrom??"")??f)){let rr=Rr(K);h.set(ke,{value:qe,isGesture:rr})}else(r.scopeType==="WebPage"||r.scopeType==="LayoutTemplate")&&f!==!0&&h.set(ke,{value:f});if(qe===!1){u.hiddenInVariants.add(K.id);continue}it(B)&&!nt(B)&&(u.isAnyVariantALink=!0),xt(B)&&(u.isAnyVariantAnImage=!0),jc(B,r.scopeType)&&(u.isAnyVariantAnEffect=!0),Gc(B)&&(u.isAnyVariantAVariantAppearEffect=!0),_c(B,r)&&(u.isAnyVariantOptimizedAppearEffect=!0),Cr(B)&&(u.isAnyVariantPaginated=!0),G(B)&&u.identifiers?.add(uv(B)),r.trackingIds.add(B);let xe=Bc(B);if(xe){b||=xe;let{stops:rr,info:Tt}=xe;b.stops=Math.max(b?.stops,rr??0),b.info||=Tt}r.scopeType==="WebPage"?_o(B)&&(u.isAnyVariantARef=!0):r.scopeType==="SmartComponent"&&(Th(B)&&(u.isAnyVariantAnEffect=!0),(Hc(B)||Rc(B))&&(u.isAnyVariantATransitionOverride=!0)),Hm(B)&&(u.itemsOrderOverrides[K.id]=cv(B,r.scopeType)),y=y||kd(B,r,o,c),C.push({nodeInVariant:B,variant:K})}x(b)||r.nodesWithAnyGradientFill.set(t.id,b);let{condition:N,classNames:T,classNameExpressions:w}=r.renderFunctions.create(f,h);if(N===!1)return;r.nodeRendersWithMotion.set(t,y);let V=t.parentid?r.renderAsListNodes.get(t.parentid):!1;wo(t)&&Kf(t.htmlTag)&&!V&&r.renderAsListNodes.set(t.id,!0);let F=o?.itemsOrderOverrides?.[r.rootId],{css:_,style:z}=Ed(t,e,r,F?{order:pv(t,F)}:void 0),Z=vr(t),M=lb(t,e,r),he=r.css.addRule(_,t,{container:Z,hasScopingSelector:M}),Ie=Fd(t,r,u,o,{className:he,style:z});r.hitTargets.recordClassName(t,r.rootId,he);let de={link:void 0,container:void 0,element:void 0,floating:void 0,transition:void 0,fetcher:void 0,componentViewport:void 0},ee={variants:void 0,css:void 0};if(Xe(t))for(let K of t.getStylePresetsForCodeGeneration(r.treeStore.tree))r.css.addSharedStyle(K.id);let ue=Z?Ie.container:Ie.element;g(!x(ue),"Target will always be defined if the node needs a container");for(let{nodeInVariant:K,variant:B}of C){let ae=dv(B);if(r.hitTargets.recordClassName(K,B.id,he),Xe(K))for(let dt of K.getStylePresetsForCodeGeneration(r.treeStore.tree))r.css.addSharedStyle(dt.id);let ke=r.treeStore.tree.getParent(K.id),{itemsOrderOverrides:qe}=o,Dt=qe?.[B.id],xe=Ed(K,ke,r,Dt?{order:pv(t,Dt)}:void 0),rr=AR(B.replicaInfo?.inheritsFrom),Tt=to(xe.css,rr(_,ee.css),"css");if(Tt){let dt=Rr(B);ee.css||(ee.css={}),ee.css[B.id]=Tt,r.css.addRule(Tt,K,{variant:B,hasScopingSelector:M,container:Z,gesture:dt?B.gesture:void 0,scope:dt?B.replicaInfo?.inheritsFrom:r.scopeType==="SmartComponent"?B.id:void 0})}r.scopeType==="SmartComponent"&&lv(K,ue,xe.style);let Wr=Fd(K,r,u,o,{className:he,style:ue.style}),or=to(xe.style,rr(z,ee.variants));if(or)if(r.scopeType==="SmartComponent")ee.variants||(ee.variants={}),ee.variants[ae]=or;else{let dt=Z?"container":"element";de[dt]=OR(xe.style,de[dt],ae)}let Pt;for(Pt in Wr){let dt=to(Wr[Pt],rr(Ie[Pt],de[Pt]),"js");if(!dt)continue;de[Pt]||(de[Pt]={[ae]:{}});let te=de[Pt][ae];de[Pt][ae]=tt(te)?Object.assign(te,dt):dt}}let ie=new Set(T);u.isAnyVariantALink&&ie.add(r.linkClassName);let Te=new v.Set(w),st=u.isAnyVariantARef||r.events.relativeOverlayPrimaryTriggers.has(t.id);return E.assign(ue,{variants:ee.variants,className:LR(ue.className,ie,Te,r.imports),ref:ue.ref??(st?r.elementIds.ref(t):ue.ref),[hp]:u.isAnyVariantOptimizedAppearEffect?r.appearIds.create(t.id):void 0}),r.renderConditions.set(t.id,N),{...u,propsForLink:{props:Ie.link,overrides:de.link},propsForElement:{props:Ie.element,overrides:de.element},propsForContainer:{props:Ie.container,overrides:de.container},propsForTransition:{props:Ie.transition,overrides:de.transition},propsForFetcher:{props:Ie.fetcher,overrides:de.fetcher},renderCondition:N,propsForFloating:{props:Ie.floating,overrides:de.floating},propsForComponentViewport:{props:Ie.componentViewport,overrides:de.componentViewport}}}function LR(t,e,r,o){if(e.size===0&&r.size===0)return t;if(r.size===0){let n=Array.from(e).join(" ");return t?ge`${t} ${n}`:n}else{let n=o.addImport("framer",{exportSpecifier:"cx"});return t?v.fn(n,t,...e,...r):v.fn(n,...e,...r)}}function ER(t,e){e.cache.ancestorRepeaterIds=cd(t,t.cache.ancestorRepeaterIds??[])}function dv(t){return Rr(t)?`${t.replicaInfo.inheritsFrom}-${t.gesture}`:t.id}function OR(t,e,r){let o=e??{};return o[r]=o[r]??{},o[r].style=o[r].style??{},Object.assign(o[r].style,t),o}function fv(t,e,r){let o={background:"transparent",height:0,width:0,position:"relative",flexGrow:1,margin:0,marginBottom:Wn(e,r)};for(let n of r.variants){let i=Zo(n,t.id,r.treeStore.tree);if(!i)continue;let a=to({...o,marginBottom:Wn(n,r)},o);!a||Ve(a)||r.css.addRule(a,i,{variant:n})}return r.css.addRule(o,t)}function uv(t){return bn(t)?of:t.codeComponentIdentifier}function pv(t,e){return e.get(t.id)??e.size}var ul=class{constructor(){S(this,"cssWidthCache",new Map);S(this,"heightCache",new Map);S(this,"yPositionCache",new Map);S(this,"verticalStackLayoutInfoCache",new Map);S(this,"gridLayoutInfoCache",new Map);S(this,"computationCache",new Map);S(this,"testing",{getCSSWidthCache:()=>this.cssWidthCache,getHeightCache:()=>this.heightCache})}getCSSWidth(e){return this.cssWidthCache.get(e)}setCSSWidth(e,r){this.cssWidthCache.set(e,r)}getHeight(e){return this.heightCache.get(e)}setHeight(e,r){this.heightCache.set(e,r)}getYPosition(e){return this.yPositionCache.get(e)}setYPosition(e,r){this.yPositionCache.set(e,r)}getVerticalStackLayoutInfo(e){return this.verticalStackLayoutInfoCache.get(e)}setVerticalStackLayoutInfo(e,r){this.verticalStackLayoutInfoCache.set(e,r)}getGridLayoutInfo(e){return this.gridLayoutInfoCache.get(e)}setGridLayoutInfo(e,r){this.gridLayoutInfoCache.set(e,r)}memo(e,r){if(this.computationCache.has(e))return this.computationCache.get(e);let o=r();return this.computationCache.set(e,o),o}};var Od=class{constructor(){S(this,"heightNodes",new Set)}startComputingHeightFor(e){this.heightNodes.add(e)}isComputingHeightFor(e){return this.heightNodes.has(e)}finishComputingHeightFor(e){this.heightNodes.delete(e)}};function BR(t,e){return(r,o,n=void 0)=>{if(Lt(r))return e.createComputedValue(r,o,n);if(ce(r))return t.create(r);At(r,"all dynamic values should be handled above")}}function hv(t,e,r){return{tree:t,cache:new ul,workInProgress:new Od,getVariableBinding:BR(e,r)}}var q=class extends Error{};function X(t,e){let r=Math.round(t*1e4)/1e4;return{type:"css-const",expr:e?`${r}${e}`:`${r}`,value:t,unit:e}}var pl={"+":"-","-":"+","*":"/","/":"*"};function fe(t,e,r){if(e.type==="css-const"&&r.type==="css-const"){if(e.unit===r.unit){if(t==="+")return X(e.value+r.value,e.unit);if(t==="-")return X(e.value-r.value,e.unit);if(t==="min")return X(Math.min(e.value,r.value),e.unit);if(t==="max")return X(Math.max(e.value,r.value),e.unit)}else if(ri(t)&&(e.value===0||r.value===0))return r.value!==0?r:e;if(t==="*"&&(!e.unit||!r.unit))return X(e.value*r.value,e.unit||r.unit);if(t==="/"&&!r.unit)return X(e.value/r.value,e.unit)}if(ri(t)){if(r.type==="css-const"&&r.value===0)return e;if(e.type==="css-const"&&e.value===0)return r}else if(ml(t)){if(r.type==="css-const"&&r.value===1)return e;if(e.type==="css-const"&&e.value===1)return r}else if(t==="min"||t==="max"){if(e.type==="css-op"&&e.op===t&&gv(e,r))return e;if(r.type==="css-op"&&r.op===t&&gv(r,e))return r;if(It(e.expr,r.expr))return e}e.type==="css-op"&&e.right.type==="css-const"&&(ri(t)&&ri(e.op)?(r=fe(t==="+"?e.op:pl[e.op],r,e.right),e=e.left):ml(t)&&ml(e.op)&&(r=fe(t==="*"?e.op:pl[e.op],r,e.right),e=e.left));let o;if(ri(t))r.type==="css-const"&&r.value<0&&(t=pl[t],r=X(-r.value,r.unit)),t==="+"?o=ge`${en(e)} + ${r.expr}`:t==="-"?r.type==="css-op"&&!fl(r.op)?o=ge`${en(e)} - (${r.expr})`:o=ge`${en(e)} - ${en(r)}`:At(t);else if(ml(t)){if(r.type==="css-const"&&r.value<1){let n=X(1/r.value,r.unit);n.expr.length<r.expr.length&&(t=pl[t],r=n)}t==="/"&&r.type==="css-op"&&!fl(r.op)?o=ge`${en(e)} / (${r.expr})`:o=ge`${en(e)} ${t} ${en(r)}`}else fl(t)?o=ge`${t}(${e.expr}, ${r.expr})`:At(t,`unhandled op ${t}`);return{type:"css-op",expr:o,op:t,left:e,right:r}}function hl(t){switch(t.type){case"number-const":return X(t.value,"px");case"number-template":return Do(t.expr);default:At(t)}}function Do(t){return{type:"css-template",expr:t}}function ri(t){return t==="+"||t==="-"}function ml(t){return t==="*"||t==="/"}function fl(t){return t==="min"||t==="max"}function gv(t,e){return It(t.left.expr,e.expr)||It(t.right.expr,e.expr)}function en(t){return t.type==="css-op"&&ri(t.op)?ge`(${t.expr})`:t.expr}function gl(t){return t.type==="css-template"||t.type==="css-const"||t.type==="css-op"&&fl(t.op)?t.expr:ge`calc(${t.expr})`}function zR(t,e,r,o,n,i){let a=e??ng;if(!i)return!0;let s=t.filters.filter(l=>{if(!l.itemKey)return!1;let c=i.properties[l.itemKey];return!(!c||c.type!=="boolean"&&l.transforms.length===0)});return s.length===0?!0:s[a==="all"?"every":"some"](l=>{let c=l.itemKey;g(c!==null,"itemKey should not be null");let d=i.properties[c];g(d,"control should exist");let p=r(c),u=o.getVariableControlByKey(c);return l.transforms.reduce((f,h)=>lm(f,h,o,n,u,void 0,void 0),p)})}function yv(t,e,r,o,n,i){return t?r.filter(a=>zR(t,e,s=>a[s],o,n,i)):r}function $R(t,e){return e?Array.from(t).reverse():t}function UR(t,e){if(e===void 0||e===0)return t;let r=Array.from(t);return r.splice(0,e),r}function WR(t,e){return t.length<=e?t:t.slice(0,e)}function Sv(t,e,r,o,n=15){if(n&1&&(e=yv(t.collectionFilters,t.collectionFiltersOperator,e,t.cache,r,o)),n&2&&(e=$R(e,t.collectionReverse)),n&4&&(e=UR(e,t.collectionStartOffset)),n&8){let i=t.collectionLimit??1/0,a=t.collectionPaginationPageSize??1/0,s=Math.min(i,a);e=WR(e,s)}return e}var Qt=1e3,Cv=Symbol("Affects Layout: Indeterminate");function yl(t){return t===Cv}function ro(t,e,r,o){return Nt(t)||Za(t,e)&&Ho(t)||Qa(r,t)&&sr(t)||Mi(t)&&t.visible===!1?!1:Mi(t)&&D(t.visible)?o?t.isVisible():Cv:!0}function Qe(t){if(!Ii(t))return 0;if(D(t.padding))throw new q;return t.paddingPerSide?t.paddingTop??0:t.padding??0}function Ut(t){if(!Ii(t))return 0;if(D(t.padding))throw new q;return t.paddingPerSide?t.paddingBottom??0:t.padding??0}function Jt(t){return D(t)?0:t??0}var HR=[];function Po(t){let e=(Xa(t)?t.getChildrenInVisualOrder():t.children)??HR;if(Oe(t)){let r=t.collectionRepeatedItemId?e.findIndex(i=>i.id===t.collectionRepeatedItemId):0,o=e[r];if(!o)return e;let n=GR(t);return e.slice(0,r).concat(Array(n).fill(o)).concat(e.slice(r+1))}return e}function GR(t){if((t.collectionFilters?.filters?.length??0)>0)return 1;let e=P.dataForIdentifier(t.dataIdentifier),r=wf(void 0,e),o=Object.keys(r).length,n=Array(o).fill({});return Sv(t,n,void 0,e,14).length}function Hi(t){let e=t.resolveValue("fillImage"),r=kp(e)?e.src:e;if(!r)return;let o=Ff(r);if(!(!o||!Number.isFinite(o.width)||!Number.isFinite(o.height)||o.width<=0||o.height<=0))return o.width/o.height}function Sl(t,e){let r=t.widthType===0,o=bo(t)&&t.usesDOMRectCached()&&t.cache.getRawDOMRect(t.id)!==null;if(!(!r&&!o))return e.tree.getRect(t).width}var vv=";";function zd(t,e){return`${t}${vv}${e}`}function _R(t){let[e,r]=t.split(vv);return g(r!==void 0,"parseCellCoordinate(), satisfying TypeScript: columnIndex must exist: "+t),[Number(e),Number(r)]}function bv(t,e,r,o){let n=0;for(let i=0;i<r;i++){let a=zd(e,i);if(t.has(a)){n=0;continue}if(n++,n!==o)continue;let l=i-(o-1);return g(l>=0,"getColumnIndexForItem(), column index should be at least 0"),l}return-1}function jR(t,e,r,o,n,i,a){let s=o+(i-1);g(a>s,"fillCellsForItem(), column count has to be larger than maxColumnIndex");let l=r+(n-1);for(let c=o;c<=s;c++)for(let d=r;d<=l;d++){let p=zd(d,c);e.set(p,t)}}function JR(t,e){return!zo(t)||D(t.gridItemColumnSpan)?1:t.gridItemColumnSpan==="all"?e:Math.min(t.gridItemColumnSpan??1,e)}function Cl(t,e){return!zo(t)||e.gridRowHeightType==="fit"||D(t.gridItemRowSpan)?1:t.gridItemRowSpan??1}var Bd=class{constructor(e,r,o,n){this.gridLayout=e;this.rowCount=r;this.columnCount=o;this.filledRowCount=n;S(this,"coordinateCache")}getGridItem(e,r){let o=zd(e,r);return this.gridLayout.get(o)??null}findCoordinates(e){if(!this.coordinateCache){this.coordinateCache=new Map;for(let[r,o]of this.gridLayout){let[n,i]=_R(r),a=this.coordinateCache.get(o);(!a||n<a.rowIndex||i<a.columnIndex)&&this.coordinateCache.set(o,{rowIndex:n,columnIndex:i})}}return this.coordinateCache.get(e)??null}isEmpty(){return this.gridLayout.size===0}};function Iv(t,e){let r=t.gridColumnCount;if(!H(r))return null;let o=new Map,n=0,i=-1;for(let l of Po(t)){if(!ro(l,t,e,!0))continue;let c=JR(l,r),d=Cl(l,t),p=bv(o,n,r,c);for(;p===-1;)n++,p=bv(o,n,r,c);jR(l.id,o,n,p,d,c,r);let u=n+(d-1);i=Math.max(i,u)}let a=i+1,s=Math.max(t.gridRowCount??0,a);return new Bd(o,s,r,a)}function tn(t,e){let r=e.cache.getGridLayoutInfo(t.id);if(r)return r;let o=Iv(t,e.tree);if(o===null)throw new q;return e.cache.setGridLayoutInfo(t.id,o),o}function A6(t,e){return Iv(t,e)?.filledRowCount}var qR={type:"number-const",value:0},XR={type:"number-const",value:1/0},KR={type:"number-const",value:Qt};function j(t){return t===0?qR:t===1/0?XR:t===Qt?KR:{type:"number-const",value:ek(t)}}function k(t,...e){return bl(t,0,e.length,e)}function bl(t,e,r,o){gi(0<=e&&e<=r&&r<=o.length,"start and end must be within the bounds of operands");let n=r-e;if(n===0)return null;if(n===1){let c=o[e];return Ta(c)?j(c):c}let{hasTemplateOperands:i,operationResult:a}=YR(e,r,o,t);if(!i)return j(a);let s=QR(e,r,o),l=t==="min"||t==="max"?v.fn(m`Math.${new v(t)}`,...s):new v(`(${re(s,` ${t} `)})`);return Gi(l,a,!0)}function YR(t,e,r,o){let n=!1,i;for(let a=t;a<e;a++){let s=r[a],l;Ta(s)?l=s:s.type==="number-const"?l=s.value:s.type==="number-template"?(n=!0,l=Wt(s)):At(s),x(i)?i=l:i=ZR(o,i,l)}return gi(i!==void 0,"resultEstimate must be computed after walking over all operands"),{hasTemplateOperands:n,operationResult:i}}function QR(t,e,r){let o=[];for(let n=t;n<e;n++){let i=r[n];Ta(i)?o.push(m`${i}`):i.type==="number-const"?o.push(m`${i.value}`):o.push(i.expr)}return o}function Gi(t,e,r=!1){return{type:"number-template",expr:r?t:m`(${t})`,impreciseEstimate:e}}function ZR(t,e,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":return e/r;case"min":return Math.min(e,r);case"max":return Math.max(e,r);default:At(t)}}function ek(t){return Math.round(t*1e4)/1e4}function Wt(t){return t.type==="number-const"?t.value:t.impreciseEstimate}var $d=class{constructor(e,r,o,n,i){this.columns=e;this.nodeToAccurateCoordinateMap=r;this.nodeToRoughCoordinateMap=o;this.gap=n;this.contentHeight=i;S(this,"frToPxCache",new Map)}walkColumn(e,r){if(this.columns[e])for(let o of this.columns[e])r(o.nodeId)}getStackItem(e,r){return this.columns[e]?.[r]?.nodeId??null}findCoordinates(e){return this.findAccurateCoordinates(e)??this.findRoughCoordinatesOfConditionallyVisibleNode(e)}findAccurateCoordinates(e){return this.nodeToAccurateCoordinateMap.get(e)??null}findRoughCoordinatesOfConditionallyVisibleNode(e){return this.nodeToRoughCoordinateMap.get(e)??null}getFrToPxForColumn(e){let r=this.columns[e];if(!r)return null;if(!this.frToPxCache.has(e)){let o=[],n=[];for(let d of r)d.type==="regular"?o.push(d):d.type==="fr"?n.push(d):At(d);let i=o.reduce((d,p)=>k("+",d,p.getHeight()),j(0)),a=this.gap*(r.length-1),s=k("-",this.contentHeight,k("+",i,a)),l=n.reduce((d,p)=>d+p.frUnits,0),c=k("/",s,Math.max(l,1));for(n=n.sort((d,p)=>Wt(p.getMinHeightPerFr())-Wt(d.getMinHeightPerFr()));n[0]&&Wt(n[0].getMinHeightPerFr())>Wt(c);)s=k("-",s,n[0].getMinHeight()),l-=n[0].frUnits,c=k("/",s,Math.max(l,1)),n.shift();for(n=n.sort((d,p)=>Wt(d.getMaxHeightPerFr())-Wt(p.getMaxHeightPerFr()));n[0]&&Wt(n[0].getMaxHeightPerFr())<Wt(c);)s=k("-",s,n[0].getMaxHeight()),l-=n[0].frUnits,c=k("/",s,Math.max(l,1)),n.shift();this.frToPxCache.set(e,k("max",j(0),c))}return this.frToPxCache.get(e)??null}};function vl(t,e,r,o,n){let i=e.cache.getVerticalStackLayoutInfo(t.id);if(i)return i;let a=tk(t,e,r,o,n);return e.cache.setVerticalStackLayoutInfo(t.id,a),a}function tk(t,e,r,o,n){let i=Ud(t),a=bt(i),s=k("-",r(t),Qe(t)+Ut(t)),l=Wt(s),c=new Map,d=new Map,p=[],u=0;for(let f of Po(t)){if(!(Ke(f)&&ct(f)))continue;let h=ro(f,t,e.tree,!1);if(h===!1)continue;if(yl(h)){d.set(f.id,{columnIndex:Math.max(p.length-1,0),columnItemIndex:Math.max(p[p.length-1]?.length??0,0)});continue}let y=rk(f,e,r,o,n);if(t.stackWrapEnabled){let b=Wt(y.type==="fr"?y.getMinHeight():y.getHeight());Math.ceil(u+a+b)>Math.ceil(l)||p.length===0?(p.push([y]),u=b):(p[p.length-1].push(y),u+=a+b)}else p[0]=p[0]??[],p[0].push(y);c.set(f.id,{columnIndex:p.length-1,columnItemIndex:p[p.length-1].length-1})}return new $d(p,c,d,a,s)}function rk(t,e,r,o,n){if(t.heightType===3){let i={nodeId:t.id,type:"fr",frUnits:t.height,getMinHeight:()=>e.cache.memo(`stack-getMinHeight-${t.id}`,()=>o(t)),getMaxHeight:()=>e.cache.memo(`stack-getMaxHeight-${t.id}`,()=>n(t)),getMinHeightPerFr:()=>e.cache.memo(`stack-getMinHeightPerFr-${t.id}`,()=>k("/",i.getMinHeight(),i.frUnits)),getMaxHeightPerFr:()=>e.cache.memo(`stack-getMaxHeightPerFr-${t.id}`,()=>k("/",i.getMaxHeight(),i.frUnits))};return i}else return{nodeId:t.id,getHeight:()=>e.cache.memo(`stack-getHeight-${t.id}`,()=>r(t)),type:"regular"}}function Ud(t){return Ma(t)?Jt(t.gap):0}function Tv(t,e){if(t.textFitViewBoxSize)throw new q;let r=t.widthType!==2,o=0;for(let[n,i]of t.getProsemirrorTextBlocks(!1).entries()){let a,[s,l]=ik(i,e);if(l==="px")a=s;else{let p=l==="%"?s/100:s;a=ok(i,e)*p}let c=0;n>0&&(c=ak(i,t,e)??0);let d=1;if(r){let p=i.attrs.tag;p==="h1"||p==="h2"||p==="h3"||p==="h4"||p==="h5"||p==="h6"?d=1:p==="p"||p==="div"?d=5:At(p)}o+=c+a*d}return o}function ok(t,e){let r=nk(t,e);return t.descendants(o=>{if(!ja(o))return;let i=o.marks.find(vo)?.attrs.inlineStyles.fontSize;if(D(i))throw new q;if(x(i))return;let[a,s="px"]=Ic(i)?i:[i],l=Tc(a,s,"px");l>r&&(r=l)}),r}function nk(t,e){if(qr(t)){let r=t.attrs.textStylePreset,o=e.getNodeWithTrait(r,fo);if(o){let[n,i]=bi(o.fontSize)?go(o.fontSize):[o.fontSize,"px"];return i==="rem"?Ku(n*La,0):n}}if(!x(t.attrs.inlineStyles.fontSize)){let r=t.attrs.inlineStyles.fontSize;if(D(r))throw new q;let[o,n="px"]=Ic(r)?r:[r];return Tc(o,n,"px")}return go(Nc.fontSize)[0]}function ik(t,e){if(qr(t)){let r=t.attrs.textStylePreset,o=e.getNodeWithTrait(r,fo);if(o)return o.lineHeight}return x(t.attrs.blockStyles.lineHeight)?Nc.lineHeight:t.attrs.blockStyles.lineHeight}function ak(t,e,r){if(qr(t)){let o=t.attrs.textStylePreset,n=r.getNodeWithTrait(o,fo);if(n)return n.paragraphSpacing}return e.paragraphSpacing}var sk=me("simulateHeight"),lk=200;function Nv(t,e){try{let r=ve(t,e);return r.type==="number-const"?r.value:r.expr}catch(r){if(r instanceof q)return;sk.reportError(r,{nodeId:t.id});return}}function ve(t,e){let r=e.cache.getHeight(t.id);if(r!==void 0)return r;if(e.workInProgress.isComputingHeightFor(t.id))throw new Error("Detected a circular walk in simulateHeight(): we\u2019re entering a node which is already being computed. This would result in a call stack overflow. Exiting early.");let o;try{e.workInProgress.startComputingHeightFor(t.id),o=ck(t,e)}finally{e.workInProgress.finishComputingHeightFor(t.id)}return e.cache.setHeight(t.id,o),o}function ck(t,e){if(!En(t))throw new q;let r=e.tree.getNodeParent(t);if(Fe(t))return j(Qt);if(g(Ke(t)&&ct(t),"Can\u2019t calculate the height on a node when it doesn\u2019t have size information"),Tn(t)){let n=e.tree.getRect(t).height;return Gi(m`${R.componentViewport}?.height || ${n}`,n)}if(Dc(t))return $e.startFromRowHeightMultipliedBySpan(t,e).getWithConstraints();if(!Dn(t,r)&&St(t)&&t.top!==null&&t.bottom!==null)return(sr(t)?$e.startFromFixedValue(j(Qt),t,e):$e.startFromParentOuterHeight(t,e)).op((i,a)=>{let s=a.top,l=a.bottom;return g(s!==null&&l!==null,"Satisfying TypeScript"),k("-",i,j(s+l))}).getWithConstraints();if(t.heightType===0)return $e.startFromFixedValue(j(t.height),t,e).getWithConstraints();if(t.heightType===1){g(r,"A node can\u2019t have a % height without a parent");let n;return sr(t)?n=$e.startFromFixedValue(j(Qt),t,e):Ho(t)?n=$e.startFromParentOuterHeight(t,e):Et(r)&&zo(t)?n=$e.startFromRowHeightMultipliedBySpan(t,e):n=$e.startFromParentInnerHeight(t,e),n.op((i,a)=>k("*",i,j(a.height))).getWithConstraints()}if(t.heightType===4)return $e.startFromFixedValue(j(t.height*Qt),t,e).getWithConstraints();if(t.heightType===3){if(g(!Ho(t)&&!sr(t),"FractionOfFreeSpace height is not supported for fixed or absolute node"),g(r,"A node can\u2019t have a fractional height without a parent"),!_r(r)&&Et(r)){let n=Il(t,e);if(!n)throw new q;return n}if(g(_r(r),"A node can have a fractional height only if it\u2019s inside a stack"),g(r.stackDirection,"A stack must have a direction defined"),D(r.stackDirection))throw new q;if(r.stackDirection==="horizontal")return $e.startFromParentInnerHeight(t,e).op((n,i)=>k("*",n,j(i.height))).getWithConstraints();if(r.stackDirection==="vertical"){g(Ke(r)&&ct(r),"A stack must have a size and size-dimension type");let n=vl(r,e,l=>ve(l,e),l=>Tl(l,e),l=>Nl(l,e)),i=n.findCoordinates(t.id);g(i,"Node must be found in stack");let a=n.getFrToPxForColumn(i.columnIndex);g(a,"frHeight must be available for column");let s=k("*",a,j(t.height));return $e.startFromFixedValue(s,t,e).getWithConstraints()}$(r.stackDirection)}if(t.heightType===2){let n=Il(t,e);if(!n)throw new q;return n}if(t.heightType===5){if(!xt(t))throw new q;let n=Hi(t),i=Sl(t,e),a=x(i)||x(n)?t.height:Math.round(i*(1/n));return $e.startFromFixedValue(j(a),t,e).getWithConstraints()}$(t.heightType)}var oo,_i,oi,ji,Zt,Wd,Hd,wv,Gd,qt=class qt{constructor(e,r,o,n){W(this,oo);W(this,_i);W(this,oi);W(this,ji);ne(this,oo,e),ne(this,_i,r),ne(this,oi,o),ne(this,ji,n)}static startFromFixedValue(e,r,o){return new qt(e,()=>{var i,a;let n=o.tree.getNodeParent(r);if(g(n,"Can\u2019t calculate the parent height on a node without a parent"),g(Ke(n)&&ct(n),"Can\u2019t calculate the parent height on a node when a parent doesn\u2019t have size information"),Et(n)){let s=Ze(i=qt,Zt,Wd).call(i,r,n,o);return Ze(a=qt,Zt,Hd).call(a,s,r,n)}else return ve(n,o)},r,o)}static startFromParentOuterHeight(e,r){let o=r.tree.getNodeParent(e);g(o,"Can\u2019t call startFromParentOuterHeight() on a node without a parent");let n=ve(o,r);return new qt(n,()=>n,e,r)}static startFromParentInnerHeight(e,r){let o=r.tree.getNodeParent(e);g(o,"Can\u2019t call startFromParentInnerHeight() on a node without a parent");let n=k("-",ve(o,r),Qe(o)+Ut(o));return new qt(n,()=>n,e,r)}static startFromRowHeightMultipliedBySpan(e,r){var a,s;let o=r.tree.getNodeParent(e);g(o&&Et(o),"Can\u2019t call startFromColumnHeightMultipliedBySpan() if the node isn\u2019t inside a grid");let n=Ze(a=qt,Zt,Wd).call(a,e,o,r),i=Ze(s=qt,Zt,Hd).call(s,n,e,o);return new qt(i,()=>i,e,r)}op(e){return ne(this,oo,e(I(this,oo),I(this,oi))),this}getWithConstraints(){var e;return ne(this,oo,Ze(e=qt,Zt,wv).call(e,I(this,oo),I(this,oi),I(this,ji),I(this,_i))),I(this,oo)}};oo=new WeakMap,_i=new WeakMap,oi=new WeakMap,ji=new WeakMap,Zt=new WeakSet,Wd=function(e,r,o){if(g(r.gridRowHeightType!==void 0,"A grid node must have gridRowHeightType defined"),r.gridRowHeightType==="fixed")return g(r.gridRowHeight!==void 0,"A fixed-height grid node must have gridRowHeight defined"),j(r.gridRowHeight);if(r.gridRowHeightType==="fit"){let n=tn(r,o);if(n.isEmpty())return j(0);let i=n.findCoordinates(e.id);g(i,"Node must be found in the grid layout");let a=i.rowIndex;return xv(o,n,a)}else if(r.gridRowHeightType==="auto"){let n=ve(r,o),i=k("-",n,Qe(r)+Ut(r)),a=tn(r,o).rowCount,s=Jt(r.gap),l=bt(s),c=(a-1)*l;return k("/",k("-",i,c),a)}else $(r.gridRowHeightType)},Hd=function(e,r,o){let n=Cl(r,o),i=Jt(o.gap),a=bt(i);return k("+",k("*",e,n),a*(n-1))},wv=function(e,r,o,n){var a,s;let i=e;return Io(r)&&(r.maxHeight&&(i=Ze(a=qt,Zt,Gd).call(a,"maxHeight",i,r,o,n)),r.minHeight&&(i=Ze(s=qt,Zt,Gd).call(s,"minHeight",i,r,o,n))),i},Gd=function(e,r,o,n,i){let a=e==="minHeight"?"max":"min",[s,l]=Ti(o[e]);if(l==="%"){let c=n.tree.getNodeParent(o);if(g(c,"parentNode must exist for a node with percentage min-max heights"),ct(c)&&c.heightType===2)return r;let d=i();return k(a,r,k("*",d,s/100))}else{if(l==="px")return k(a,r,s);if(l==="vh")return k(a,r,Qt*s/100);$(l)}},W(qt,Zt);var $e=qt;function Il(t,e){return e.cache.memo(`autoHeight-${t.id}`,()=>dk(t,e))}function dk(t,e){if(Xe(t)){let r=Tv(t,e.tree);return $e.startFromFixedValue(j(r),t,e).getWithConstraints()}if(G(t)){let r=t.getIntrinsicSize(P).height??lk;return $e.startFromFixedValue(j(r),t,e).getWithConstraints()}if(_r(t)){if(g(t.stackDirection,"A stack must have a direction defined"),D(t.stackDirection))throw new q;if(t.stackDirection==="horizontal"){if(t.stackWrapEnabled)throw new q;{let r=uk(t,e);return $e.startFromFixedValue(r,t,e).op((o,n)=>k("+",o,Qe(n)+Ut(n))).getWithConstraints()}}else if(t.stackDirection==="vertical"){let r=pk(t,e),o=mk(t,e,r);return $e.startFromFixedValue(o,t,e).op((n,i)=>k("+",n,Qe(i)+Ut(i))).getWithConstraints()}else $(t.stackDirection)}if(Et(t)){if(g(t.gridColumnCount!==void 0,"A grid node must have gridColumnCount"),t.gridColumnCount==="auto-fill")throw new q;if(H(t.gridColumnCount)){g(t.gridRowHeightType!==void 0,"A grid must have gridRowHeightType defined");let r=tn(t,e);if(t.gridRowHeightType==="fixed"){g(t.gridRowHeight!==void 0,"A node with gridRowHeightType: fixed must have gridRowHeight defined");let o=r.rowCount,n=Jt(t.gap),i=bt(n),a=(r.rowCount-1)*i,l=t.gridRowHeight*o+a;return $e.startFromFixedValue(j(l),t,e).op((c,d)=>k("+",c,Qe(d)+Ut(d))).getWithConstraints()}else if(t.gridRowHeightType==="fit"){let o=j(0);for(let l=0;l<r.rowCount;l++){let c=xv(e,r,l);o=k("+",o,c)}let n=Jt(t.gap),i=bt(n),a=(r.rowCount-1)*i,s=k("+",o,a);return $e.startFromFixedValue(s,t,e).op((l,c)=>k("+",l,Qe(c)+Ut(c))).getWithConstraints()}else if(t.gridRowHeightType==="auto"){let o=j(0);for(let c=0;c<r.rowCount;c++)for(let d=0;d<r.columnCount;d++){let p=r.getGridItem(c,d);if(!p)continue;let u=e.tree.getNode(p);if(g(u,"Can\u2019t find grid item in the tree"),!Ke(u)||!ct(u))continue;let f;u.heightType===1||Dc(u)?f=Il(u,e)??j(0):f=ve(u,e);let h=Cl(u,t);if(h>1){let y=Jt(t.gap),b=bt(y)*(h-1);f=k("/",k("-",f,b),h)}o=k("max",o,f)}let n=k("*",o,r.rowCount),i=Jt(t.gap),a=bt(i),s=(r.rowCount-1)*a,l=k("+",n,s);return $e.startFromFixedValue(l,t,e).op((c,d)=>k("+",c,Qe(d)+Ut(d))).getWithConstraints()}else $(t.gridRowHeightType)}$(t.gridColumnCount)}return null}function uk(t,e){let r=j(0);for(let o of t.children??[])!Ke(o)||!ct(o)||ro(o,t,e.tree,!0)&&(o.heightType===1||o.heightType===3||(r=k("max",r,ve(o,e))));return r}function pk(t,e){if(Ke(t)&&Io(t)&&t.maxHeight!==void 0&&t.stackWrapEnabled){let r=Nl(t,e),o=k("-",r,Qe(t)+Ut(t));return Wt(o)}return 1/0}function mk(t,e,r){let o=Ud(t),n=bt(o),i=[];for(let s of Po(t)){if(!Ke(s)||!ct(s)||!ro(s,t,e.tree,!0))continue;let l;switch(s.heightType){case 3:l=Tl(s,e);break;case 1:l=j(0);break;case 0:case 2:case 4:case 5:l=ve(s,e);break;default:$(s.heightType)}let c=i[i.length-1]??j(0),d=k("+",c,n,l);Math.ceil(Wt(d))>Math.ceil(r)||i.length===0?i.push(l):i[i.length-1]=d}return k("max",...i)??j(0)}function xv(t,e,r){let o=j(0);for(let n=0;n<e.columnCount;n++){let i=e.getGridItem(r,n);if(!i)continue;let a=t.tree.getNode(i);if(g(a,"Can\u2019t find grid item in the tree"),!Ke(a)||!ct(a))continue;let s=a.heightType===1?Il(a,t)??j(0):ve(a,t);o=k("max",o,s)}return o}function Tl(t,e){let r=j(0);return Ke(t)?$e.startFromFixedValue(r,t,e).getWithConstraints():r}function Nl(t,e){let r=j(1/0);return Ke(t)?$e.startFromFixedValue(r,t,e).getWithConstraints():r}var fk=me("simulateCSSWidth");function Mv(t,e){try{let r=Ji(t,e);return gl(r)}catch(r){if(r instanceof q)return;fk.reportError(r,{nodeId:t.id});return}}function Ji(t,e){let r=e.cache.getCSSWidth(t.id);if(r)return r;let o=hk(t,e);return e.cache.setCSSWidth(t.id,o),o}function hk(t,e){if(!En(t))throw new q;let r=e.tree.getNodeParent(t);if(Fe(t))return X(100,"vw");if(g(Ke(t)&&ct(t),`Can\u2019t calculate the width on a node ${t.id} when it doesn\u2019t have size information`),e.tree.isGroundNode(t)){if(Be(t)&&pe(e.tree.getScopeNodeFor(t)))return X(100,"vw");if(Tn(t)||Be(t)){let n=X(100,"vw");return Do(m`${R.componentViewport}?.width || ${n.expr}`)}else{let n=Sl(t,e);if(x(n))throw new q;return X(n,"px")}}if(Nm(t))return Mt.startFromColumnWidthMultipliedBySpan(t,e).getWithConstraints();if(!Dn(t,r)&&St(t)&&t.left!==null&&t.right!==null)return Mt.startFromParentOuterWidth(t,e).op((n,i)=>{let a=i.left,s=i.right;return g(a!==null&&s!==null,"Satisfying TypeScript"),fe("-",n,X(a+s,"px"))}).getWithConstraints();if(Bm(t)&&St(t)&&H(t.aspectRatio)&&fh(t)==="width"){let n=ve(t,e),i=fe("*",hl(n),X(t.aspectRatio));return Mt.startFromRawValue(i,t,e).getWithConstraints()}if(t.widthType===0)return Mt.startFromRawValue(X(t.width,"px"),t,e).getWithConstraints();if(t.widthType===1){g(r,"A node can\u2019t have a % width without a parent");let n;return sr(t)?n=Mt.startFromRawValue(X(100,"vw"),t,e):Ho(t)?n=Mt.startFromParentOuterWidth(t,e):Et(r)?n=Mt.startFromColumnWidthMultipliedBySpan(t,e):n=Mt.startFromParentInnerWidth(t,e),n.op((i,a)=>fe("*",i,X(a.width))).getWithConstraints()}if(t.widthType===3){let n=e.tree.getNodeParent(t);if(g(n,"A node can\u2019t have a fractional width without a parent"),Et(n))return Mt.startFromColumnWidthMultipliedBySpan(t,e).getWithConstraints();if(g(_r(n),"A node can have a fractional width only if it\u2019s inside a stack"),g(n.stackDirection,"A stack must have a direction defined"),n.stackDirection==="horizontal")return Rv(t,n.stackWrapEnabled??!1,e);if(n.stackDirection==="vertical")return kv(t,e);if(D(n.stackDirection)){let i=Rv(t,n.stackWrapEnabled??!1,e),a=kv(t,e);if(It(i,a))return i;let s=e.getVariableBinding(n.stackDirection,n);if(!s)throw new q;let l=m`${s} === "row"`,c=m`${l} ? ${gl(i)} : ${gl(a)}`;return Do(c)}$(n.stackDirection)}if(t.widthType===2){if(Io(t)&&t.maxWidth){let[n,i]=Ti(t.maxWidth);return X(n,i)}throw new q}if(t.widthType===4){let n=X(t.width*100,"vw");return Mt.startFromRawValue(n,t,e).getWithConstraints()}if(t.widthType===5){if(!xt(t))throw new q;let n=Hi(t),i=ve(t,e),a=x(i)||x(n)?X(t.width,"px"):fe("*",hl(i),X(n));return Mt.startFromRawValue(a,t,e).getWithConstraints()}$(t.widthType)}function Rv(t,e,r){return e?Mt.startFromParentInnerWidth(t,r).getWithConstraints():Mt.startFromParentInnerWidth(t,r).subtractSiblingWidths().getWithConstraints()}function kv(t,e){return Mt.startFromParentInnerWidth(t,e).op((r,o)=>fe("*",r,X(o.width))).getWithConstraints()}var ye,ni,dr,Fo,ur,Vv,Dv,_d,jd,er=class er{constructor(e,r,o,n){W(this,ye);W(this,ni);W(this,dr);W(this,Fo);ne(this,ye,e),ne(this,ni,r),ne(this,dr,o),ne(this,Fo,n)}static startFromRawValue(e,r,o){return new er(e,()=>{let n=o.tree.getNodeParent(r);return g(n,"Can\u2019t calculate the parent width if the node doesn\u2019t have a parent"),Ji(n,o)},r,o)}static startFromParentOuterWidth(e,r){let o=r.tree.getNodeParent(e);g(o,"Can\u2019t call createFromParentWidth() if the node doesn\u2019t have a parent");let n=Ji(o,r);return new er(n,()=>n,e,r)}static startFromParentInnerWidth(e,r){var i;let o=r.tree.getNodeParent(e);g(o,"Can\u2019t call createFromParentWidthMinusPaddings() if the node doesn\u2019t have a parent");let n=Ji(o,r);return n=Ze(i=er,ur,_d).call(i,n,o,r),new er(n,()=>n,e,r)}static startFromColumnWidthMultipliedBySpan(e,r){var a,s;let o=r.tree.getNodeParent(e);g(o&&Et(o),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node isn\u2019t inside a grid"),g(zo(e),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node doesn\u2019t have grid item layout");let n=Ze(a=er,ur,Vv).call(a,o,r),i=Ze(s=er,ur,Dv).call(s,n,o,e.gridItemColumnSpan??1,r);return new er(i,()=>i,e,r)}subtractSiblingWidths(){let e=I(this,Fo).tree.getNodeParent(I(this,dr));g(e&&_r(e),"Can\u2019t call subtractSiblingWidths() if the node isn\u2019t inside a stack");let r=[],o=[],n=[],i=[],a=[],s=0;for(let p of Po(e)){let u=ro(p,e,I(this,Fo).tree,!1);if(u!==!1&&!yl(u))switch(g(Ke(p)&&ct(p),"It\u2019s impossible to have a regular visible node without width/height/widthType/heightType fields"),s++,p.widthType){case 0:{r.push(p);break}case 1:{o.push(p);break}case 3:{n.push(p);break}case 4:{i.push(p);break}case 2:throw new q;case 5:{if(!xt(p)||!p.fillImagePixelWidth||!p.fillImagePixelHeight)throw new q;a.push(p);break}default:$(p.widthType)}}let c=1-o.reduce((p,u)=>p+u.width,0);if(c!==1&&ne(this,ye,fe("*",I(this,ye),X(c))),r.length){let p=r.reduce((u,f)=>fe("+",u,X(f.width,"px")),X(0,"px"));ne(this,ye,fe("-",I(this,ye),p))}if(a.length){let p=a.reduce((u,f)=>{let h=Hi(f);if(!h)throw new q;let y=ve(f,I(this,Fo));if(!y)throw new q;return fe("+",u,fe("*",hl(y),X(h,"px")))},X(0,"px"));ne(this,ye,fe("-",I(this,ye),p))}if(i.length){let p=i.reduce((u,f)=>fe("+",u,X(f.width*100,"vw")),X(0,"vw"));ne(this,ye,fe("-",I(this,ye),p))}if(D(e.gap)){let p=I(this,Fo).getVariableBinding(e.gap,e);if(p){let u=Do(ge`${m`${p} * ${s-1}`}px`);ne(this,ye,fe("-",I(this,ye),u))}}else{let u=Un(e.gap)*(s-1);u!==0&&ne(this,ye,fe("-",I(this,ye),X(u,"px")))}let d=n.reduce((p,u)=>p+u.width,0);return ne(this,ye,fe("/",I(this,ye),X(d))),ne(this,ye,fe("*",I(this,ye),X(I(this,dr).width))),ne(this,ye,fe("max",I(this,ye),X(1,"px"))),this}op(e){return ne(this,ye,e(I(this,ye),I(this,dr))),this}getWithConstraints(){var e,r;return Io(I(this,dr))?(I(this,dr).maxWidth&&ne(this,ye,Ze(e=er,ur,jd).call(e,"maxWidth",I(this,ye),I(this,ni),I(this,dr))),I(this,dr).minWidth&&ne(this,ye,Ze(r=er,ur,jd).call(r,"minWidth",I(this,ye),I(this,ni),I(this,dr))),I(this,ye)):I(this,ye)}};ye=new WeakMap,ni=new WeakMap,dr=new WeakMap,Fo=new WeakMap,ur=new WeakSet,Vv=function(e,r){var o;if(g(e.gridColumnWidthType!==void 0,"A grid node must have a gridColumnWidthType defined"),e.gridColumnWidthType==="fixed")return g(e.gridColumnWidth!==void 0,"A grid node with fixed width columns must have a gridColumnWidth defined"),X(e.gridColumnWidth,"px");if(e.gridColumnWidthType==="minmax"){if(e.gridColumnCount==="auto-fill")throw new q;let n=Ji(e,r);if(n=Ze(o=er,ur,_d).call(o,n,e,r),g(e.gridColumnCount!==void 0,"A grid node must have a gridColumnCount defined"),D(e.gap)){let i=r.getVariableBinding(e.gap,e);if(i){let a=Do(ge`${m`${i} * ${e.gridColumnCount-1}`}px`);n=fe("-",n,a)}}else{let a=Un(e.gap)*(e.gridColumnCount-1);a!==0&&(n=fe("-",n,X(a,"px")))}return e.gridColumnCount>1&&(n=fe("/",n,X(e.gridColumnCount))),e.gridColumnMinWidth&&(n=fe("max",n,X(e.gridColumnMinWidth,"px"))),n}else $(e.gridColumnWidthType)},Dv=function(e,r,o,n){if(o===1)return e;let i;if(H(o)){if(r.gridColumnCount==="auto-fill")throw new q;g(r.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),i=Math.min(o,r.gridColumnCount)}else if(o==="all"){if(r.gridColumnCount==="auto-fill")throw new q;g(r.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),i=r.gridColumnCount}else{if(D(o))throw new q;$(o)}if(i>1&&(e=fe("*",e,X(i))),D(r.gap)){let a=n.getVariableBinding(r.gap,r);if(a){let s=Do(ge`${m`${a} * ${i-1}`}px`);e=fe("+",e,s)}}else{let s=Un(r.gap)*(i-1);s!==0&&(e=fe("+",e,X(s,"px")))}return e},_d=function(e,r,o){if(!Ii(r))return e;let n;if(D(r.padding)){let i=o.getVariableBinding(r.padding,r);i&&(n=Do(ge`${m`${i} * 2`}px`))}else r.paddingPerSide?n=X((r.paddingLeft??0)+(r.paddingRight??0),"px"):n=X((r.padding??0)*2,"px");return n?fe("-",e,n):e},jd=function(e,r,o,n){let i=e==="minWidth"?"max":"min",[a,s]=Ti(n[e]);if(s==="%"){let l=o();return fe(i,r,fe("*",l,X(a/100)))}else return fe(i,r,X(a,s))},W(er,ur);var Mt=er;var gk=me("simulateYPosition");function Fv(t,e){try{let r=Ao(t,e);return r.type==="number-const"?r.value:r.expr}catch(r){if(r instanceof q)return;gk.reportError(r,{nodeId:t.id});return}}function Ao(t,e){let r=e.cache.getYPosition(t.id);if(r)return r;let o=yk(t,e);return e.cache.setYPosition(t.id,o),o}function yk(t,e){if(!En(t))throw new q;let r=e.tree.getNodeParent(t);if(!(St(t)&&Ya(t))){if(Fe(t))return j(0);g(!1,"Can\u2019t calculate the y position on a node when it doesn\u2019t have position information")}if(e.tree.isGroundNode(t)){if(Be(t)&&pe(e.tree.getScopeNodeFor(t)))return j(0);if(Tn(t)||Be(t))return Gi(m`${R.componentViewport}?.y || 0`,0);throw new q}let o=vk(t,r,e);if(o==="fixed"){if(t.top!==null)return j(t.top);if(t.bottom!==null){let n=ve(t,e);return k("-",Qt-t.bottom,n)}else{let n=ve(t,e);return k("-",k("*",Qt,t.centerAnchorY),k("/",n,2))}}if(o==="absolute"){g(r&&St(r)&&Ya(r),"absolute position: parentNode for the node must exist, be pinnable, and have position type");let n=Ao(r,e);if(t.top!==null)return k("+",n,j(t.top));if(t.bottom!==null){let i=ve(r,e),a=ve(t,e);return k("-",k("+",n,i),k("+",t.bottom,a))}else{let i=ve(r,e),a=ve(t,e);return k("+",n,k("-",k("*",i,t.centerAnchorY),k("/",a,2)))}}if(o==="sticky"||o===void 0){if(g(r&&St(r)&&Ya(r),"relative position: parentNode for the node must exist, be pinnable, and have position type"),_r(r)){if(g(r.stackDirection,"parentNode for the node must have stackDirection"),r.stackDirection==="horizontal"){if(r.stackWrapEnabled)throw new q;if(D(r.stackAlignment))throw new q;let n=ve(r,e),i=k("-",n,Qe(r)+Ut(r));if(g(r.stackAlignment,"parentNode for node must have stackAlignment"),r.stackAlignment==="start")return k("+",Ao(r,e),j(Qe(r)));if(r.stackAlignment==="center"){let a=ve(t,e),s=k("-",i,a);return k("+",Ao(r,e),k("+",Qe(r),k("/",s,2)))}else if(r.stackAlignment==="end"){let a=ve(t,e),s=k("-",i,a);return k("+",Ao(r,e),Qe(r),s)}else $(r.stackAlignment)}if(r.stackDirection==="vertical"){let n=vl(r,e,c=>ve(c,e),c=>Tl(c,e),c=>Nl(c,e)),i=n.findCoordinates(t.id);g(i,"Node must be found in stack layout info");let a=Sk(i.columnIndex,n,e),s=Ck(i.columnItemIndex,a,r,e),l=[Ao(r,e),Qe(r),s];return Ik(r,t,e)&&l.unshift(Qt),k("+",...l)}if(D(r.stackDirection))throw new q;$(r.stackDirection)}if(Et(r)){if(g(r.gridColumnCount!==void 0,"parentNode for node must have gridColumnCount"),r.gridColumnCount==="auto-fill")throw new q;if(H(r.gridColumnCount)){let n=tn(r,e);if(n.isEmpty())return k("+",Ao(r,e),Qe(r));let i=n.findCoordinates(t.id);g(i,"Node must be found in the grid layout info");let a=bk(i.rowIndex,n,r,e);return k("+",Ao(r,e),Qe(r),a)}$(r.gridColumnCount)}g(!1,"Relative and sticky nodes can only exist in stacks or grids")}$(o)}function Sk(t,e,r){let o=[];return e.walkColumn(t,n=>{let i=r.tree.get(n);g(i&&Ke(i)&&ct(i),"column item must exist, have size, and have size dimension type");let a;if(i.heightType===3){let s=e.getFrToPxForColumn(t);g(s,"frToPx must be available for the column"),a=k("*",s,i.height)}else a=ve(i,r);o.push(a)}),o}function Pv(t,e,r){return r.cache.memo(`sumAllStackChildrenHeights-${t.id}`,()=>k("+",...e)??j(0))}function Ck(t,e,r,o){let n=r.stackDistribution;if(g(n,"parentNode for node must have stackDistribution"),D(n))throw new q;let i=ve(r,o),a=k("-",i,Qe(r)+Ut(r));if(n==="start"||n==="center"||n==="end"){let s=Jt(r.gap),l=bt(s),c;if(n==="start")c=j(0);else{let u=Pv(r,e,o),f=l*(e.length-1),h=k("-",a,k("+",u,f));c=n==="center"?k("/",h,2):h}let d=bl("+",0,t,e)??j(0),p=l*t;return k("+",c,d,p)}if(n==="space-between"||n==="space-around"||n==="space-evenly"){g(!Ma(r),"gap is not expected with stackDistribution:",r.stackDistribution);let s=Pv(r,e,o),l=k("-",a,s),c=e.length,d;switch(n){case"space-between":d=k("/",l,Math.max(1,c-1));break;case"space-around":d=k("/",l,c);break;case"space-evenly":d=k("/",l,c+1);break;default:$(n)}let p;switch(n){case"space-between":p=j(0);break;case"space-around":p=k("/",d,2);break;case"space-evenly":p=d;break;default:$(n)}let u=bl("+",0,t,e)??j(0),f=k("*",d,t);return k("+",p,u,f)}$(n)}function bk(t,e,r,o){if(g(r.gridRowHeightType!==void 0,"parentNode for node must have gridRowHeightType defined"),r.gridRowHeightType==="fixed"){g(r.gridRowHeight!==void 0,"A grid parent node with gridRowHeightType === 'fixed' (for node) must have gridRowHeight defined");let n=t*r.gridRowHeight,i=Jt(r.gap),a=bt(i),s=t*a;return j(n+s)}if(r.gridRowHeightType==="fit"){let n=[];for(let c=0;c<t;c++)for(let d=0;d<e.columnCount;d++){let p=o.tree.get(e.getGridItem(c,d));if(!p)continue;g(Ke(p)&&ct(p),"grid child must have size and size-dimension type");let u=ve(p,o);n[c]=k("max",n[c]??j(0),u)}let i=k("+",...n)??j(0),a=Jt(r.gap),s=bt(a),l=t*s;return k("+",i,l)}if(r.gridRowHeightType==="auto"){let n=ve(r,o),i=k("-",n,Qe(r)+Ut(r)),a=tn(r,o),s=a.rowCount,l=Jt(r.gap),c=bt(l),d=(a.rowCount-1)*c,p=k("/",k("-",i,d),s),u=k("*",t,p),f=t*c;return k("+",u,f)}$(r.gridRowHeightType)}function vk(t,e,r){if(Qa(r.tree,t)&&t.position==="fixed")return"fixed";if(Za(t,e)&&t.position==="absolute")return"absolute";if(Jm(t,e)&&t.position==="sticky")return"sticky";if(e&&Fe(e))return"fixed";if(!(e&&po(e)))return"absolute"}function Ik(t,e,r){if(Be(t)&&pe(r.tree.getScopeNodeFor(t))){let o=t.children?.findIndex(ho);if(x(o))return!1;let n=r.tree.getIndex(e);return o<n}return!1}var wl=class{constructor(e,r,o){this.treeStore=e;this.variables=r;this.valueTransforms=o;S(this,"simulationContext");this.simulationContext=hv(this.treeStore.tree,this.variables,this.valueTransforms)}getCSSWidth(e){return Mv(e,this.simulationContext)}getHeight(e){return Nv(e,this.simulationContext)}getYPosition(e){return Fv(e,this.simulationContext)}getComponentViewportContext(e){let r=this.getCSSWidth(e),o,n;return Rn(e)||(o=this.getHeight(e),n=this.getYPosition(e)),{width:r,height:o,y:n}}};var xl=class{constructor(){S(this,"ids",new Map)}create(e){let r=Ne(e),o=this.ids.get(r);if(o===void 0)return this.ids.set(r,0),r;let n=o+1;return this.ids.set(r,n),`${r}-${n}`}};var Rl=class{constructor(e,r,o){this.declarations=e;this.scope=r;this.primaryVariantId=o}create(e,r){if(e===!0&&x(r))return{condition:!0};if(!x(e)&&x(r))return{condition:e};if(r){if(Array.from(r.values()).every(({value:f})=>f===e))return{condition:e};let o=new Set,n=new v.Set;kr(this.scope)&&this.primaryVariantId&&Lv(this.primaryVariantId,e,o,n);let i=new Map,a=new Map,s=new Map,l=Nk(s),c=l(e);for(let[f,h]of r){if(kr(this.scope)&&Lv(f,h.value,o,n),!h.isGesture&&h.value===e)continue;let y=h.isGesture?i:a;Tk(f,l(h.value),y)}let d=[],p=[];for(let f of s.keys()){let h=s.get(f);h&&(p.push(new v(f)),d.push(Y(h)))}let u=this.declarations.dedupe("isDisplayed",new v(re.lines(m`(${new v(d.join(", "))}) => {`,kr(this.scope)&&m`if (!${v.fn(R.isBrowser)}) return true`,...this.createConditionStatementsForGroup(i,"gestureVariant"),...this.createConditionStatementsForGroup(a,"baseVariant"),m`return ${c}`,m`}`)));return{condition:v.fn(u,...p),classNames:o,classNameExpressions:n}}return{condition:!0}}createConditionStatementsForGroup(e,r){if(e.size===0)return[];let o=[],n=new v(r);for(let[i,a]of e){let s=new v(i);if(a.size===1){let l=Array.from(a)[0];if(x(l))continue;o.push(m`if (${n} === ${l}) return ${s}`)}else o.push(m`if (${Array.from(a)}.includes(${n})) return ${s};`)}return o}};function Tk(t,e,r){let o=Y(e),n=r.get(o)??new Set;r.set(o,n.add(t))}function Nk(t){let e=new Set;return r=>{if(!wt(r))return r;let o=Y(r),n=t.get(o)??new v(Cf("value",e));return t.set(o,n),n}}function Av(t){return`hidden-${Ne(t)}`}function Lv(t,e,r,o){if(e===!1){let n=Av(t);r.add(n)}else if(wt(e)){let n=Av(t);o.add(m`!(${e}) && ${n}`)}}var qi,rn,Xi,kl=class{constructor(e,r,o,n,i,a){this.scope=e;this.bindings=r;this.declarations=o;this.imports=n;this.variables=i;this.treeStore=a;W(this,qi,new Map);W(this,rn,null);W(this,Xi,new Map)}isLayoutTemplateRef(e){if(rt(I(this,rn))){if(ne(this,rn,new Set),!Wo(this.scope)||!xm(this.scope))return!1;let r=P.componentForIdentifier(this.scope.layoutTemplateIdentifier)?.properties;if(!r)return!1;let o=this.scope.getControlProps(r);for(let n in o){let i=o[n];if(x(i?.value)||D(i.value)||i.type!=="scrollsectionref")continue;let a=i.value.target;x(a)||D(a)||I(this,rn).add(a)}}return I(this,rn).has(e)}getNodeInPrimary(e){if(!e)return;let r=e.originalid?this.treeStore.tree.get(e.originalid):e;if(r)return r}scrollTargetInfo({target:e,collectionItem:r}){if(!e)return;if(ce(e))return{ref:this.variables.create(e)};let o=this.treeStore.tree.get(e);if(!o||!_o(o)||this.treeStore.treeIndex.getScopeIdFor(o.id)!==this.scope.id)return;let n=this.getNodeInPrimary(o);if(!n)return;let i=this.ref(n,r);if(i)return{ref:i,offset:o.scrollMarginTop}}ref(e,r){let o=this.getNodeInPrimary(e);if(!o)return;let n=I(this,qi).get(o.id);if(n)return n;let i=Mf(o,this.treeStore.tree),a=this.isLayoutTemplateRef(o.id);if(a||r||i&&i.length>0){let d=this.id(o,r);if(!d)return;let p=this.imports.addImport("framer",{exportSpecifier:a?"useSiteRefs":"useDynamicRefs"});return v.fn(this.declarations.component.dedupe("dynamicRef",v.fn(m`${p}<HTMLElement>`)),d)}let s=this.bindings.create("ref"),l=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),c=m`const ${s} = ${v.fn(m`${l}.useRef<HTMLElement>`,m`null`)}`;return this.declarations.component.create(c),I(this,qi).set(o.id,s),s}getBaseId(e,r){if(U(r)){if(_o(e)){let o=[e.id];return r&&r.id!==this.scope.id&&o.push(r.id),this.declarations.component.dedupe("elementId",v.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteElementId"}),...o))}return Ne(e.id)}if(He(r))return ge`${R.layoutId}-${Ne(e.id)}`}getPortalAncestor(e){let r=this.treeStore.tree.getParent(e.id);if(r){if(Nt(e))return this.treeStore.tree.get(r.originalid??r.id);if(Fe(r)){let o=this.treeStore.tree.getParent(r.id);return this.treeStore.tree.get(o?.originalid??o?.id)}}}portalId(e){let r=this.getPortalAncestor(e);return r?this.id(r):void 0}id(e,r){let o=this.getNodeInPrimary(e);if(!o)return;let n=this.treeStore.treeIndex.getScopeIdFor(o.id),i=this.treeStore.tree.get(n);if(!U(i)&&!He(i))return;if(U(i)&&_o(o)){let s=kf(o,this.treeStore.tree);s&&I(this,Xi).set(o.id,s)}let a=this.getBaseId(o,i);if(a)return Vf(o,this.treeStore.tree,s=>{if(s.id===o.id)return a;if(ce(r)&&r.id===s.id)return this.variables.create(r);if(is(r)&&r.key===s.id)return r.value;if(s.type==="slug")return this.variables.create(Sn(s.id,s.providerId))})}annotation(){let e=Object.fromEntries(I(this,Xi));return Ve(e)?"":JSON.stringify(e)}};qi=new WeakMap,rn=new WeakMap,Xi=new WeakMap;function xk(t){return t instanceof Error?!!Zc(t):!1}function Rk(t){return A(t)?t:t instanceof Error?t.message:tt(t)?JSON.stringify(t):"Unknown error"}var Ki,Ml=class{constructor(e,r,o){this.scopeId=e;this.sourceNodeId=r;this.type=o;W(this,Ki,[])}record(e,r,o){if(xk(r)){this.recordKnownError(e,r);return}I(this,Ki).push({nodeId:e.id,reason:Rk(r),moduleIdentifier:be(o)?o:void 0})}get errors(){return I(this,Ki).map(e=>new Ts({...e,sourceNodeId:this.sourceNodeId,sourceNodeModuleType:this.type,scopeId:this.scopeId,type:"CodeGeneration"}))}recordKnownError(e,r){if(Zc(r)){let o=new Set;r.error.forEach(n=>{o.add(n),this.record(e,"CodeError",n)}),r.missing.forEach(n=>{o.has(n)||this.record(e,"MissingModule",n)})}}};Ki=new WeakMap;function kk(t){return t==="string"||t==="vectorsetitem"}var on,Vl=class{constructor(e,r){this.modulesStore=e;this.tree=r;W(this,on,new Map)}get structure(){return Array.from(I(this,on).values())}addSection(e){if(!$c(e)||!e.customizationsSectionId)return;let r={_id:e.customizationsSectionId,_layerId:e.id,content:[]};return I(this,on).set(r._id,r),r._id}addCustomizations(e,r){if(!$c(e)||!r)return;let o=I(this,on).get(r);if(o&&(G(e)&&Mk(e,o,this.tree,this.modulesStore),!!Of(e))){for(let n of e.customizations)if(Xe(e))o.content.push({field:n.fieldPath,text:e.getTextContent()});else if(G(e)&&e.isVectorInstance){if(!be(e.codeComponentIdentifier))return;let i=ki(Q(e.codeComponentIdentifier),this.tree,this.modulesStore)?.name;if(!A(i))return;o.content.push({field:n.fieldPath,text:i})}I(this,on).set(r,o)}}};on=new WeakMap;function Mk(t,e,r,o){let n=P.componentForIdentifier(t.codeComponentIdentifier)?.properties;if(!n)return;let i=t.getControlProps(n);for(let a in i){let s=i[a];if(!s)continue;let{type:l,value:c}=s;if(!A(l)||!kk(l))continue;let d=n[a]?.title??a;if(A(c))switch(l){case"string":e.content.push({field:d,text:c});break;case"vectorsetitem":{if(!be(c))continue;let p=ki(Q(c),r,o)?.name;if(!A(p))continue;e.content.push({field:d,text:c});break}default:$(l,"Unknown control type")}}}var nn,Dl=class{constructor(e){this.scopeNode=e;W(this,nn,new Map)}recordClassName(e,r,o){if(!pe(this.scopeNode)||e.parentid!==r||e.visible===!1||Zf(e)&&e.locked)return;let n=r,i=I(this,nn).get(n)??new Set;i.add("."+o),I(this,nn).set(n,i)}annotation(){if(!pe(this.scopeNode)||I(this,nn).size===0)return"{}";let e={};for(let[r,o]of I(this,nn))e[r]=Array.from(o);return JSON.stringify(e)}};nn=new WeakMap;var an,sn,ii,Pl=class{constructor(e){W(this,an);W(this,sn,new Set);W(this,ii,new Map);ne(this,an,{...e})}count(e,r=1){I(this,an)[e]+=r}measureLength(e,r){return(typeof r=="string"||r instanceof v)&&(I(this,an)[e]+=r.length),r}get(){if(I(this,sn).size>0){let r=Array.from(I(this,sn),o=>o.metric).join(", ");throw Error(`Attempted to get metrics before completing timer(s): ${r}`)}let e={...I(this,an)};for(let[r,o]of I(this,ii)){let n=_y(o);e[r]+=Math.round(n.reduce((i,[a,s])=>i+(s-a),0))}return e}time(e){let r=performance.now(),o=!1,n={get metric(){return e},cancel:()=>{o||(I(this,sn).delete(n),o=!0)},done:()=>{g(!o,"Attempted to complete a cancelled timer");let i=I(this,ii).get(e);i||(i=[],I(this,ii).set(e,i)),i.push([r,performance.now()]),n.cancel()}};return I(this,sn).add(n),n}async timed(e,r){let o=this.time(e);try{return await r()}finally{o.done()}}};an=new WeakMap,sn=new WeakMap,ii=new WeakMap;var ai,Fl=class{constructor(){W(this,ai,[])}add(e){let r=Dk(e);r.length!==0&&I(this,ai).push(...r)}annotation(){if(I(this,ai).length===0)return;let e=new Set;for(let r of I(this,ai))e.add(JSON.stringify(r));return`[${Array.from(e).join(",")}]`}};ai=new WeakMap;function Yi(t){return A(t)&&t.length>0}function Vk(t){return tt(t)?"id"in t&&Yi(t.id)&&(t.type===void 0||t.type==="click"||t.type==="form_submit"):!1}function Q8(t){return nr(t)?t.every(Vk):!1}function Dk(t){let e=[],r=t.originalid??t.id;if(Ro(t)&&Yi(t.linkClickTrackingId)&&e.push({id:t.linkClickTrackingId,nodeId:r,type:"click"}),Xe(t))for(let o of t.getLinkClickTrackingId(!1))Yi(o)&&e.push({id:o,nodeId:r,type:"click"});if(G(t)){let o=P.reactComponentForIdentifier(t.codeComponentIdentifier);if(o?.properties){let n=t.getControlProps(o.properties);for(let i in n){if(!n[i])continue;let a=n[i];a.type==="trackingid"&&Yi(a.value)&&e.push({id:a.value,nodeId:void 0,type:void 0})}}}return Dr(t)&&Yi(t.formSubmitTrackingId)&&e.push({id:t.formSubmitTrackingId,nodeId:r,type:"form_submit"}),e}var Al=class{constructor(e,r,o,n){this.imports=e;this.treeStore=r;this.modulesStore=o;this.createBinding=n;S(this,"sets",new Set)}resolveVariableInstance(e){g(ce(e.dynamicVectorSetIdentifier),"Vector set identifier must be a variable reference"),g(be(e.codeComponentIdentifier),"Code component identifier must be a module");let r=Q(e.codeComponentIdentifier),o=ki(r,this.treeStore.tree,this.modulesStore)?.set.moduleId;return o&&this.sets.add(o),this.createBinding(e.dynamicVectorSetIdentifier,e,"Icon")}resolveControl(e,r,o){if(ce(e))return this.sets.add(r.setModuleId),this.createBinding(e,o,"Icon");g(be(e),"Vector set item must be a module export identifier");let n=Lf(this.treeStore.tree,r,e);if(n)return this.imports.addModuleImport(n)}annotation(){if(this.sets.size!==0)return JSON.stringify(Array.from(this.sets))}};var Qi,Zi,Jd,Ll=class{constructor(){W(this,Zi);W(this,Qi,new Map)}set(e,r){I(this,Qi).set(Ze(this,Zi,Jd).call(this,e),r)}get(e){return I(this,Qi).get(Ze(this,Zi,Jd).call(this,e))}};Qi=new WeakMap,Zi=new WeakSet,Jd=function(e){return e.originalid??e.id};var qd=class{constructor(e,r){this.imports=e;this.declarations=r;S(this,"links",new Map);S(this,"scrollSectionRefs",new Map)}collect(e,r,o,n){if(!vp(n))return;let i=e==="link"?this.links:this.scrollSectionRefs,a=i.get(r)??new Set;a.add(o),i.set(r,a)}collectLink(e,r,o){return this.collect("link",e,r,o),o}collectScrollSectionRef(e,r,o){return this.collect("scrollSectionRef",e,r,o),o}values(e){let r=[],o={},n=m`resolvedLinks`,i=this.links.get(e);if(i?.size)for(let s of i)o[s]=m`${n}[${r.length}]`,r.push(m`props[${s}]`);let a=this.scrollSectionRefs.get(e);if(a?.size){let s=this.declarations.component.dedupe("siteRef",v.fn(this.imports.addImport("framer",{exportSpecifier:"useSiteRefs"})));for(let l of a)o[l]=v.fn(s,m`${n}[${r.length}]`),r.push(m`props[${l}]`)}if(!Ve(o))return{ResolveLinks:this.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),binding:n,links:r,props:o}}};function Ov(t,e,r){let o=new gs(r);return{bindings:r,imports:e,declarations:o,tree:t.tree,modulesStore:t.stores.modulesStore,assets:new ko(t.stores.assetStore.assetMap),unresolvedLinks:new qd(e,o),wideGamutColors:new On}}function Fk(t,e){let r={};for(let o in t)r[o]=e(o);return r}function Ak(t){return(e,r,o)=>{if(x(r))return e;let n=Fk(r,o);if(!n||!tt(n)||Ve(n))return e;let i=t.declarations.file.dedupe("getLocalizedValue",m`(values, locale) => {${m.joinLines(m`while (locale) {${m.joinLines(m`const value = values[locale.id]`,m`if (value) return value`,m`locale = locale.fallback`)}}`)}}`),a=t.imports.addImport("framer",{exportSpecifier:"useLocaleInfo"}),{activeLocale:s}=t.declarations.component.dedupe({activeLocale:void 0},v.fn(a)),l=t.declarations.file.dedupe("localizedValues",n);return m`${v.fn(i,l,s)} ?? ${e}`}}function Bv(t,e,r,o,{declarations:n,tree:i,modulesStore:a,assets:s,imports:l,unresolvedLinks:c,wideGamutColors:d}){let p=Ak({declarations:n,imports:l});return cs(e,r,{resolveAsset:(u,f,h,y)=>{let C,b=yn(f)?f.__defaultAssetReference:void 0;return u!==b&&(C=(y?s.resolveResponsiveImage(u,void 0):s.resolve(u))?.src),!Ba(h)||x(C)?C:p(C,h.valueLocalized,N=>{let T=h.valueLocalized?.[N]?.value;return xa(T)?void 0:T===b?m`undefined`:(y?s.resolveResponsiveImage(u,void 0):s.resolve(u))?.src})},resolveResponsiveImage:(u,f,h)=>{let y,C,b;if(ka(f)&&Ra(f.__vekterDefault)?(y=f.__vekterDefault.assetReference,C=f.__vekterDefault.positionX,b=f.__vekterDefault.positionY):yn(f)&&(y=f.__defaultAssetReference),u===y&&h.positionX===C&&h.positionY===b)return;let N=v.fromValue(s.resolveResponsiveImage(u,void 0,h)),T=p(N,h.valueLocalized,w=>{let V=h.valueLocalized?.[w];if(!Oa(V))return;if(V.value===y&&V.imageFocalPoint?.positionX===C&&V.imageFocalPoint?.positionY===b)return m`undefined`;let L=s.resolveResponsiveImage(V.value,void 0,V.imageFocalPoint);return v.fromValue(L)});return v.fn(n.file.dedupe("wrapInAddImageAlt",Vy),T,p(h.alt??ls,h.altLocalized,w=>h.altLocalized?.[w]?.value))},resolveDynamicValue:(u,f)=>{},resolveLink:(u,f)=>{if(Lt(f.value))return;let h=Uo(f.value);if(!x(h)){if(Jr(h)){let y=f.valueLocalized;return y?p(h.url,y,C=>y[C]?.value):h.url}return c.collectLink(o,u,{href:zc(h,i,a)})}},resolvePageScope:u=>{},resolveLocalizedValue:(u,f)=>p(u,f,h=>f?.[h]?.value),compileRichText:(u,f)=>{let y={collectors:{imports:l,assets:s,links:{create:b=>{if(!(x(b)||ce(b)))return Jr(b)?b.url||void 0:zc(b,i,a)}}},nodeId:t.originalid??t.id,useCreateElement:!0},C=n.file.dedupe("text",Zr(u,y));return p(C,f,b=>{if(!f)return;let N=f[b];if(!N)return;let T=N.value;if(A(T))return Zr(T,y)})},resolveFont:u=>Ha(u)?Ga(u):{},resolveScrollSectionRef:(u,f)=>{if(x(f)||ce(f)||!A(f.target))return;let{target:h,collectionItem:y}=f;if(!h||ce(h))return;let C={type:"webPage",webPageId:t.id,hash:h,hashVariables:is(y)?{[y.key]:y}:void 0};return c.collectScrollSectionRef(o,u,{href:{...Df(C,i,a),webPageId:t.id},refKey:!0})},resolveCustomCursor:(u,f)=>{if(!(x(f)||ce(f)))return vf(f,i)},resolveVectorSetItem:u=>{if(!(x(u)||ce(u)))return l.addModuleImport(u,{absolute:!0})},resolveColor:u=>d.resolveColor(u)})}function zv(t,e,r,o=void 0){if(!r&&!o)return;let n=o??gy(r??[]);n.length&&Ty.resetPropertiesToMasterValues(t,e,n)}function Lk(t){let e=[];for(let r in t){let o=t[r];o&&e.push({hash:Ne(r),mediaQuery:bg(o)})}return e}function Ek(t,e,r,o){let n=new E({routeId:m`routeId`,style:m`style`,key:Y(t)});E.addSpreadAtStart(n,m`props`);let i=m`${o.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.createElement`;if(!r)return Kd(e,m`return ${v.fn(i,t,n,m`children(true)`)};`);E.assign(n,r.props);let{ResolveLinks:a,binding:s,links:l}=r;return Kd(e,m`return ${v.fn(i,a,new E({links:l},1),m`(${s}) => ${v.fn(i,t,n,m`children(true)`)}`)};`)}function iX(t,e){let r=[];for(let o of e){if(!U(o)||!Wo(o))continue;let n=Q(o.layoutTemplateIdentifier);if(!Ft(n)||n.type!=="layoutTemplate")continue;let i=t.getNodeWithTrait(n.localIdName,pe);i&&r.push(i)}return r}function aX(t,e,r,o){let n={},i={},a={},s=new Map,l={},c=Ov(t,r,o),d=c.bindings.create("props"),p={},u=new Set,f=c.bindings.create("Template"),h=t.tree.getNodeWithTrait(t.tree.root.homePageNodeId,U);if(!U(h))return;for(let T of[h,...e]){if(!U(T,!0)||!Wo(T)||u.has(T.id))continue;let w=Q(T.layoutTemplateIdentifier);if(!Ft(w)||w.type!=="layoutTemplate")continue;let V=t.tree.getNodeWithTrait(w.localIdName,pe);if(!V)continue;u.add(T.id);let F=t.stores.modulesStore.getPersistedModuleByLocalId(w.localId)?.moduleURL;g(F,"An applied Layout Template must have a module URL.");let _=t.stores.modulesStore.forType("layoutTemplate").getByLocalId(w.localId).annotations(P.componentForIdentifier(T.layoutTemplateIdentifier),w.exportSpecifier)?.framerBreakpoints;om(_)&&s.set(w.localIdName,_);let z=P.componentForIdentifier(T.layoutTemplateIdentifier)?.properties;g(z,"An applied Layout Template must have controls.");let Z=Bv(T,z,T.getControlProps(z),V.id,c),M=p[V.id],he=to(Z,M?.value,"js");if(M?.value&&!Ve(Z)&&(!he||Ve(he)))l[T.id]=M.binding;else if(Pr(he)&&!Ve(he)){let de=c.declarations.component.dedupe("props",Ok(he,M));l[T.id]=de,p[V.id]??={binding:de,value:he}}n[T.id]=w.localIdName;let Ie=i[w.localIdName]??[];Ie.push(T.id),i[w.localIdName]=Ie,!(w.localIdName in a)&&(a[w.localIdName]=c.imports.addImport(F,{exportSpecifier:"default",importBinding:Fp(V.name??"Template")}))}if(Ve(i))return;let y=[],C=[];for(let T in i){let w=i[T],V=a[T];if(!V||!w)continue;y.push(Ek(V,w,c.unresolvedLinks.values(T),c.imports));let L=s.get(T);L&&C.push(Kd(w,m`return ${Lk(L)}`))}let b=c.declarations.component.dedupe("templateProps",l),N=c.wideGamutColors.getWideGamutColorRules("body");return{binding:f,css:N.length?`@supports (color: color(display-p3 1 1 1)) { ${N.join(" ")} }`:"",declarations:m.joinLines(...c.declarations.file.list(),m`function ${f}({routeId, children, style, ...rest}) {${m.joinLines(...c.declarations.component.list(),m`const ${d} = ${b}[routeId] ?? {}`,m`switch (routeId) {${m.joinLines(...y,m`default: { return children(false) }`)}}`)}}`,m`export function getLayoutTemplateBreakpoints(routeId) {${m.joinLines(m`switch (routeId) {${m.joinLines(...C,m`default: { return undefined }`)}}}`)}`)}}function Ok(t,e){if(!e)return t;let r=new E(t);return E.addSpreadAtStart(r,e.binding),r}function Bk(t){let e=t.getPrimaryVariant();if(!(!e||!Vn(e)))return e.children.findIndex(r=>ho(r))}function Kd(t,e){return m.joinLines(...t.map(r=>m`case ${r}:`),e)}function $v(t){return Ci(t)&&t.layout==="stack"&&t.stackDirection==="vertical"}function zk(t,e){if(!kr(e))return;e.getPrimaryVariant().set(_m),zv(t,e.getReplicaVariants(),["layout","padding"])}function El(t){return $v(t.getPrimaryVariant())&&t.getReplicaVariants().every($v)}function $k(t){let e=new Set,r=new Set;for(let o of t.tree.root.children){if(o.id===t.tree.root.homePageNodeId||!U(o)||!x(o.layoutTemplateIdentifierOverride))continue;let n=t.stores.modulesStore.forType("screen").getByStableName(o.id)?.annotations(P.componentForIdentifier(o.instanceIdentifier),"default")?.framerAcceptsLayoutTemplate;if(xp(n)){n===!1&&e.add(o.id);continue}if(o.isLoaded()){El(o)===!1&&e.add(o.id);continue}r.add(o.id)}return{incompatible:e,shallow:r}}async function Uk(t,e){let r=new Set,o=Array.from(e).map(i=>t.tree.getNodeWithTrait(i,U)),n=await t.tree.loadScopes(o);for(let i of n)rt(i)||El(i)||r.add(i.id);return r}function Xd(t,e,r,o=void 0,n=new Set){let i=np(r),a=i?r():r,s=e.id===t.tree.root.homePageNodeId?t.tree.root:t.tree.current(e);if(!s)return;for(let u of n)t.tree.getNodeWithTrait(u,U)?.set({layoutTemplateIdentifierOverride:null});if(s.set({layoutTemplateIdentifier:a.instanceIdentifier}),zk(t.tree,e),i&&t.stores.scopeStore.select(a.id,{keepHistory:!1}),!o)return;g(a.isLoaded(),"Layout Templates: template must be loaded to add a child.");let l=Bk(a),c=P.activeBundleHash;if(!c)return;let d=xg(t.tree,t.stores.treeStore.sandboxCollectionData,c,P,o.id),p=t.tree.current(o);if(p){for(let u of p.walk()){let f=wg(t.tree,e.id,u,d);f&&u.set(f)}t.tree.moveNode(o,a.baseVariantId,l),t.stores.selectionStore.set(o.id)}}async function sX(t,e,r,o){if(e.id===t.tree.root.homePageNodeId){let{incompatible:n,shallow:i}=$k(t);if(i.size===0)Xd(t,e,r,o,n);else{let a=await Uk(t,i),s=new Set([...n,...a]);t.scheduler.process(()=>{Xd(t,e,r,o,s)})}_t("layout_template_apply",{onHomePage:!0})}else Xd(t,e,r,o),_t("layout_template_apply",{onHomePage:!1})}function Wk(t,e,r){if(!Array.from(e).some(a=>{let s=r.get(a);return Oe(s)}))return;let n=r.get(t.parentid),i=t;for(;n;){if(e.has(n.originalid??n.id)){let a=r.get(n.originalid??n.id),s=xf(r,a),l=i.originalid??i.id;if(Oe(a)&&l===s?.id)return a}i=n,n=r.get(n.parentid)}}function Hk(t){return t}function Gk(t){let e=new Set;return Ig(t,r=>{r.providerId&&e.add(r.providerId)}),e}var Ol=(t,e,r,o)=>(n,i,a,s=Hk,l=void 0)=>{if(ce(n))return s(r.create(n));if(Lt(n)){let c=s(o.createComputedValue(n,i,l));return dp(n)?c:e.component.dedupe(a,c,Wk(i,Gk(n),t.tree))}$(n)};function Yd(t){if(we(t))return"screen";if(De(t))return"vector";if(Pe(t))return"design";let{type:e}=Q(t.instanceIdentifier);return e}function Uv(t,e,{treeStore:r,modulesStore:o,engineChanges:n,assetMap:i},a=new Set,s=`framer-${_n(5)}`){let l=Yd(e),c=new Kr(...a),d=new No(l,o,c);d.addImport("react",{exportSpecifier:"*",importBinding:"React"});let p=new Ml(e.id,we(e)?t.id:e.id,l),u=Es(e);gi(u!=="ContentManagement"&&u!=="Analytics"&&u!=="LocalizationGlossary","Content management, Analytics & Localization glossary nodes cannot be code-generated");let f=new gs(c),h=new ms(e),y=new ko(i),C=new Ln(e,d,c,h,r,o,()=>{let xe=d.addImport("framer",{exportSpecifier:"useRouter"});return f.component.dedupe("router",v.fn(xe))}),b=new Bs(e,r,h,f.file,c,d,y),N=new Os(c,h,b,y,C),T=new Fy(e,h,r,d,f,N,o,l),w=new Py(f.file,f.component,d,h,T,C,N,o,l),V=new kl(e,c,f,d,h,r),L=new Fl,F=new Rl(f.component,e,t.id),_=Ol(r,f,h,w),z=new ch(e,h,r,w,_),Z=new al(e,t,s,z),M=new Set,he=new ol(t,h,r,c,d,{type:l}),Ie=new Vo(f.font),de=new Pl(rf()),ee=new Set,ue={dependencies:ee,addDependency:xe=>ee.add(xe)},ie=Gt(e)?e.getReplicaVariants():[],Te={};if(He(e))for(let xe of ie)!Rr(xe)||Cy(xe.gesture)||(Te[xe.replicaInfo.inheritsFrom??xe.replicaInfo.master]=!0);let st=new xl,K=new bf(e,Ie,d,f.file,h,o,r),B=new Vl(o,r.tree),ae=new Dl(e),ke=new Al(d,r,o,_),qe=new wl(r,h,w),Dt=pe(e)?h.create({id:"children",providerId:e.id}):void 0;return{type:"jsxContext",treeStore:r,modulesStore:o,engineChanges:n,assetMap:i,simulatedDOM:qe,variants:ie,topLevelVariantsWithGestures:Te,imports:d,errors:p,variables:h,fetches:N,assets:y,valueTransforms:w,elementIds:V,css:Z,renderFunctions:F,events:he,links:C,fonts:Ie,metrics:de,packages:ue,appearIds:st,bindings:c,declarations:f,preload:b,localizedValues:T,componentPresetIds:M,renderAsListNodes:new Map,repeaterInfo:new Map,renderConditions:new Map,nodesWithAnyGradientFill:new Map,customCursors:K,cssVariableDefinitions:z,formIds:new Set,hitTargets:ae,createDeduplicatedDynamicValueBinding:_,trackingIds:L,vectorSets:ke,kitSectionsStructure:B,scopeId:e.id,scopeType:u,moduleType:l,rootId:t.id,linkClassName:Z.addRule({display:"block"},e),layoutTemplateSlotBinding:Dt,nodeRendersWithMotion:new Ll,serializationId:s,acceptsLayoutTemplate:U(e)&&e.isLoaded()&&e.baseVariantId?El(e):void 0}}function Wv({ctx:t,ancestorInfo:e,jsxAttributes:r,usedVariableIds:o,dataRepeater:n,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:s}){let l=[],c=r.subqueries,d=e.subqueries,p=pS(n,i,o,y=>{if(a){let C=d;for(;C;){if(y.providerId===C.repeaterNode.id){let b=Gs(C.repeaterNode),[N,T]=mS(y.id,b);return{type:"Identifier",name:T,collection:N}}C=C.parent}}return g(t.variables,"VariableCollector is required"),l.push(y),{type:"LiteralValue",value:t.variables.create(y)}},y=>{let C=t.imports.addModuleImport(y);return g(C,"Can't import collection"),C});g(c,"Subqueries must exist");let u=c.getSubqueries(s);for(let[y,C]of u)p.select.push({type:"FunctionCall",functionName:"ARRAY",alias:y,arguments:[{type:"Select",...C}]});let f=c.getVariableDependencies(s);l.push(...f);let h=p;return a?(g(d,"Parent subqueries must exist"),d.addSubquery(s,n.originalid??n.id,p),d.addVariableDependencies(s,l)):t.preload.addQuery(n,h,l),new E({query:h,pageSize:n.collectionPaginationPageSize})}function _k(t,e){return x(t.subqueries)||e.isAnyVariantPaginated?!1:t.inRepeatedItem??!1}function Hv(t,e,r,o,n){let i=o.inheritedControlMap?.get(t.id);g(i,"Primary variant control map must be defined.");let a=_k(r,o),s=Wv({ctx:e,ancestorInfo:r,jsxAttributes:o,usedVariableIds:n,dataRepeater:t,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:"primary"}),l={};for(let c of e.variants){let d=Zo(c,t.id,e.treeStore.tree)??t;g(Oe(d),"Node must be a data repeater");let p=Wv({ctx:e,ancestorInfo:r,jsxAttributes:o,usedVariableIds:n,dataRepeater:d,primaryVariantControlMap:i,shouldInlineQuery:a,variantId:c.id});hr(s,p)||(l[c.id]=p)}return a?null:{props:s,overrides:Ve(l)?void 0:l}}function jk(t,e){let r=e.imports.addImport("framer",{exportSpecifier:"useQueryData"});if(Cr(t)){let o=e.imports.addImport("framer",{exportSpecifier:"useLoadMorePaginatedQuery"}),n=m`paginatedQuery`;return m.joinLines(m`const { ${n}, paginationInfo, loadMore } = ${o}(query, pageSize, ${t.id})`,m`const data = ${v.fn(r,n)}`,m`return children(data, paginationInfo, loadMore)`)}return m.joinLines(m`const data = ${v.fn(r,m`query`)}`,m`return children(data)`)}function Gv(t,e){return m`({ query, pageSize, children }) => {
        ${jk(t,e)}
    }`}function _v({renderAsListNodes:t},e){return e.parentid?t.has(e.parentid):!1}function jv(t,e,{isAnyVariantALink:r},o){let n=o?"motion.":"";return Ro(e)&&(it(e)||r)?`${n}a`:_v(t,e)?`${n}li`:wo(e)&&e.htmlTag&&Hn(t.scopeType)?`${n}${e.htmlTag}`:`${n}${us}`}function Jv(t,e,{isAnyVariantAnEffect:r,isAnyVariantOptimizedAppearEffect:o},n){let i=[];r&&i.push(e.imports.addImport("framer",{exportSpecifier:"withFX"})),o&&i.push(e.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}));let a=e.treeStore.tree.get(n.lastRepeaterId);return jr(a)&&Cr(a)&&jo(t,a)&&i.push(e.imports.addImport("framer",{exportSpecifier:"withInfiniteScroll"})),e.scopeType==="SmartComponent"?e.imports.addImport("framer",{exportSpecifier:"SmartComponentScopedContainer",composeWithImports:i}):e.imports.addImport("framer",{exportSpecifier:"Container",composeWithImports:i})}function Jk(t,e){if(!jm(e.treeStore.tree,t)||!!!P.reactComponentForIdentifier(t.codeComponentIdentifier)?.annotations?.framerImmutableVariables)return;let o=Q(t.codeComponentIdentifier);if(!be(o))return;let{importSpecifier:n,importBinding:i}=Yr(o,e.moduleType,e.modulesStore);if(!n)return;let a=e.imports.addImport(n,{exportSpecifier:"*",importBinding:`${i}Info`});return[e.imports.addImport("framer",{exportSpecifier:"withMappedReactProps"}),a]}function qk(t,e,r,o){let n=[];ar(t)&&e.scopeType==="CanvasPage"&&n.push(e.imports.addImport("framer",{exportSpecifier:"withGeneratedLayoutId"}));let i=Xk(t,e,r);i&&n.push(i);let a=cl(t,e);if(n.push(...a),i||a.length>0){let s=Jk(t,e);s&&n.push(s)}return o.isAnyVariantAVariantAppearEffect&&n.push(e.imports.addImport("framer",{exportSpecifier:"withVariantAppearEffect"})),G(t)&&!t.isVectorInstance||(o.isAnyVariantAnEffect&&n.push(e.imports.addImport("framer",{exportSpecifier:"withFX"})),o.isAnyVariantOptimizedAppearEffect&&n.push(e.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}))),n}function Xk(t,e,r){let o=ll(t,e);if(!o)return;let{importSpecifier:n,exportSpecifier:i}=o,a={scopeId:e.scopeId,nodeId:t.originalid??t.id,override:e.imports.addImport(n,{exportSpecifier:i}),inComponentSlot:r.inComponentSlot?!0:void 0};return[e.imports.addImport("framer",{exportSpecifier:"withCodeBoundaryForOverrides"}),a]}function Kk(t,e){if(t.kind!=="localModuleExport")return;let{localId:r}=t,n=e.modulesStore.getPersistedModuleByLocalId(r)?.metadata.packageDependencies;Array.isArray(n)&&n.forEach(i=>{A(i)&&e.packages.addDependency(i)})}function qv(t,e){let r=Ps(t,P);if(!r)return;let o=Ee("prototype",r);return e.imports.addImport(`../${o}`,{exportSpecifier:"default",importBinding:"Prototype"})}function Yk(t){switch(t){case"BooleanShapeNode":case"CodeComponentNode":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FrameNode":case"OvalShapeNode":case"OverlayNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"RichTextNode":case"ShapeContainerNode":case"ShapeGroupNode":case"StarShapeNode":case"SVGNode":case"TextNode":{let e=t;return!0}case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BlockquoteStylePresetNode":case"BoxShadow":case"CanvasNode":case"CanvasPageNode":case"CanvasScopeNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"CollectionItemNode":case"CollectionNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ComponentPresetNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"DateVariableEditTool":case"DesignPageNode":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HighlightStackItemTool":case"HighlightTool":case"ImageStylePresetNode":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"InlineCodeStylePresetNode":case"LayoutTemplateEntityTypeRootNode":case"LayoutTemplateNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkStylePresetNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"Menu":case"MoveTool":case"MutableNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PresetsListNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextVariableEditTool":case"RootNode":case"RotateTool":case"RouteNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"SmartComponentNode":case"StringVariableEditTool":case"StyledTextDraft":case"TableStylePresetNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextStylePresetNode":case"VectorSetEntityTypeRootNode":case"VectorSetNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"WebPageNode":case"ZoomSelectTool":case"ZoomTool":{let e=t;return!1}default:$(t)}}function Xv(t,e,r,o){if(!Yk(t.__class))throw Error(`jsxTagNameForNode: ${t.__class} does not support serialization to JSX.`);let n=qk(t,e,r,o);switch(t.__class){case"SVGNode":case"ShapeContainerNode":case"BooleanShapeNode":case"OvalShapeNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"ShapeGroupNode":case"StarShapeNode":return e.imports.addImport("framer",{exportSpecifier:"SVG",composeWithImports:n});case"TextNode":return e.imports.addImport("framer",{exportSpecifier:"Text",composeWithImports:n});case"RichTextNode":return e.imports.addImport("framer",{exportSpecifier:"RichText",composeWithImports:n});case"FrameNode":{if(Dr(t))return e.imports.addImport("framer",{exportSpecifier:"FormContainer",composeWithImports:n});if(xt(t)||o.isAnyVariantAnImage)return e.imports.addImport("framer",{exportSpecifier:"Image",composeWithImports:n});let i=e.nodeRendersWithMotion.get(t);g(!x(i),"Node must have had `rendersWithMotion` computed for it.");let a=jv(e,t,o,i);return i?e.imports.addImport("framer-motion",{exportSpecifier:a,composeWithImports:n}):new v(a)}case"CodeComponentNode":{if(g(Co(t),"Nodes with a ClassDiscriminator of CodeComponentNode must be a Code Component"),ib(t))return e.imports.addImport("framer",{exportSpecifier:ab(t)});if(bn(t)||o.identifiers&&o.identifiers.size>1)return e.imports.addImport("framer",{exportSpecifier:"Instance",composeWithImports:n});let i=Q(t.codeComponentIdentifier);if(!be(i)){let c=Wu(t.codeComponentIdentifier);return g(c,"A package must have module information to be included in code-generation."),e.packages.addDependency(c.packageName),e.imports.addImport(c.moduleURL,{exportSpecifier:c.exportIdentifier,composeWithImports:[e.imports.addImport("framer",{exportSpecifier:"withMeasuredSize"})]})}g(be(i),"A code component that is not a package must be a module.");let{importSpecifier:a,exportSpecifier:s,importBinding:l}=Yr(i,e.moduleType,e.modulesStore);return g(a,"A module must have an import specifier."),Kk(i,e),e.fonts.addFontReference({componentIdentifier:t.codeComponentIdentifier,fontReference:e.imports.addImport(a,{exportSpecifier:s,importBinding:l,composeWithImports:[e.imports.addImport("framer",{exportSpecifier:"getFonts"})]})}),e.imports.addImport(a,{exportSpecifier:s,importBinding:l,composeWithImports:n})}case"OverlayNode":return e.imports.addImport("framer",{exportSpecifier:"ResetOuterLinkContext"});case"FormBooleanInputNode":return e.imports.addImport("framer",{exportSpecifier:"FormBooleanInput",composeWithImports:n});case"FormPlainTextInputNode":return e.imports.addImport("framer",{exportSpecifier:"FormPlainTextInput",composeWithImports:n});case"FormSelectNode":return e.imports.addImport("framer",{exportSpecifier:"FormSelect",composeWithImports:n});default:$(t.__class)}}function Kv(t,e){if(mt(e)){let r=t.dataForIdentifier(e.dataIdentifier);return g(r,"A Data Repeater must have an evaluated data entity in the sandbox."),{id:e.id,annotations:r.annotations}}if(Xo(e))return{id:e.id,annotations:void 0};$(e,"A data repeater must have either an identifier or array variable")}function Qk(t,e,r){let o=[];for(let n of e){if(Oc(n))continue;let i=r?.get(n);if(!i)continue;let a=Jo(n,t.id,!1),s=Jp(i.type);Pr(s)&&o.push(m`${a} ??= ${s}`)}return o}function Zk(t,e,r,o){if(mt(t)){let n=r?.framerRecordIdKey;return n?e.variables.create(Sn(n,t.id)):o}return e.bindings.create("id")}function eM(t,e){if(mt(t))return e.bindings.createWithNode("collection",t);if(Xo(t))return e.variables.create(t.dataRepeaterArray);$(t,"parent should be a collection or array repeater")}function tM(t,e,r,o,n){let i=mt(t)?{}:{[Dy]:e};for(let a of r)Oc(a)||(i[a]=Jo(a,t.id,!1));if(mt(t)){g(o,"Subqueries must exist");for(let a of o.childRepeaterIds){let s=n.treeStore.tree.get(a);g(s,"Repeater node must exist");let l=n.bindings.createWithNode("collection",s);i[a]=l}}return i}function Yv(t,e,r,o,n){let i=Zk(t,o,e,n),a=eM(t,o),s=o.variables.variableIdsByProviderId.get(t.id)??new Set,l=tM(t,i,s,r.subqueries,o),c=r.inheritedControlMap?.get(t.id),d=Va(t);return{args:m`${l}, ${n}`,variableFallbackList:Qk(t,s,c),data:a,key:d?m`${i} ?? ${n}`:i}}var rM=me("jsxForNode");async function oM(t,e,r,o){let n=As(e.treeStore.tree,t,P);for(let i in n){if(i==="children")continue;let a=[],s=n[i];if(s){for(let l of s){let c=await zl(l.node,t,e,{...o,inComponentSlot:!0});c&&c.length>0&&a.push(c)}r.props[i]=a}}}function nM(t,e,r){if(Fe(t))return Y(Br(e.imports.addImport("framer-motion",{exportSpecifier:"motion.div"}),e,r));if(G(t)&&t.codeComponentIdentifier==="framer/Prototype"){let o=qv(t,e);if(o)return Y(se.tag(o,void 0))}return""}function iM(t,e,r){if(Oe(e)){let o=Kv(P,e);return r.repeaterInfo.set(e.id,o),e.id}return t.lastRepeaterId}function aM(t,e,r){return Oe(e)?!1:!!(An(r.treeStore.tree,e)||t.inRepeatedItem)}function sM(t,e,r,{itemsOrderOverrides:o,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,subqueries:s,kitSectionId:l}){return{...t,lastRepeaterId:iM(t,e,r),inRepeatedItem:aM(t,e,r),subqueries:s,itemsOrderOverrides:o,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,kitSectionId:t.kitSectionId??l,inComponentSlot:t.inComponentSlot||G(e)&&e.codeComponentIdentifier!=="framer/Prototype"}}function lM(t,e,r,o,n){let i=[],s=o.treeStore.tree.getPresetsListNode()?.getComponentPresets();if(Xe(t)&&ce(t.htmlContent)&&s&&s.length>0){let u=o.imports.addImport(`../${jn}`,{exportSpecifier:"*",importBinding:"componentPresets"}),f={},h=t.getComponentPresets();for(let[y,C]of h)o.componentPresetIds.add(C),f[y]=m`${u}.props[${C}]`;i.push(y=>se.tag(o.imports.addImport("framer",{exportSpecifier:"ComponentPresetsProvider"}),new E({presets:f}),y))}G(t)&&vr(t)&&i.push(u=>Br(Jv(t,o,r,n),o,r.propsForContainer,u)),G(t)&&!t.isVectorInstance&&i.push(u=>Br(o.imports.addImport("framer",{exportSpecifier:"ComponentViewportProvider"}),o,r.propsForComponentViewport,u));let l=o.links.getUnresolvedLinksForNode(t);if(l){let{unresolvedLinks:u,binding:f}=l;if(Pr(u)||rp(u)){let h=o.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),y=new E({links:u});i.push(C=>Br(h,o,{props:y},m`(${f}) => (${C})`))}}if(r.isAnyVariantALink&&i.push(u=>Br(o.imports.addImport("framer",{exportSpecifier:"Link"}),o,r.propsForLink,u)),r.isAnyVariantATransitionOverride){let u=o.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),f=o.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),h=o.declarations.file.dedupe("Transition",new v(re.lines(m`({value, children}) => {`,m`const config = ${f}.useContext(${u})`,m`const transition = value ?? config.transition`,m`const contextValue = ${f}.useMemo(() => ({ ...config, transition }), [JSON.stringify(transition)])`,m`return <${u}.Provider value={contextValue}>{children}</${u}.Provider>`,m`}`)));i.push(y=>Br(h,o,r.propsForTransition,y))}let c=o.events.overlayTriggerOverlayBindings.get(t.id);if(c&&c.size>0){i.push(C=>se`<>${C}</>`);let u=m`visible`,f=m`setVisible`,h={visible:m`enabled && ${u}`,[nl.show]:m`() => ${v.fn(f,m`true`)}`,[nl.hide]:m`() => ${v.fn(f,m`false`)}`,[nl.toggle]:m`() => ${v.fn(f,m`!${u}`)}`},y=o.declarations.file.dedupe("Overlay",new v(re.lines(m`({ children, blockDocumentScrolling, enabled = true, }) => {`,m`const ${[u,f]} = ${v.fn(o.imports.addImport("framer",{exportSpecifier:"useOverlayState"}),m`{ blockDocumentScrolling }`)}`,m`return children(${h})`,m`}`)));for(let[C,b]of c){let N=o.treeStore.tree.get(C);if(!N)continue;let T=new E({blockDocumentScrolling:Fe(N)?N.blockDocumentScrolling:!1}),w=o.renderConditions.get(C);wt(w)&&(T.enabled=w),i.push(V=>se.tag(y,T,m`${b} => (${V})`))}}let d=o.events.overlayState.get(t.id);if(d&&Fe(t)){let u=o.imports.addImport("react-dom",{exportSpecifier:"*",importBinding:"ReactDOM"}),f=`#${Aa}`,h=`#${Fa}`,y=o.declarations.file.dedupe("getContainer",m`() => {${m.joinLines(m`return document.querySelector(${f}) ?? document.querySelector(${h}) ?? document.body`)}}`);i.push(C=>se`<>{${u}.createPortal(${C}, ${v.fn(y)})}</>`)}e&&d&&Bt(t)&&r.isAnyVariantFloating&&i.push(u=>Br(o.imports.addImport("framer",{exportSpecifier:"Floating"}),o,r.propsForFloating,u)),d&&Nt(t)&&i.push(u=>se.tag(o.imports.addImport("framer-motion",{exportSpecifier:"AnimatePresence"}),void 0,m`${d}.visible && (${u})`)),r.renderCondition!==!0&&i.push(u=>m`${r.renderCondition} && (${u})`);let p=o.fetches.getResultBinding(t);if(r.propsForFetcher&&p&&i.push(u=>Br(o.imports.addImport("framer",{exportSpecifier:"Fetcher"}),o,r.propsForFetcher,m`${p} => (${u})`)),Oe(e)&&An(o.treeStore.tree,t)){let u=o.repeaterInfo.get(e.id);if(g(u,"jsxForNode: `repeaterInfo` must exist when transforming the child of a repeater."),mt(e)){let T=o.links.getPathVariablesForRepeaterInfo(u);T&&i.push(w=>se.tag(o.imports.addImport("framer",{exportSpecifier:"PathVariablesContext.Provider"}),new E({value:T}),w))}let f=o.bindings.create("index"),{data:h,args:y,variableFallbackList:C,key:b}=Yv(e,u.annotations,r,o,f),N=o.variables.variableIdsByProviderId.get(e.id)?.has(Ec)?new v(Jo(Ec,e.id,!1)):void 0;i.push(T=>m`${h}?.map((${y}) => {${m.joinLines(...C,N&&m`const ${N} = ${f} + 1`,...o.declarations.component.list(e),m`return (${se.tag(o.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),new E({key:b,id:ge`${e.id}-${b}`}),T)})`)}})`)}return i}function cM(t,e,r){let n=vr(t)?e.propsForContainer:e.propsForElement,i=r.events.overlayTriggerOverlayBindings.get(t.id);if(i&&i.size>0){let l=n.props;l||(l=new E),l.id=l.id??r.elementIds.id(t)}let s=r.cssVariableDefinitions.getDefinitionsForNode(t)??{};if(!Ve(s)){let l=n.props;l||(l=new E),l.style?Object.assign(l.style,s):l.style=s}}async function zl(t,e,r,o){try{if(ho(t)){g(e&&r.layoutTemplateSlotBinding,"A SlotNode must be in a Layout Template and have a parent.");let l=fv(t,e,r);return se`${m.joinLines(se.children(r.layoutTemplateSlotBinding),se.tag(m`div`,new E({className:l})))}`}await pM(t,r),r.metrics.count("nodes");let n=mv(t,e,r,o);if(!n)return se``;G(t)&&await oM(t,r,n.propsForElement,o);let i=nM(t,r,n.propsForElement),a=sM(o,t,r,n);for(let l of mM(t,r)){if(Nt(l)&&!r.events.overlayState.has(l.id))continue;let c=await zl(l,t,r,a);c&&(i+=Y(se.children(c)))}cM(t,n,r);let s=await gM(t,r,o,a,n,se.fromTrustedString(i));return se.applyTransforms(s,lM(t,e,n,r,o))}catch(n){return rM.reportError(n,{node:t.id,primaryVariant:r.rootId}),r.errors.record(t,n),se``}}async function $l(t,e,r,o,n=`framer-${_n(5)}`){let{combinedVariableControlMap:i}=e.combineVariableControlMap(r.treeStore.tree,void 0,P,P.activeBundleHash),a={inheritedControlMap:i},s=Uv(t,e,r,o,n);return{ctx:s,jsx:await zl(t,null,s,a)}}async function Bl(t,e,{modulesStore:r,errors:o,treeStore:n,rootId:i}){let a=n.tree.get(i),s=n.tree.getScopeNodeFor(a);if(Mm(n.tree,s,t))return;for(let c of e)if(Ft(c)&&c.type==="codeFile"){let p=P.componentForIdentifier(c.value),u=P.errorForIdentifier(c.value);p?u&&o.record(t,"CodeError",c.value):o.record(t,"MissingModule",c.value);return}let l=dM(e);l.length>0&&await r.preloadExternalModules(l),await Gn(P,e.map(c=>c.value),r)}function dM(t){let e=[];for(let r of t)Nr(r)&&e.push(r);return e}function uM(t,e){if(!be(t.codeComponentIdentifier))return;let r=new Set([t.codeComponentIdentifier]);for(let o of e.variants){let n=Zo(o,t.id,e.treeStore.tree);n&&(g(G(n),"Expected a CodeComponentNode in the variant",n?.id),be(n.codeComponentIdentifier)&&r.add(n.codeComponentIdentifier))}return r}async function pM(t,e){if(G(t)){if(t.codeComponentIdentifier==="framer/Prototype"){let n=Ps(t,P);if(!n)return;await Bl(t,[pt("prototype",n,"default")],e)}let r=uM(t,e);if(!r)return;let o=[];for(let n of r)o.push(Q(n));await Bl(t,o,e)}if(Tm(t)){if(!be(t.codeOverrideIdentifier))return;await Bl(t,[Q(t.codeOverrideIdentifier)],e)}mt(t)&&await Bl(t,[Q(t.dataIdentifier)],e)}function mM(t,e){return!Vn(t)||Cn(t)||Xe(t)?Lu():G(t)&&t.codeComponentIdentifier!=="framer/Prototype"?iy(e.treeStore.tree,t,P).map(r=>r.node):t.children}function fM(t,e,r,o,n){if(!Va(t)){if(mt(t)){let i=e.variables.variableIdsByProviderId.get(t.id)??new Set,a=Hv(t,e,r,o,i);if(a){let s=e.declarations.file.dedupe("QueryData",Gv(t,e)),l=e.bindings.createWithNode("collection",t),c=e.bindings.createWithNode("paginationInfo",t),d=e.bindings.createWithNode("loadMore",t);n.push(p=>se.tag(e.imports.addImport("framer",{exportSpecifier:"ChildrenCanSuspend"}),void 0,Br(s,e,a,m`(${l}, ${c}, ${d}) => (<>${p}</>)`)))}return}$(t,"All data repeater types should be handled")}}function hM(t,e,r,o){let n=[];return Dr(t)&&n.push(i=>m`(${Pd}) => (<>${i}</>)`),Oe(t)&&fM(t,e,r,o,n),n}async function gM(t,e,r,o,n,i){let a=Br(Xv(t,e,r,n),e,Fe(t)?void 0:n.propsForElement,se.applyTransforms(i,hM(t,e,r,n)));if((G(t)||Xe(t))&&Um(t,"framer/useShowRelativeOverlay")){let s=Y(a);for(let l of t.children){if(!Nt(l)||!e.events.overlayState.has(l.id))continue;let c=await zl(l,t,e,o);c&&(s+=Y(se.children(c)))}return se.fromTrustedString(s)}return a}function Br(t,e,r,o){if(!r)return se.tag(t,void 0,o);let{props:n=new E,overrides:i}=r,a=[];if(i)switch(e.scopeType){case"SmartComponent":E.addSpreadAtEnd(n,v.fn(m`addPropertyOverrides`,i,m`baseVariant`,m`gestureVariant`));break;case"WebPage":case"LayoutTemplate":a.push(s=>se.tag(e.imports.addImport("framer",{exportSpecifier:"PropertyOverrides"}),new E({breakpoint:m`baseVariant`,overrides:i}),s));break;default:break}return se.applyTransforms(se.tag(t,n,o),a)}async function Ul(t,e,r,o,n,i){return bo(e)&&e.usesDOMRectCached()&&!e.getDOMRect()&&(await yM(e,o,r,n),!e.cache.getRawDOMRect(e.id)&&i)?et.atOrigin(i):t.getRect(e)}async function yM(t,e,r,o){if(e){let a=(await e({ids:[t.id]}))?.measurements?.[0];if(a){let{layoutMetrics:s}=a,l=et.from(s);t.cache.setRawDOMRect(t.id,l);return}}if(!r)return;let n=SM(r,o);if(n){let i=et.atOrigin(n);t.cache.setRawDOMRect(t.id,i)}}function SM(t,e){if(!Ft(t))return;let r=e.getPersistedModuleByLocalIdentifier(t);if(!r)return;let{intrinsicWidth:o,intrinsicHeight:n}=r.metadata;if(H(o)&&H(n))return{width:o,height:n}}var tr={Screen:m`Screen`,activeVariantCallback:R.activeVariantCallback,css:R.css,delay:R.delay,ref:R.ref,serializationHash:R.serializationHash,sharedStyleClassNames:R.sharedStyleClassNames,restProps:R.restProps,refBinding:R.refBinding},CM=new Set(Object.values(tr).map(t=>Y(t))),Qv=kt(async(t,e,{serializationId:r,initialIntrinsicSize:o})=>{let n=e.treeStore.tree.getScopeNodeFor(t);if(!we(n))return[];let i=e.treeStore.tree.get(t.id);g(i,"Must have a source node to serialize. This should be a primary variant."),g(we(n),"Must have a scope node to serialize. This should be a CanvasPage Node.");let{assetMap:a,engineChanges:s,modulesStore:l,treeStore:c}=e,d={assetMap:a,engineChanges:s,modulesStore:l,treeStore:c},p=`FramerScreen${Ne(t.id)}`,u=pt("screen",t.id,"default").value,{jsx:f,ctx:h}=await $l(i,n,d,new Set(CM).add(p),r);g(f,"There must be JSX to serialize.");let y=h.imports,C=await Ul(d.treeStore.tree,i,u,e.measureNodes,d.modulesStore,o),b=h.events.navigationTargets.size>0,N=h.events.handlers.size>0,T=h.events.variantOnAppearId.get(t.id),w=h.events.keyBindHooks.size>0,V=[];for(let ie of h.events.navigationTargets)ie!==wd&&V.push(ie);let L=h.fonts.fontObjects,F=new Map(h.fonts.fontReferences),{variables:_}=h.variables,z=[],Z=new Set(h.css.sharedStyleIds),M=[];for(let ie of Z){let Te=Ee("css",ie),st=y.addImport(`../${Te}`,{exportSpecifier:"*",importBinding:"sharedStyle"});M.push(st),z.push(v.fn(y.addImport("framer",{exportSpecifier:"getFontsFromSharedStyle"}),m`${st}.fonts`))}let he;for(let ie of h.componentPresetIds){he??=y.addImport(`../${jn}`,{exportSpecifier:"*",importBinding:"componentPresets"});let Te=m`${he}.fonts?.[${ie}]`;z.push(m`(${Te} ? ${v.fn(h.imports.addImport("framer",{exportSpecifier:"getFontsFromComponentPreset"}),Te)} : [])`)}let Ie=new Map;Bn(h.css.get(),Ie);let de=new v(p),ee=y.addImport("react",{exportSpecifier:"useRef"}),ue=re.lines(b&&`const preload = ${Y(V)};`,...h.declarations.file.list(),m`const ${tr.serializationHash} = ${r}`,m`const ${tr.Screen} = ${bM({props:m`style, className`},m`const fallbackRef = ${v.fn(m`${ee}<HTMLElement>`,m`null`)}`,m`const ${tr.refBinding} = ${tr.ref} ?? fallbackRef`,b?m`const navigate = ${v.fn(y.addImport("framer",{exportSpecifier:"usePrototypeNavigate"}),{preload:m`preload`})}`:void 0,N&&m`const { ${tr.activeVariantCallback}, ${tr.delay} } = ${v.fn(y.addImport("framer",{exportSpecifier:"useActiveVariantCallback"}))}`,...h.events.handlers.values(),m`const ${tr.sharedStyleClassNames} = ${M.map(ie=>m`${ie}.className`)}`,...h.declarations.component.list(),w&&re.linesFrom(h.events.keyBindHooks),T&&v.fn(y.addImport("framer",{exportSpecifier:"useOnAppear"}),T),_.size>0&&m`const { ${m.listFrom(_)} } = {}`,m`return ${f}`)}`,m`const ${tr.css} = ${[...h.css.conditionalRules(r),ys,...zn(Ie),...M.map(ie=>m`...${ie}.css`)]}`,Ss(de,r,tr.Screen,tr.css,{framerIntrinsicHeight:C.height,framerIntrinsicWidth:C.width,framerSupportedLayoutWidth:"fixed",framerSupportedLayoutHeight:"fixed",framerScreen:void 0,framerDisplayContentsDiv:!1},y),m`${de}.displayName = ${`Screens/${n.name?.trim()||"Generated Component"}`};`,m`${de}.defaultProps = ${{width:C.width,height:C.height}};`,el({componentName:de,fontObjects:L,fontReferences:F,imports:y,declarations:h.declarations.font,sharedFontArrays:z}));return[{type:"screen",revision:void 0,source:new v(re.sections(re.linesFrom(y.statements),ue)),artifacts:{assets:h.assets.keys,packageDependencies:h.packages.dependencies,metrics:h.metrics.get()}}]});function bM({props:t},...e){return new v(re.lines(m`React.forwardRef(function({ ${t}, ...${tr.restProps} }, ${tr.ref}) {`,...e,m`});`))}var eI="{serializationId}";function Zv(t){return`.${eI} ${t}`}var tI=kt(async(t,{treeStore:e},{serializationId:r})=>{let o=new Kr,n=new hs(o),i=new Vo(n),a=t.getFontsForCodeGeneration(),s=t.moduleSourceRevision,l=vn(t);for(let b of a)i.addFontObjectBySelector(b,l);let c=[],d=new On,p={colors:d};for(let{selectors:b,declarations:N}of t.getCSS(p)){let T=b.map(Zv);c.push(`${T.join(", ")} { ${N} }`)}let u=e.tree.getNodesWithTrait(t.cache.replicaInstances??[],Zh).filter(tf).sort((b,N)=>(N.breakpointWidth??0)-(b.breakpointWidth??0));for(let b=0;b<u.length;b++){let N=u[b];if(N===void 0)continue;let T=u[b+1],w=N.breakpointWidth-1,V=T?.breakpointWidth??0;for(let{selectors:L,declarations:F}of N.getCSS(p)){let z=`${L.map(Zv).join(", ")} { ${F} }`;c.push(`@media (max-width: ${w}px) and (min-width: ${V}px) { ${z} }`)}}let f=d.getWideGamutColorRules(`.${r}`);f.length&&c.push(`@supports (color: color(display-p3 1 1 1)) { ${f.join(" ")} }`);let h=c.map(b=>b.replaceAll(eI,r)),y=zi({fontObjects:i.fontObjects,fontReferences:i.fontReferences}),C=m.joinLines(m`import { fontStore } from "framer";`,m`fontStore.loadFonts(${a});`,...n.list(),m`export const fonts = ${y};`,m`export const css = ${h};`,m`export const className = ${r};`);return[{revision:s,type:"css",source:C,artifacts:{metrics:{nodes:c.length}}}]});function Zd(t){if(St(t))return{widthType:t.widthType,heightType:t.heightType,...Io(t)?{minHeight:t.minHeight,maxHeight:t.maxHeight,minWidth:t.minWidth,maxWidth:t.maxWidth}:zm}}function eu(t,e){if(Be(e))return{min:t.getRect(e).width}}var vM=new Set(Object.values(R).map(t=>Y(t)));function IM(t,e){if(ar(t)){let r=e.get(t.parentid);return!Pe(r)||!r.isLoaded()?null:r}return e.current(t)}var tu=kt(async(t,e,{serializationId:r,initialIntrinsicSize:o})=>{let{assetMap:n,engineChanges:i,modulesStore:a,treeStore:s,aiGenerationStore:l,measureNodes:c}=e,d=zt(t,s.tree)?t.moduleSourceRevision:void 0,p=IM(t,s.tree);g(p?.isLoaded(),"The scope node must be valid.");let u=Yd(p),f=Gt(p)?p.baseVariantId:t.id,h=s.tree.get(f);g(h,"Must have a source node to serialize. This should be a primary variant.");let y={assetMap:n,engineChanges:i,modulesStore:a,treeStore:s},C=`Framer${t.id}`,b=new v(C),{jsx:N,ctx:T}=await $l(h,p,y,new Set(vM).add(C),r);g(N,"There must be JSX to serialize.");let w=T.imports,V=Pe(p),L=V?void 0:p.instanceIdentifier,F=await Ul(y.treeStore.tree,h,L,c,y.modulesStore,o),_=Gt(p)?p.getReplicaVariants():[],{variants:z,hook:Z}=T.preload.getHook(),{gestures:M,breakpoints:he,classNames:Ie,sizes:de,appearEventMap:ee}=LM(h,_,T,y,z),ue=He(p)?[p.baseVariantId,...p.getTopLevelReplicaVariants().map(Ws)]:[],ie=ue.length>1,Te=!Ve(M),st=!Ve(ee),K=!Ve(he),B=m`${w.addImport("react",{exportSpecifier:"*",importBinding:"React"})}.useId`,{mediaQueries:ae,sharedStyleImports:ke,sharedFontArrays:qe,css:Dt}=PM(r,T,_,he,p),xe=se.applyTransforms(N,EM(p,T,DM(p,h,_,ae,y.treeStore,T))),rr=U(p)?By(p):new Set,Tt={};for(let Me of rr){let ut=Sn(Me,p.id);Tt[Me]=T.variables.create(ut)}let{props:Wr,types:or,propertyControls:Pt,variableMap:dt}=Hs(p,y,T,Es(p),u,F),te=xM(p,e),le=!K&&m`const ${R.layoutDependency} = ${v.fn(T.declarations.file.dedupe("createLayoutDependency",m`(props, variants) => {${m.joinLines(m`if (props.layoutDependency) return variants.join('-') + props.layoutDependency`,m`return variants.join('-')`)}}`),m`props`,R.variants)}`,{cursors:Ue}=T.customCursors,fr=w.addImport("react",{exportSpecifier:"useRef"}),Ir=re.sections(Te&&m`const ${R.enabledGestures} = ${M};`,ie&&`const ${R.cycleOrder} = ${Y(ue)};`,K&&`const ${R.breakpoints} = ${Y(ae)}`,K&&`const ${R.isBrowser} = () => typeof document !== "undefined";`,V&&m`const ${R.variant} = undefined;`,V&&m`const ${R.breakpoints} = undefined;`,V&&m`const ${R.layoutId} = undefined;`,V&&m`const ${R.className} = undefined;`,V&&m`const ${R.style} = undefined;`,m`const ${R.serializationHash} = ${r}`,`const ${R.variantClassNames} = ${Y(Ie)};`,!K&&RM,...T.declarations.file.list(),`export interface Props extends React.HTMLAttributes<HTMLDivElement> { ${or} }`,`const ${R.Component} = ${NM(m`const fallbackRef = ${v.fn(m`${fr}<HTMLElement>`,m`null`)}`,m`const ${R.refBinding} = ${R.ref} ?? fallbackRef`,m`const ${R.defaultLayoutId} = ${v.fn(B)}`,`const { ${R.activeLocale}, ${R.setLocale} } = ${v.fn(w.addImport("framer",{exportSpecifier:"useLocaleInfo"}))}`,He(p)||U(p)?m`const ${R.componentViewport} = ${v.fn(T.imports.addImport("framer",{exportSpecifier:"useComponentViewport"}))}`:void 0,VM({data:te,imports:w,variables:T.variables.variables}),Wr,U(p)&&kM({webPageNodeId:t.id,metadataDependencies:Tt,imports:w,bindings:T.bindings}),K?m.joinLines(m`const [${R.baseVariant}, ${R.hydratedBaseVariant}] = ${v.fn(w.addImport("framer",{exportSpecifier:"useHydratedBreakpointVariants"}),R.variant,R.breakpoints,m`false`)};`,m`const ${R.gestureVariant} = undefined;`):TM(h.id,Te,ie,w),le,AM(T),...T.events.routeHandlers.values(),T.events.handlers.size>0&&m`const { ${R.activeVariantCallback}, ${R.delay} } = ${v.fn(w.addImport("framer",{exportSpecifier:"useActiveVariantCallback"}),K?m`undefined`:R.baseVariant)}`,...T.events.handlers.values(),st&&v.fn(w.addImport("framer",{exportSpecifier:"useOnVariantChange"}),K?R.hydratedBaseVariant:R.baseVariant,ee),m`const ${R.sharedStyleClassNames} = ${ke.map(Me=>m`${Me}.className`)}`,...T.declarations.component.list(),Ue,Z?.(Te?R.enabledGestures:m`undefined`),m`return (${xe})`)}`,Dt,Ss(b,r,R.Component,R.css,wM(p,T,F,de,dt),w),`${C}.displayName = ${Y(p.name?.trim()||"Generated Component")};`,`${C}.defaultProps = ${Y({width:F.width,height:F.height})};`,Pt&&v.fn(w.addImport("framer",{exportSpecifier:"addPropertyControls"}),b,new v(`${Y(Pt)} as any`)),el({componentName:b,fontObjects:T.fonts.fontObjects,fontReferences:T.fonts.fontReferences,imports:w,declarations:T.declarations.font,sharedFontArrays:qe})),[Hr]=U(p)?await Oy(p,e,{serializationId:r}):[];return zs([{type:u,revision:d,source:new v(re.sections(re.linesFrom(w.statements),Ir)),artifacts:{packageDependencies:T.packages.dependencies,errors:T.errors.errors,assets:T.assets.keys,metrics:T.metrics.get(),kitSectionsStructure:l.cacheKitSectionsStructure(t.id,T.kitSectionsStructure.structure)}},Hr,T.localizedValues.module(d)])});function TM(t,e,r,o){let n=E.fromEntries([[R.defaultVariant,t],[R.variant,R.variant],[R.variantClassNames,R.variantClassNames],[R.enabledGestures,e?R.enabledGestures:void 0],[R.cycleOrder,r?R.cycleOrder:void 0],[R.ref,R.refBinding]]),i=v.fn(o.addImport("framer",{exportSpecifier:"useVariantState"}),n),a=R.variants,s=R.baseVariant,l=m`setVariant`,c=R.gestureVariant,d=R.classNames,p=R.setGestureState,u=R.gestureHandlers,f=R.clearLoadingGesture,h=R.isLoading;return re.lines(m`const ${{variants:a,baseVariant:s,setVariant:l,gestureVariant:c,classNames:d,setGestureState:p,gestureHandlers:u,clearLoadingGesture:f,isLoading:h}} = ${i}`)}function NM(...t){return re.sections(m`React.forwardRef<HTMLDivElement, Props>(function(props, ${R.ref}) {`,...t,m`});`)}function wM(t,e,r,o,n){let{height:i,width:a}=r,s={propertyName:"variant",data:Object.fromEntries(Object.entries(o).map(([c,d])=>[c,gf(d)]))},l={framerIntrinsicHeight:i,framerIntrinsicWidth:a,framerRootFontSize:kr(t)?t.getPrimaryVariant()?.rootFontSize:void 0,framerCanvasComponentVariantDetails:JSON.stringify(s),framerVariables:n&&JSON.stringify(n),framerImmutableVariables:!0,framerDisplayContentsDiv:!1,framerAutoSizeImages:!0,framerComponentViewportWidth:!0,framerColorSyntax:!0,framerVectorSets:e.vectorSets.annotation()};if(pe(t)){let c={},d=t.getBreakpointValues();for(let p in d){let u=e.treeStore.tree.get(p);c[p]={...d[p],canvasClassName:iI(p),minHeight:u?.height,viewportHeight:u?.viewportHeight,name:u?.name??void 0,width:u?.widthType===0?u?.width:void 0,rootFontSize:u?.rootFontSize??La}}l.framerHitTargets=e.hitTargets.annotation(),l.framerBreakpoints=JSON.stringify(c),l.framerDefaultVariant=t.baseVariantId,l.framerTrackingIds=e.trackingIds.annotation(),l.framerLayoutTemplate=""}else U(t)?(l.framerAcceptsLayoutTemplate=e.acceptsLayoutTemplate,l.framerTrackingIds=e.trackingIds.annotation(),l.framerScrollSections=e.elementIds.annotation(),l.framerResponsiveScreen=""):He(t)?l.framerTrackingIds=e.trackingIds.annotation():Pe(t)?l.framerDesign="":He(t)||(l.framerScreen="");return l}function xM(t,e){if(!U(t)||!mt(t)||!ss(e.treeStore.tree,t))return;let o=t.getVariableControlMap(e.treeStore.tree,P,P.activeBundleHash)??new Map;return{defaultCollectionAlias:Gs(t),identifier:t.dataIdentifier,controlMap:o}}var RM=re.lines("function addPropertyOverrides(overrides, ...variants) {","const nextOverrides = {}","variants?.forEach(variant => variant && Object.assign(nextOverrides, overrides[variant]))","return nextOverrides","}");function kM({webPageNodeId:t,metadataDependencies:e,imports:r,bindings:o}){let n=r.addImport(`../${Ly(t).localId}`,{exportSpecifier:"default",importBinding:"metadataProvider"}),i=o.create("metadata"),a=r.addImport("framer",{exportSpecifier:"useMetadata"}),s=v.fn(n,e,R.activeLocale),l=Object.values(e).concat(R.activeLocale);return re.lines(m`const ${i} = React.useMemo(() => ${s}, ${l})`,v.fn(a,i))}function MM(t){if(Rr(t))return{type:t.gesture,topLevel:t.replicaInfo.inheritsFrom}}function VM({data:t,imports:e,variables:r}){if(!t)return;let o=e.addImport("framer",{exportSpecifier:"useCurrentPathVariables"}),n=e.addImport("framer",{exportSpecifier:"NotFoundError"}),i=e.addImport("framer",{exportSpecifier:"useQueryData"}),a=e.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"}),s=new Set;for(let[h]of t.controlMap){let y=Jo(h,void 0,!0);r.has(y)&&s.add(h)}function l(h){let y=e.addModuleImport(h);return g(y,"Can't import collection"),y}let c=new Set,d=uS(t.controlMap,s,c,t.defaultCollectionAlias,l),p=dS(t.identifier,t.controlMap,c,t.defaultCollectionAlias,l),u=m`const [${R.currentRouteData}] = ${v.fn(i,{from:p,select:d,where:v.fn(a,R.currentPathVariables,t.defaultCollectionAlias)})};`;return m.joinLines(m`const ${R.currentPathVariables} = ${v.fn(o)};`,u,m`const ${R.getFromCurrentRouteData} = (key) => {
            if (!${R.currentRouteData}) throw new ${n}(\`No data matches path variables: \${JSON.stringify(${R.currentPathVariables})}\`);
            return ${R.currentRouteData}[key];
        };`)}function iI(t){return`framer-${Ne(t)}-override`}function rI(t,e){if(!(!kn(t)||Mn(t)&&!t.fillEnabled))return t.fillType==="color"&&D(t.fillColor)?e(t.fillColor,t,"fill"):af(t)}function oI(t){if(!Tp(t))return;let e=t.rootFontSize/16*100;return Np(e,"%")}function nI(t,e){return A(t)?t:v.fn(e.imports.addImport("framer",{exportSpecifier:"safeCSSValue"}),t)}function DM(t,e,r,o,n,i){if(!pe(t)&&!U(t))return;let a=Ol(n,i.declarations,i.variables,i.valueTransforms),s=pe(t)?":root":"html",l=`${s} body`,c=oI(e),d=rI(e,a)??"none",p=[ge`${l} { background: ${nI(d,i)}; }`];A(c)&&p.push(`${s} { font-size: ${c}; }`);for(let u of r){let f=o[u.id];if(f){let h=rI(u,a)??"none",y=oI(u),C=[];if(It(d,h)||C.push(ge`${l} { background: ${nI(h,i)}; }`),It(c,y)||C.push(`${s} { font-size: ${y}; }`),C.length===0)continue;p.push(ge`@media ${f} { ${ge.join(C," ")} }`)}}return ge.join(p," ")}function PM(t,e,r,o,n){let i=Cg(Sg(o)),a=[],s=new Map;if(pe(n)){let y=n.getPrimaryVariant(),C={marginBottom:Wn(y,e)};e.css.createRule(`[${Ui}="true"] > #overlay`,Pn(C));for(let b of r){let N={marginBottom:Wn(b,e)},T=to(N,C);!T||Ve(T)||e.css.createRule(`[${Ui}="true"] > #overlay`,Pn(T),b.id)}}Bn(e.css.get(),s);let l={},c={};for(let y of r){let C=i[y.id];if(C){let b=new Map;if(Bn(e.css.get(y.id),b),!b.size)continue;pe(n)?(l[y.id]=zn(b),c[y.id]=`.${iI(y.id)}`):a.push(ge`@media ${C} { ${ge.join(zn(b)," ")}}`)}else Bn(e.css.get(y.id),s)}let d=[],p=[];for(let y of e.css.sharedStyleIds){let C=Ee("css",y),b=e.imports.addImport(`../${C}`,{exportSpecifier:"*",importBinding:"sharedStyle"});p.push(b),d.push(v.fn(e.imports.addImport("framer",{exportSpecifier:"getFontsFromSharedStyle"}),m`${b}.fonts`))}let u;for(let y of e.componentPresetIds){u??=e.imports.addImport(`../${jn}`,{exportSpecifier:"*",importBinding:"componentPresets"});let C=m`${u}.fonts?.[${y}]`;d.push(m`(${C} ? ${v.fn(e.imports.addImport("framer",{exportSpecifier:"getFontsFromComponentPreset"}),C)} : [])`)}let f=[ys,...zn(s),...p.map(y=>m`...${y}.css`),...e.css.conditionalRules(t)],h=FM(n,e,f,a,l,c,i);return{sharedStyleImports:p,sharedFontArrays:d,mediaQueries:i,css:m`const ${R.css} = ${h}`}}function FM(t,e,r,o,n,i,a){if(He(t)||Pe(t))return r;if(U(t))return[...r,...o];if(pe(t)){let s=e.declarations.file.dedupe("breakpointRules",n),l=e.declarations.file.dedupe("breakpointKeys",m`Object.keys(${s})`),c=e.declarations.file.dedupe("selectors",i),d=e.declarations.file.dedupe("rules",r),p=e.declarations.file.dedupe("mediaQueries",a),u=e.bindings.create("target"),f=e.bindings.create("query"),h=e.bindings.create("selector"),y=e.bindings.create("rule"),C=e.imports.addImport("framer",{exportSpecifier:"RenderTarget"});return m`(target) => {${m.joinLines(m`const isStaticRenderer = ${u} === ${C}.canvas || ${u} === ${C}.export`,m`if (!isStaticRenderer) {${m.joinLines(m`return [...${d}, ...${l}.map(key => {${m.joinLines(m`const ${f} = ${p}[key]`,m`return ${ge`@media ${f} { ${m`${s}[key].join(" ")`} }`}`)}})]`)}}`,m`return [...${d}, ...${l}.flatMap(key => {${m.joinLines(m`const ${h} = ${c}[key]`,m`return ${s}[key].map(${y} => ${ge`${h} {${y}}`})`)}})]`)}}`}$(t)}function AM(t){if(t.events.needsPathVariables)return`const ${ob} = React.useContext(${t.imports.addImport("framer",{exportSpecifier:"PathVariablesContext"})});`}function LM(t,e,r,o,n){let i=Zd(t);g(i,"The primary variant should have a default size as it must be a FrameNode.");let a={default:i},s={[t.id]:`framer-v-${Ne(t.id)}`},l={},c={},d={},p=eu(o.treeStore.tree,t);p&&(d[t.id]=p);let u=r.events.variantOnAppearId.get(t.id),f={};!x(u)&&!v.isUndefined(u)&&(f.default=u);for(let h of e){r.metrics.count("variants");let y=MM(h);if(y){let w=l[y.topLevel]??{};w[y.type]=y.type==="loading"?n?.has(y.topLevel):!0,l[y.topLevel]=w,c[y.topLevel]=[...c[y.topLevel]??[],h.id]}else s[h.id]=`framer-v-${Ne(h.id)}`;let C=Zd(h);C&&(a[h.id]=C);let b=eu(o.treeStore.tree,h);b&&(d[h.id]=b);let N=r.events.variantOnAppearId.get(h.id),T=Y(f[h.replicaInfo.inheritsFrom??""]??u);!x(N)&&Y(N)!==T&&(f[h.id]=N)}return{gestures:l,breakpoints:d,classNames:s,sizes:a,appearEventMap:f}}function EM(t,e,r){let o=[];if((pe(t)||U(t))&&r){let i=e.declarations.file.dedupe("HTMLStyle",m`({value}) => {${m.joinLines(m`const onCanvas = ${v.fn(e.imports.addImport("framer",{exportSpecifier:"useIsOnFramerCanvas"}))}`,m`if (onCanvas) return null`,m`return ${se.tag(m`style`,new E({"data-framer-html-style":"",dangerouslySetInnerHTML:{__html:m`value`}}))}`)}}`);o.push(a=>se`${m.joinLines(se.tag(i,new E({value:r})),a)}`)}if(He(t)){let i=e.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a=e.imports.addImport("framer-motion",{exportSpecifier:"motion.create"}),s=e.declarations.file.dedupe("Variants",v.fn(a,m`${i}.Fragment`));o.push(l=>se.tag(s,new E({initial:!1,animate:R.variants}),l))}if(U(t)||pe(t)||Pe(t)){let i=new E({id:pe(t)?Aa:Fa});o.push(a=>se`${m.joinLines(a,se.tag(m`div`,i))}`)}let n=e.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"});if(o.push(i=>se.tag(n,new E({id:m`layoutId ?? ${R.defaultLayoutId}`}),i)),U(t)||pe(t)){let i=e.imports.addImport("framer",{exportSpecifier:"GeneratedComponentContext"});o.push(a=>se.tag(m`${i}.Provider`,new E({value:{primaryVariantId:t.baseVariantId,variantClassNames:R.variantClassNames,isLayoutTemplate:pe(t)?!0:void 0}}),a))}return o}function aI(){let t=new v("7b363e7");return m`// Generated by Framer (${t})`}var sI={ref:R.ref,restProps:R.restProps,style:R.style,className:R.className,layoutId:R.layoutId},ru=m`css`,ea=m`Icon`,Wl=m`Component`,ta=m`Props`,OM=[...Object.values(sI),ru,ea,Wl,ta].map(t=>Y(t)),lI=kt(async(t,e,r)=>{let{serializationId:o}=r,{assetMap:n,engineChanges:i,modulesStore:a,treeStore:s,vectorsStore:l}=e,c=s.tree.getScopeNodeFor(t);g(De(c),"Vector set item must be in a VectorSetNode.");let d=s.tree.get(t.id);g(d,"Must have a source node to serialize");let p={assetMap:n,engineChanges:i,modulesStore:a,treeStore:s},{ctx:u,jsx:f,svg:h,type:y}=ph(d,c,p,o,OM),C=pt("vectorSet",c.id,"default").localId,b=a.getPersistedModuleByLocalId(C);g(b,"VectorSet must be persisted.");let N=s.tree.getRect(t),{propertyControls:T,variableMap:w,types:V,props:L}=Hs(c,p,u,"VectorSet","vector",N),F=BM(u),_={name:d.name??"Vector",empty:zM(d)?!0:void 0,color:F,set:{localId:C,id:c.id,moduleId:b.id}},z=u.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),Z=u.imports.addImport("framer",{exportSpecifier:"withCSS"}),M=$M[y],he=re.lines(...u.declarations.file.list(),m`interface ${ta} extends ${z}.HTMLAttributes<${z}.${M}> { ${V??m``} }`,m`const ${Wl}: ${z}.ComponentType<${ta}> = ${z}.forwardRef<${z}.${M}, ${ta}>(function(props, ${sI.ref}) {${m.joinLines(L,...u.declarations.component.list(),m`return (${f})`)}})`,m`const ${ru} = ${u.css.rules}`,xo("This is a generated Framer component.",{framerIntrinsicWidth:N.width,framerIntrinsicHeight:N.height,framerSupportedLayoutWidth:"any-prefer-fixed",framerSupportedLayoutHeight:"any-prefer-fixed",framerVariables:w&&JSON.stringify(w),framerImmutableVariables:!0,framerVector:JSON.stringify(_),framerDisableUnlink:fS.has(_.set.moduleId)?!0:void 0}),m`const ${ea}: ${z}.ComponentType<${ta}> = ${v.fn(Z,Wl,ru,o)} as typeof ${Wl};`,m`${ea}.displayName = ${d.name??"Vector"};`,m`export default ${ea}`,T&&v.fn(u.imports.addImport("framer",{exportSpecifier:"addPropertyControls"}),ea,new v(`${Y(T)} as any`)));return l.cache(t.id,{svg:Y(h),color:F}),zs([{revision:d.moduleSourceRevision,type:"vector",source:new v(re.sections(re.linesFrom(u.imports.statements),he)),artifacts:{files:[{name:"icon.svg",type:"svgIcon",content:Y(h)}]}}])});function BM(t){if(t.colors.uniqueColorCount!==1)return;let e=t.colors.singleColor;if(e)return{type:"static",value:e};let r=t.colors.singleVariableColor;if(r)return{type:"variable",value:Ne(r)}}function zM(t){return!t.children||t.children.length===0?!0:t.children.every(e=>e.visible===!1)}var $M={0:m`HTMLImageElement`,1:m`HTMLDivElement`,3:m`HTMLSVGElement`,2:m`HTMLSVGElement`};var cI=kt(async(t,{modulesStore:e},r)=>{let o=[];for(let a of t.getVectorSetItems()){let s=pt("vector",a.id,"default").localId,l=e.getPersistedModuleByLocalId(s);l&&o.push({id:a.id,name:a.name??"Vector",moduleId:l.id,saveId:r.includeVectorSetSaveIds?l.saveId:void 0})}let n={framerVectorSet:JSON.stringify({name:t.name??"Set",items:o})},i=new v(re.lines(xo("This is a generated Framer component.",n),m`const VectorSet: React.ComponentType<unknown> = function VectorSet() { return null; };`,m`export default VectorSet;`));return[{revision:t.moduleSourceRevision,type:"vectorSet",source:i}]});function ln(t,e){if(He(t,!0))return["canvasComponent"];if(U(t,!0))return["screen","webPageMetadata"];if(pe(t,!0))return["layoutTemplate"];if(we(e.get(t.parentid)))return["screen"];if(De(t,!0))return["vectorSet"];if(we(t,!0))return["prototype"];if(Ct(t,!0))throw new Error("Unhandled scope node type");if(ot(t))return["collection","draftCollection"];if(qo(t))return["css"];if(wr(t))return["componentPresets"];if(Cn(t)&&De(e.getScopeNodeFor(t)))return["vector"];if(ir(t))return["siteMetadata"];if(Rt(t))return["vector"];if(Pe(e.get(t.parentid)))return["design"];throw new Error(`Unsupported component node: ${t.__class} ${t.id}`)}function pI(t){return Math.ceil(t/Math.ceil(t/100))}var dI=class{constructor(e,r){S(this,"status",null);S(this,"results");S(this,"reportProgress");S(this,"onDone");this.reportProgress=e,this.onDone=r}async import(e,r,o){this.status="importing",this.results={scopeId:r,vectors:[],targetLayout:o};let n=o?{left:o.x+o.width*2,top:o.y}:{left:0,top:0};for(let i=0;i<e.length;i++){let a=e[i];if(!a)continue;let s=await WM(a,r,n);if(this.status!=="importing")return;s&&this.results.vectors.push(s),this.reportProgress?.({status:this.status,finishedCount:i+1})}await this.done()}cancel(){this.status="canceled"}async done(){this.results&&await this.onDone?.(this.results),this.status="done"}},uI="run-svgo",UM=1e6;async function WM(t,e,r){if(t.size>UM){br({type:"add",variant:"error",key:uI,text:"Your SVG is too large to upload. You may need to convert to a different format, such as PNG.",icon:"error",duration:5e3});return}try{let o=await t.text(),n=xy(o),i=GM(t.name),a=Sy(o,ay.createEmpty,n);return a?(a.parentid=e,a.set({name:i,isVectorSetItem:!0,...r}),{node:a,size:n}):void 0}catch(o){console.error("Failed to insert SVG:",o),br({type:"add",variant:"error",key:uI,text:"Failed to insert SVG",icon:"error"});return}}var HM=/[_-]/gu;function GM(t){let[e]=ju(t);return lp(e.replace(HM," "))}var _M=2;function ou(t){if(U(t))return _M}function hY(t,e,r){if(e.type==="siteMetadata"||e.type==="webPageMetadata")return!0;let o=ln(t,r).includes(e.type);if(g(t.id===e.name&&o,"sourceNode and module must match"),Us(e))return!1;let n=ou(t);if(n===void 0)return!0;let i=e.metadata.codeGenVersion;return H(i)&&i>=n}var nu=1;function jM(t){let e=t.metadata.compatibleTextStyleVersion;return H(e)?e:0}function CY(t){return jM(t)<nu}var Lo=uo(gn());function mI(t,e){if(He(t))return"Smart Component";if(U(t))return"web page";if(we(e.get(t.parentid)))return"prototype screen";if(we(t))return"prototype";if(ot(t))return"CMS collection"}function fI(t,e){return U(e)?zy(t,e):e.name??void 0}function hI(t,e="module",r){let o="is too large and will not update";br({type:"add",variant:"warning",text:r?(0,Lo.jsxs)(Lo.Fragment,{children:[(0,Lo.jsxs)(Ls,{children:["The ",e]})," \u201C",r,"\u201D ",(0,Lo.jsx)(Ls,{children:o})]}):(0,Lo.jsxs)(Ls,{children:["A ",e," ",o]}),key:`module-too-large-${t}`,duration:1/0,extraAction:{title:"Learn more",onClick(){_t("ui_interaction",{page:"module-too-large-toast",id:"learn_more"}),ly("https://www.framer.com/help/articles/how-to-fix-module-too-large-warning/")}}});let i=`module-too-large-toast-${e.split(" ").join("-")}`;_t("ui_impression",{page:i})}var Hl=class{constructor(){S(this,"queue",[]);S(this,"synchronize",async()=>{for(let e of this.snapshot())await e.task()})}snapshot(e){return this.queue=this.queue.filter(e??(r=>!r.promise.isResolved())),Array.from(this.queue)}get size(){return this.snapshot().length}async request(e,r){let o=new Ou;this.queue.push({id:r?.id,promise:o,task:()=>(o.state!=="initial"||(o.pending(),(e()??Promise.resolve()).finally(()=>o.resolve())),o)}),r?.synchronize!==!1&&await this.synchronize()}};function Gl(t,e){if(!$p(t)||!e.isGroundNode(t))return!1;let r=e.get(t.parentid);return!!(r&&we(r))}function no(t){if(ir(t))return Ay.localIdName;switch(t.id){case Mg:return"componentPresets";default:return t.id}}function cn(t,e){return ln(t,e).map(o=>Ee(o,no(t)))}function ra(t,e,r){return t?cn(t,e).every(o=>!x(r.getModuleEntryByLocalId(o))):!1}function gI(t,e){if(!Eo(t,e)||Pe(t))return!1;if(!Ct(t)){let r=e.getScopeNodeFor(t);if(Pe(r))return!1}return!0}function Eo(t,e){if(ir(t))return!0;if(!e.has(t.id))return!1;if(Gt(t))return!0;if(Si(t))return!1;if(ot(t)||qo(t)||wr(t)||De(t))return!0;if(Rt(t)){let r=e.get(t.parentid);return De(r)}if(Pe(t))return!1;if(e.isGroundNode(t)&&ar(t)){let r=e.getScopeNodeFor(t);if(Pe(r))return!0}return!!(we(t)||Gl(t,e))}var JM=1e4,qM=1e3,oa=me("CodeGenerationStore");function XM(t){return!(ot(t)||we(t)||ir(t)||ar(t)||wr(t)||De(t))}function KM(t,e){if(!Rt(e))return;let r=t.getScopeNodeFor(e);return g(De(r),"Vector set item must be in a VectorSetNode."),r.variables}function YM(t){let e=t.name?.trim();return e||(nt(t)?"Text":yg(t,t.__class))}function yI(t,e,r,o,n){let i={},a=YM(e);i.metadata||(i.metadata={});let s=[...n?.files??[]];XM(e)&&s.push({name:"tree.json",type:"nodeTree",content:JSON.stringify(Object.assign(e.toJS(),{__treeSerializationVersion:t.serializationVersion,__vectorSetVariables:KM(t,e)}))});let l=ou(e);l&&(i.metadata.codeGenVersion=l);let c=n?.packageDependencies;return c&&(i.metadata.packageDependencies=Array.from(c)),Jy(r)&&(i.metadata.compatibleCmsVersion=jy),fo(e)&&(i.metadata.compatibleTextStyleVersion=nu),i.assets=n?.assets?Array.from(n.assets):[],{...i,title:a,files:s,errors:n?.errors??[],type:r,name:o}}async function QM(t,e,r,o){if(t&&e instanceof Bu&&e.code===1001){let n=eg(t,a=>r.treeIndex.getScopeIdFor(a))??void 0,i=new Ts({type:"CodeGeneration",nodeId:Gt(t)?t.baseVariantId:t.id,reason:"FileTooLarge",sourceNodeId:t.id,scopeId:n});hI(t.id,mI(t,r.tree),fI(r.tree,t)),await o(a=>{if(a.isViewOnly)return;a.lineage.setEditReason("codegeneration");let s=a.ensureErrorListNode();oa.debug("Writing ClientFileTooLarge error to tree for",t.id),a.insertNode(i,s.id)})}else oa.reportError(e)}var pr,na,_l=class{constructor(e,r,o,n){this.treeStore=e;this.modulesStore=r;this.runWhenIdle=o;this.scheduleDocumentUpdateIgnoringUndo=n;W(this,pr,new Hl);W(this,na,new Ia({delay:JM,task:()=>this.runWhenIdle(()=>void I(this,pr).synchronize())}));S(this,"process",I(this,pr).synchronize);S(this,"changeScope",()=>I(this,na).debounce(qM));S(this,"isIdle",()=>I(this,pr).size===0);S(this,"isBlocking",()=>I(this,pr).snapshot().some(e=>e.promise.state==="pending"))}enqueue(e,r){I(this,pr).snapshot(a=>a.promise.isResolved()?!1:a.id===e?a.promise.state!=="initial":!0);let o=this.treeStore.tree.get(e);if(!o||!gI(o,this.treeStore.tree))return;let n=no(o),i={};for(let{type:a,artifacts:s}of r){let l=yI(this.treeStore.tree,o,a,n,s);i[Ee(a,n)]=l}I(this,pr).request(async()=>{try{oa.debug("Persisting transient modules for",e),await this.modulesStore.upsertBatch(i)}catch(a){await QM(o,a,this.treeStore,this.scheduleDocumentUpdateIgnoringUndo)}},{id:e,synchronize:!1})}async persist(e,r,o){let n=this.treeStore.tree.get(e);if(n)return this.enqueue(e,r),o?I(this,na).debounce():(await I(this,pr).synchronize(),cn(n,this.treeStore.tree).map(i=>this.modulesStore.getPersistedModuleByLocalId(i)))}async persistBatch(e){let r={},o="batch";for(let n in e){let i=this.treeStore.tree.get(n),a=e[n];if(!i||!a)continue;let s=no(i),l=new Set;for(let{type:c,artifacts:d}of a){let p=Ee(c,s);g(!l.has(p),"Duplicate local module id",p),l.add(p),r[p]=yI(this.treeStore.tree,i,c,s,d),o+=`-${p}`}}I(this,pr).snapshot(n=>n.promise.isResolved()?!1:n.id===o?n.promise.state!=="initial":!0),await I(this,pr).request(async()=>{oa.debug("Persisting transient modules for batch: ",o);try{await this.modulesStore.upsertBatch(r)}catch(n){oa.reportError(n)}},{id:o,synchronize:!0})}};pr=new WeakMap,na=new WeakMap;var ZM=()=>({stylePresets:[],componentPresets:[],collections:[],smartComponents:[],screens:[],prototypes:[],webpages:[],metadata:[],layoutTemplates:[]}),Je=me("CodeGenerationStore");var eV=500,CI=1500,tV=6e4;function rV(t){for(let e in t.to)if(e in Eg||e in Lg||e in vg)return!0;return!1}function oV(t){return De(t)?eV:CI}var dn,at,io,si,ia,li,ci,Vt,jl,bI,SI=class extends To{constructor(r,o,n,i,a,s,l,c,d,p,u,f=new Map){super();this.scheduler=r;this.treeStore=o;this.modulesStore=n;this.vectorsStore=i;this.aiGenerationStore=a;this.assetMap=s;this.timeline=l;this.engineChanges=c;this.scheduleDocumentUpdateIgnoringUndo=d;this.updateTreeCache=p;this.measureNodes=u;W(this,jl);W(this,dn,new Set);W(this,at);W(this,io,new Map);W(this,si);W(this,ia,new Ia({delay:CI,maxDelay:tV,task:()=>this.scheduler.runWhenIdle(()=>{this.generateAndUpdateQueuedComponents()})}));W(this,li,new Map);W(this,ci);S(this,"testing",{setComponentGenerationQueue:r=>{ne(this,at,r)},flushQueuedCallbacks:()=>{I(this,io).forEach(r=>r.forEach(o=>o()))},generateAndUpdateQueuedComponents:r=>this.generateAndUpdateQueuedComponents(r),setSerializationId:r=>{ne(this,ci,r)},setModulesStore:r=>{Object.assign(this,{modulesStore:r}),Object.assign(this.persistence,{modulesStore:r})},waitForProcessing:async r=>{await this.serialization.promise(r)}});S(this,"persistence");S(this,"moduleTypeOrder",{localization:0,webPageMetadata:1,siteMetadata:2,collection:3,draftCollection:4,css:5,componentPresets:6,vector:7,vectorSet:8,canvasComponent:9,screen:10,["prototype"]:11,codeFile:12,config:13,layoutTemplate:14,design:15,kit:16});W(this,Vt,new Map);S(this,"serialization",{idle:async()=>{let r=[];for(let o of I(this,Vt).keys())r.push(this.serialization.promise(o)?.then(()=>this.untilCompiled(o)));await Promise.all(r)},isIdle:()=>I(this,Vt).size===0,prepare:r=>{I(this,at).delete(r);let o=I(this,Vt).get(r)??va();I(this,Vt).set(r,o)},cancel:r=>{I(this,at).delete(r),I(this,Vt).get(r)?.resolve(),I(this,Vt).delete(r)},preparing:r=>I(this,Vt).has(r),promise:r=>I(this,Vt).get(r),commit:async(r,o,n)=>{let i=()=>{I(this,Vt).get(r.id)?.reject(),I(this,Vt).delete(r.id)};try{let a=await Ze(this,jl,bI).call(this,r,o,n);return a||i(),a}catch(a){throw Je.reportError(a),i(),a}}});ne(this,at,f),ne(this,si,this.timeline.openNodeChangesReader()),this.persistence=new _l(this.treeStore,this.modulesStore,h=>this.scheduler.runWhenIdle(h),h=>this.scheduleDocumentUpdateIgnoringUndo(h)),EC(()=>fc.isTest||this.treeStore.tree.isViewOnly?!1:this.hasBlockingUpdates()?(Je.debug("Showing Unsaved Changes dialog (generation queue #: ",I(this,at).size,", component ids to generate: ",[...I(this,at).keys()],")"),I(this,dn).clear(),this.generateAndUpdateQueuedComponents().then(()=>{this.persistence.process()}).catch(h=>Je.reportError(h)),!0):!1),window.addEventListener("blur",async()=>{try{await this.generateAndPersistAllQueuedComponents()}catch(h){Je.reportError(h)}})}isIdle(){return I(this,at).size===0&&this.serialization.isIdle()&&this.persistence.isIdle()}documentDidLoad(){I(this,at).clear(),I(this,io).clear(),I(this,li).clear()}telemetrySession(r){let o=I(this,li).get(r);if(o)return o;let n=this.treeStore.tree.get(r);g(n,"TelemetrySession: source node must exist");let i=new Js(n);return I(this,li).set(r,i),i}getSerializationId(){return I(this,ci)?`framer-${I(this,ci)}`:`framer-${_n(5)}`}async generateAndPersistAllQueuedComponents(){await this.ensureSiteMetadataModule(),await this.generateAndUpdateQueuedComponents(),await this.serialization.idle(),await this.persistence.process()}debugGetComponentSourceNodes(){let r=ZM();g(!1,"This method should only be used in tests.");for(let{node:o,skipChildren:n}of this.treeStore.tree.root.walkWithSkipChildren())U(o)?(r.webpages.push(o),r.metadata.push(o),n()):He(o)?(r.smartComponents.push(o),n()):ot(o)?(r.collections.push(o),n()):qo(o)?(r.stylePresets.push(o),n()):wr(o)?r.componentPresets.push(o):Gl(o,this.treeStore.tree)?(r.screens.push(o),n()):we(o)?r.prototypes.push(o):ir(o)?r.metadata.push(o):pe(o)&&r.layoutTemplates.push(o);return r}postProcess(r,o,n){if(!this.treeStore.tree.isViewOnly){if(n){I(this,si).clear();return}this.ingestChanges(r),I(this,ia).debounce(oV(o))}}ingestChanges(r){for(let[o,n]of I(this,si).read()){if(n.length===0||n.every(a=>a.ignoreInCodeGeneration))continue;let i=r.get(o);if(i){if(zt(i,this.treeStore.tree)){Zm(i,n)&&this.addChangeToQueue(i);continue}if(ir(i)){if(!n.some(rV))continue;this.addChangeToQueue(i)}else if(we(i))this.addChangeToQueue(i);else{let a=this.treeStore.treeIndex.getGroundNodeIdFor(o),s=r.get(a);if(!s||G(s))continue;let l=r.getScopeNodeFor(s);if(!we(l))continue;this.queueCanvasPageNodesFollowingLinks(r,s)}}}}queueCanvasPageNodesFollowingLinks(r,o){if(this.addChangeToQueue(o),!(!o.cache.links||o.cache.links.size===0))for(let n of o.cache.links){let i=this.treeStore.treeIndex.getGroundNodeIdFor(n),a=r.get(i);!a||G(a)||this.queueCanvasPageNodesFollowingLinks(r,a)}}changeScope(){this.treeStore.tree.isViewOnly||fc.isTest||this.isIdle()||this.serialization.idle().then(()=>this.generateAndUpdateQueuedComponents()).then(()=>{if(!lt.isOn("prioritizedModuleEvaluation")){this.persistence.process();return}this.persistence.isIdle()||this.persistence.changeScope()}).catch(r=>Je.reportError(r))}async createVectorSet(r,o){let n=r[0];if(!n)return;let i=this.treeStore.tree.getScopeNodeFor(n);g(De(i),"VectorSet: VectorSetNode must exist.");let a=performance.now(),s=await this.batchSerializeVectors(r,o);if(!s)return;let l={},c=0,d=Object.keys(s).length,p=pI(d),u=[];for(let f in s){let h=s[f];h&&(l[f]=h,c++,!(c%p!==0&&c!==d)&&(u.push(l),l={}))}for(let f=0;f<u.length;f++){let h=u[f];h&&(await this.persistence.persistBatch(h),o?.("persisting",f))}await this.forceComponentUpdate(i.id),Je.debug("createVectorSet: Spent ",performance.now()-a,"ms creating a new vector set.")}async createModuleFromComponentSource(r,o){if(g(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot create smart components or web pages."),g(Eo(r,this.treeStore.tree),"CodeGenerationStore: componentSourceNode must be a valid component source."),ra(r,this.treeStore.tree,this.modulesStore))return;Je.debug("createModuleFromComponentSource",r.id),this.serialization.prepare(r.id);let i=await this.generateComponent(r.id,1,void 0,{intrinsicSize:o});if(!i)throw new Error("Code not generated");return await this.compileOutput(r,i),cn(r,this.treeStore.tree).map(a=>this.modulesStore.getPersistedModuleByLocalId(a))}revisionNodes(){let r=[];for(let o of this.treeStore.tree.root.children)zt(o,this.treeStore.tree)&&r.push(o),(wr(o)||up(o))&&o.children.forEach(n=>{zt(n,this.treeStore.tree)&&r.push(n),ot(n)&&n.getUnsortedChildren().forEach(i=>{zt(i,this.treeStore.tree)&&r.push(i)})});return r}nodesWithStaleModules(r,o){let n=[],i=o?.ignoreHint??!1;for(let a of this.revisionNodes())mo(a)||r&&!r(a)||(!i&&a.moduleSourceRevisionHint!==a.moduleSourceRevisionCommittedHint||!this.allModulesAreAtRevision(a.id))&&n.push(a);return n}async updateComponent(r,o=0){g(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot generate smart component or web page updates.");let n=this.treeStore.tree.get(r);if(!n||!Eo(n,this.treeStore.tree))return!1;if(this.serialization.preparing(r))return await this.serialization.promise(r),await this.untilCompiled(r),!0;Je.debug("Update component: ",r,", Condition: ",o);let i=I(this,at).get(r);this.serialization.prepare(r);let a=await this.generateComponent(r,o,i);return a?this.compileOutput(n,a):!1}async forceComponentUpdate(r){return g(!this.treeStore.tree.isViewOnly,"CodeGenerationStore: viewers cannot generate smart component or web page updates."),await this.updateComponent(r,2)?(await this.persistence.process(),!0):!1}queueCallbackAfterComponentCompilation(r,o){let n=I(this,io).get(r);n?n.push(o):I(this,io).set(r,[o])}untilCompiled(r){return new Promise(o=>{this.queueCallbackAfterComponentCompilation(r,o)})}calculateNewModuleRevision(r){let o=this.treeStore.tree.get(r);if(!o||!zt(o,this.treeStore.tree))return 1;if(!(!gd(this.treeStore.tree,r)||!this.treeStore.tree.has(r)))return AC(r,this.scheduleDocumentUpdateIgnoringUndo)}allModulesAreAtRevision(r,o){let n=this.treeStore.tree.get(r);if(!n||!zt(n,this.treeStore.tree))return!1;let i=o??n.moduleSourceRevision;return ln(n,this.treeStore.tree).every(a=>this.modulesStore.forType(a).getByStableName(no(n)).sourceRevision()===i)}async ensureDependencyModulesExist(){for(let r of this.revisionNodes()){if(!Eo(r,this.treeStore.tree))return;if(!ra(r,this.treeStore.tree,this.modulesStore))try{await this.updateComponent(r.id)}catch(o){Je.error("Error updating dependency module",r.id,o)}}}async ensureSourceNode(r){let o=this.treeStore.tree.get(r),n=Ct(o)&&!o.isLoaded()?await o.load():o;if(n){if(U(n)&&await this.ensureSiteMetadataModule(),ot(n)&&await this.ensureDependentModulesAreCompatibleWithCollection(n),Rt(n)){let i=this.treeStore.tree.getScopeNodeFor(n);if(!De(i))return;let a=Ee("vectorSet",i.id);if(this.modulesStore.getModuleEntryByLocalId(a))return;await this.createModuleFromComponentSource(i)}await this.ensureAllNodesWithLinksHaveLinkedScopesLoaded(n)}}async ensureSiteMetadataModule(){if(this.treeStore.tree.isViewOnly)return;let r=this.treeStore.tree.root;if(!ra(r,this.treeStore.tree,this.modulesStore))return this.updateComponent(r.id)}hasBlockingUpdates(){if(I(this,at).size>0){for(let[r,o]of I(this,at))if(this.treeStore.tree.has(r)&&o)return!0}return!this.persistence.isIdle()||!this.serialization.isIdle()}async updateModules(r,o){let n=this.treeStore.tree.get(r),i=this.timeline.remoteTreeVersion;if(!n||!Eo(n,this.treeStore.tree))return!1;let a=[];for(let{revision:l,source:c,type:d,artifacts:p}of o){let u={assets:p?.assets,submodules:p?.submodules,binaryAssets:p?.binaryAssets,preventCircularImports:d==="canvasComponent",telemetrySession:this.telemetrySession(r),treeVersion:i,sourceRevision:l,kitSectionsStructure:p?.kitSectionsStructure,svgIcon:p?.files?.find(y=>y.type==="svgIcon")?.content,stableName:!0},f=this.modulesStore.forType(d).getByStableName(no(n)),h=re.sections(aI(),c);f.currentSourceEquals(h,u)||a.push({localId:f.localId,source:h,options:u})}if(a.length===0)return!1;let s=await this.modulesStore.updateSources(a);return Rt(n)&&this.vectorsStore.delete(r),U(n)&&this.aiGenerationStore.deleteKitSectionsStructure(r),s}allModulesExistForSources(r,o){let n=no(r);for(let i of o)if(!this.modulesStore.getPersistedModuleByLocalId(Ee(i.type,n)))return!1;return!0}async compileOutput(r,o){if(this.treeStore.tree.isViewOnly)return!1;let n=o.slice().sort((a,s)=>this.moduleTypeOrder[a.type]-this.moduleTypeOrder[s.type]);if(this.allModulesExistForSources(r,n))await this.updateModules(r.id,n);else for(let a of n){let s=await this.updateModules(r.id,[a]),l=no(r);!this.modulesStore.getPersistedModuleByLocalId(Ee(a.type,l))&&s&&await this.persistence.persist(r.id,[a])}return ot(r)&&await this.ensureDependentModulesCanRenderCollectionColors(r),I(this,io).get(r.id)?.forEach(a=>a()),I(this,io).delete(r.id),this.persistence.persist(r.id,o,!0),!0}pauseCodeGeneration(r){return Je.debug("Pausing code generation for",r),I(this,dn).add(r),()=>{Je.debug("Resuming code generation for",r),I(this,dn).delete(r),I(this,ia).debounce()}}async generateAndUpdateQueuedComponents(r){if(this.treeStore.tree.isViewOnly)return[];await this.ensureDependencyModulesExist();let o=[],n=new Map;for(let[a]of I(this,at)){if(I(this,dn).has(a)||this.serialization.preparing(a))continue;let s=this.treeStore.tree.get(a);if(!s||!Eo(s,this.treeStore.tree)||r&&!ln(s,this.treeStore.tree).includes(r)){I(this,at).delete(a);continue}if(this.serialization.prepare(a),Rt(s)){let l=this.treeStore.tree.getScopeNodeFor(s);if(!l)continue;let c=n.get(l.id)??[];c.push(s),n.set(l.id,c)}else o.push(s)}let i=new Set;Je.debug("Batch generating queued vector nodes");for(let a of n.values())try{let s=await this.batchSerializeVectors(a,void 0,i);for(let l in s)this.persistence.persist(l,s[l],!0)}catch{}Je.debug("Generating queued components",{ids:o.map(Ws)});for(let a of o)try{Je.debug("Flushing queue of ",a.id);let s=await this.generateComponent(a.id,1);s&&(await this.compileOutput(a,s),i.add(a.id))}catch{}return Array.from(i)}async batchSerializeVectors(r,o,n){let i=r[0];if(!i)return;await this.ensureSourceNode(i.id),await this.ensureSourceCache(i.id),r.forEach(p=>this.serialization.prepare(p.id));let a=await LC(r,this.scheduleDocumentUpdateIgnoringUndo);g(a,"VectorSet: newModuleRevisions must exist");let s={assetMap:this.assetMap,modulesStore:this.modulesStore,treeStore:this.treeStore,vectorsStore:this.vectorsStore,aiGenerationStore:this.aiGenerationStore,engineChanges:this.engineChanges,measureNodes:this.measureNodes},l=await Promise.all(r.map(async p=>{if(!a[p.id])return;let y=(await this.serializerForSourceNode(p)(p,s,{serializationId:this.getSerializationId()}))?.[0];return g(y,"VectorSet: source must exist.",p.id),this.serialization.promise(p.id)?.resolve(),I(this,Vt).delete(p.id),[p.id,y]})),c=0,d={};for(let p of l){if(!p)continue;let[u,f]=p;await this.updateModules(u,[f])&&(d[u]=[f],o?.("serializing",c),c++,n?.add(u))}return d}async createVersionedVectorSet(r){await this.generateAndPersistAllQueuedComponents();let o=await this.generateComponent(r.id,2,void 0,{includeVectorSetSaveIds:!0});return!o||!await this.compileOutput(r,o)?!1:(await this.persistence.process(),!0)}async generateComponent(r,o,n,i){Je.debug("Ensure source node",r),await this.ensureSourceNode(r),Je.debug("Ensure source cache",r),await this.ensureSourceCache(r);let a=await this.calculateNewModuleRevision(r),s=this.treeStore.tree.get(r);if(!s||!Eo(s,this.treeStore.tree)||!this.shouldGenerateUnderCondition(o,s,a,n)){Je.debug("Cancel serialization",r),this.serialization.cancel(r);return}let l=Gt(s)?s.getPrimaryVariant():s;return Je.debug("Serialize",r),this.serialization.commit(s,l,i)}shouldGenerateUnderCondition(r,o,n,i){let a=i??I(this,at).get(o.id);if(I(this,at).delete(o.id),!ra(o,this.treeStore.tree,this.modulesStore))return!0;switch(r){case 2:return!0;case 1:return!x(n)||!this.allModulesAreAtRevision(o.id,n);case 0:return!x(n)&&!!a&&!this.allModulesAreAtRevision(o.id,n);default:$(r)}}addChangeToQueue(r){if(!this.shouldSkipChange(r)){if(Rt(r)&&this.vectorsStore.queue(r.id),mo(r)){let o=r.parentid;g(o,"Collection node has no parent"),I(this,at).set(o,!0);return}I(this,at).set(r.id,!0)}}serializerForSourceNode(r){return ot(r)?jC:Gt(r)?tu:qo(r)?tI:we(r)?YC:ir(r)?Ey:wr(r)?XC:De(r)?cI:Rt(r)?lI:Pe(this.treeStore.tree.get(r.parentid))?tu:Qv}shouldSkipChange(r){if(G(r)){let o=Q(r.codeComponentIdentifier);if(Ft(o)&&o.type==="screen")return!0}return!1}async ensureSourceCache(r){let o=this.treeStore.tree.get(r);!o||o.update===o.cache.lastUpdate||await new Promise(n=>{this.scheduler.runBeforeNextFrame(()=>{Ct(o)&&o.update!==o.cache.lastUpdate&&this.updateTreeCache(o.id),n()})})}async ensureDependentModulesAreCompatibleWithCollection(r){let o=Ee("collection",r.id),n=this.modulesStore.getDependentsOfModule(o);!n||n.size===0||await Promise.all(Array.from(n).map(async i=>{let a=i,s=this.modulesStore.getPersistedModuleByLocalId(a);if(!(!s||!Us(s)))return this.forceComponentUpdate(s.name)}))}async ensureDependentModulesCanRenderCollectionColors(r){let o=Ee("collection",r.id),n=this.modulesStore.getDependentsOfModule(o);if(!n||n.size===0)return;let i=this.modulesStore.forType("collection").getByStableName(r.id);i&&i.annotations(null,"default")?.framerColorSyntax&&await Promise.all(Array.from(n).map(async a=>{let[s,l]=ns(a);s==="draftCollection"||this.modulesStore.forType(s).getByStableName(l)?.annotations(null,"default")?.framerColorSyntax||await this.forceComponentUpdate(l)}))}async ensureAllNodesWithLinksHaveLinkedScopesLoaded(r){let o=new Set;this.treeStore.tree.beginAllowPartialScopeAccess();for(let n of r.walkWithSkipChildren()){if(!it(n.node))continue;let i=n.node.getLink();if(!za(i))continue;let a=this.treeStore.tree.get(i.webPageId);!a||a.loaded||this.modulesStore.forType("screen").getByStableName(i.webPageId)?.annotations(null,"default")?.framerScrollSections||(o.add(a),n.skipChildren())}this.treeStore.tree.endAllowPartialScopeAccess(),await this.treeStore.tree.loadScopes(Array.from(o))}};dn=new WeakMap,at=new WeakMap,io=new WeakMap,si=new WeakMap,ia=new WeakMap,li=new WeakMap,ci=new WeakMap,Vt=new WeakMap,jl=new WeakSet,bI=async function(r,o,n){if(!ir(r)&&!this.treeStore.tree.has(o.id))return;let i=this.telemetrySession(r.id),a=i.start("synchronize"),s=performance.now();Je.debug("Waiting for ModulesStore to be idle",{id:r.id}),await this.modulesStore.whenIdle();let l=performance.now()-s;Je.debug("Waited",Math.round(l/1e3*100)/100,"seconds for ModulesStore to be idle",{id:r.id}),a.end();let c=r.draftOrCurrent();if(Ct(c)&&(!c.isLoaded()||c.loaded.children?.length===0))return;let d=i.start("serialize");ot(r)&&nV(r,this.treeStore,this);let p=this.serializerForSourceNode(r);I(this,Vt).get(r.id)?.resolve(),I(this,Vt).delete(r.id);let u=await p(r,{assetMap:this.assetMap,modulesStore:this.modulesStore,treeStore:this.treeStore,vectorsStore:this.vectorsStore,aiGenerationStore:this.aiGenerationStore,engineChanges:this.engineChanges,measureNodes:this.measureNodes},{serializationId:this.getSerializationId(),initialIntrinsicSize:n?.intrinsicSize,includeVectorSetSaveIds:n?.includeVectorSetSaveIds});return u.forEach(({source:f,artifacts:h})=>{if(Je.trace("serializeComponent",`
>>>> >>>>
`,Y(f),`
<<<< <<<<`),h?.submodules)for(let[y,C]of h.submodules)Je.trace("serializeComponent",`
>>>>`,y,`>>>>
`,C,`
<<<<`,y,"<<<<")}),d.end(u),u};function nV(t,e,r){let o=t.instanceIdentifier,n=P.dataForIdentifier(o);if(!n||!Object.values(n.properties).some(s=>s?.type==="image"))return;let a=new Set;for(let s of e.tree.root.children){if(!Ct(s))continue;if(U(s)&&s.dataIdentifier===o){a.add(s);continue}s.loaded?.some(c=>Oe(c)&&c.dataIdentifier===o)&&a.add(s)}a.forEach(s=>{r.forceComponentUpdate(s.id).catch(Re)})}var iV=me("exportToHTML");function di(t,e,r,o=new Set([e]),n=new Set){for(let{node:i,skipChildren:a}of e.walkWithSkipChildren()){if(n.has(i)){a();continue}n.add(i);for(let s of $f(i,r)){let l=zf(s);if(!l)continue;let c=t.getNode(l);if(c){if(!t.isGroundNode(c)){iV.reportError("Navigation target node must be ground node",{sourceId:i.id,targetId:c.id});continue}o.add(c),di(t,c,r,o,n)}}G(i)&&Object.values(As(t,i,r)).flat().forEach(s=>di(t,s.node,r,o,n))}return o}async function vI(t,e){await e.updateComponent(t.id,1)}async function II(t,{codeGenerationStore:e,modulesStore:r,treeStore:o},n,i={}){let{waitForAll:a=!0,persist:s=!0}=i,l=di(o.tree,t,n),c=[],d=[];for(let u of l)d.push(pt("screen",u.id,"default").value),u!==t&&c.push(vI(u,e));let p=vI(t,e);return c.push(p),await Promise.all(a?c:[p]),s&&await e.persistence.process(),Gn(n,d,r)}function TI(t,e){let r=e.getPrimaryVariant();Jc(r)&&(t.routes[e.id]=r.pageEffects)}function yZ(t,e,r){let o=e.getPrimaryVariant();if(Jc(o)){let n={};for(let i in o.pageEffects)n[i]=r.dedupe("effect",o.pageEffects[i]);t.routes[e.id]=n}}function NI(t,e){if(G(t)&&my(e,t)){let r=fy(e,t);return g(U(r),"PreviewRenderer: WebPage Scope node must exist and be a WebPageNode"),g(r.isLoaded(),"PreviewRenderer: WebPage Scope node must fully loaded"),{entryNode:r.getPrimaryVariant(),entryScopeNode:r}}if(U(t)&&t.isLoaded())return{entryNode:t.getPrimaryVariant(),entryScopeNode:t};if(ar(t)){let r=e.getGroundNodeFor(t),o=e.getScopeNodeFor(r);if(Pe(o))return{entryNode:r,entryScopeNode:o}}if(Be(t)){let r=e.getScopeNodeFor(t);return g(kr(r),"PreviewRenderer: Scope node must exist and be a node supports breakpoint variants"),g(r.isLoaded(),"PreviewRenderer: Scope node with breakpoint variants must be fully loaded"),{entryNode:r.getPrimaryVariant(),entryScopeNode:r}}if(Ot(t)&&!Be(t)){let r=e.getScopeNodeFor(t);return g(He(r),"PreviewRenderer: Smart Component Scope node must exist and be a SmartComponentNode"),{entryNode:t,entryScopeNode:r}}if(Qm(t)&&t.isVectorSetItem){let r=e.getScopeNodeFor(t);return g(De(r),"PreviewRenderer: Scope node must exist and be a VectorSetNode"),{entryNode:t,entryScopeNode:r}}return{entryNode:t}}function wI(t,e){let r=t.getGroundNodeFor(e),o=t.getScopeNodeFor(r);return we(o)&&!G(r)}var xI="utils";function RI(t,e){if(!U(e)||!e.dataIdentifier)return;let r=Q(e.dataIdentifier);if(!be(r)||r.kind!=="localModuleExport")return;let o=t.getPersistedModuleByLocalId(r.localId);if(o&&o.exports.includes(xI))return{exportIdentifier:xI,moduleURL:o.moduleURL,collectionId:r.localIdName}}var kI=me("renderInfoForPreviewItem");function ui(t){let e=t.root.getDefaultLocale(),r=t.root.locales,o=[e];return r&&o.push(...r),o}function MI(t,e,r,o,n,i){let a=[],s=[],l={global:i.root.globalPageEffect,routes:{}},c=new Set,d=ui(i),u=Tf(d,{includeDrafts:!0}).find(b=>b.id===n);for(let b of i.root.children){if(!pe(b)&&!U(b))continue;if(pe(b)&&a.push({id:b.id,moduleIdentifier:gS(),layoutTemplate:{moduleIdentifier:b.instanceIdentifier}}),U(b)){let w=b.isLoaded()?nd(If(b)):[],V=ss(i,b),L=RI(t,b);L&&s.push(L),a.push({id:b.id,moduleIdentifier:b.instanceIdentifier,collectionId:L?.collectionId,path:V,elements:w,layoutTemplate:sV(b,u)}),b.isLoaded()&&TI(l,b)}let T=P.componentForIdentifier(b.instanceIdentifier)?.fonts;if(!T){kI.debug("Did not find fonts for component:",b.instanceIdentifier);continue}for(let w of hS(T))c.add(w)}let f=o?e.getPathSlugs(r.id,o,u):void 0,h=[],y=f?.unresolvedSlugs;for(let b in y){let N=y[b];g(N),h.push({variableId:b,collectionId:N.collectionId,collectionItemId:N.collectionItemId})}let C=f?.pathVariables?nd(f.pathVariables):[];return kI.debug("renderInfoFor",{webPageNode:r,collectionItemNodeId:o,initialUnresolvedPathSlugs:h}),{kind:"webpage",routes:a,collectionUtils:s,locales:d,initialPathVariables:C,pageEffects:l,preloadFonts:Array.from(c),initialRoute:r.id,initialUnresolvedPathSlugs:h,initialLocaleId:n}}function sV(t,e){if(!Wo(t))return;let r=t.getResolvedControlPropValues(P,yS(),void 0,e);return{moduleIdentifier:t.layoutTemplateIdentifier,props:Ve(r)?void 0:r,richTextControlKeys:t.getRichTextControlKeys(P),vectorSetItemControls:t.getComponentVectorSetChildren(P)}}function VI({treeStore:t,chromeStore:e,previewStore:r,modulesStore:o},n){if(!n)return{kind:"empty"};switch(n.type){case"component":return g(be(n.componentId),"Previewing component should provide module identifier",n.componentId),{kind:"module",layout:"component",moduleIdentifier:n.componentId,locales:ui(t.tree),initialLocaleId:e.canvasLocaleId};case"node":{let i=t.tree.get(n.nodeId);g(i,"Previewing node should provide correct node id",n.nodeId);let a=NI(i,t.tree),s=a.entryScopeNode;if(pe(s))return MI(o,r,s,n.collectionItemNodeId,e.canvasLocaleId,t.tree);if(Pe(s))return{kind:"module",moduleIdentifier:pt("design",i.id,"default").value,layout:"design-screen",locales:ui(t.tree),initialLocaleId:e.canvasLocaleId};if(U(a.entryScopeNode))return MI(o,r,a.entryScopeNode,n.collectionItemNodeId,e.canvasLocaleId,t.tree);if(He(a.entryScopeNode)){let l={variant:a.entryNode.id};return{kind:"module",moduleIdentifier:a.entryScopeNode.instanceIdentifier,props:l,layout:"component",locales:ui(t.tree),initialLocaleId:e.canvasLocaleId}}if(De(a.entryScopeNode))return{kind:"module",moduleIdentifier:pt("vector",a.entryNode.id,"default").value,layout:"component",locales:ui(t.tree),initialLocaleId:e.canvasLocaleId};if(G(a.entryNode)){let l=a.entryNode.getCodeComponentProps(P);return{kind:"module",moduleIdentifier:a.entryNode.codeComponentIdentifier,props:l,layout:"component",locales:ui(t.tree),initialLocaleId:e.canvasLocaleId}}if(wI(t.tree,a.entryNode)){let l=t.tree.getGroundNodeFor(a.entryNode),c=di(t.tree,a.entryNode,P),d=[];for(let p of c){let u=t.tree.getGroundNodeFor(p),f=pt("screen",u.id,"default").value;d.push({id:u.id,moduleIdentifier:f})}return{kind:"prototype",routeId:l.id,routes:d}}throw new Error(`Unsupported node for preview: ${i.id}`)}default:$(n)}}var lV="getVectorSetItems";function DI(t){return lV in t}function PI(t,e){return t.getNodesWithTrait(e,o=>zt(o,t)).flatMap(o=>{if(o.moduleSourceRevision===void 0)return[];let n=cn(o,t).filter(a=>!a.includes("draftCollection")),i=o.moduleSourceRevision;return n.map(a=>({moduleIdentifier:Eu(a,"default").value,moduleRevision:i}))})}function cV(t){return t.mainView===1?t.codeEditorPreviewVisible:t.mainView===3}function mee(t,e,r={}){let{previewStore:o,fullsizePreviewStore:n,loadingStore:i,chromeStore:a,treeStore:s,modulesStore:l}=t;if(!i.hasMinimalEditableData)return;let{visible:c,shownOnLaunch:d,source:p="unknown"}=r,u=cV(a),f=typeof c=="boolean"?c:!u;if(a.setPreviewVisible(f),!u&&f){o.addActiveSession();let h=o.computePreviewItem();if(!dV({treeStore:s,previewStore:o,chromeStore:a,modulesStore:l},h))o.item=h;else if(h?.type==="node"){let y=s.tree.get(h.nodeId);g(y,"Did not find previewNode",h.nodeId),n.updatePreviewSize(y)}uV(e,h).then(y=>{o.targetModuleRevisions=PI(s.tree,y)}).catch(Re).finally(()=>{o.item=h}),OC({shown_on_launch:d,source:p})}else u&&!f&&(o.removeActiveSession(),o.stickyPreviewItem=!1,o.item=void 0)}function dV(t,e){if(!e||e.type!=="node")return!1;let{modulesStore:r}=t,o=VI(t,e);switch(o.kind){case"module":{let n=Q(o.moduleIdentifier);return Ft(n)?!r.getModuleEntryByLocalId(n.localId):!1}case"webpage":{let n=Ee("screen",o.initialRoute);return!r.getModuleEntryByLocalId(n)}case"prototype":{let n=Ee("prototype",o.routeId);return!r.getModuleEntryByLocalId(n)}case"empty":return!1;default:$(o)}}async function uV(t,e){if(Yc(t,"canDesign")||!e)return[];let r=await pV(e,t.stores,t),{codeGenerationStore:o}=t.stores,n=await o.generateAndUpdateQueuedComponents();return await o.serialization.idle(),[r,...n]}async function pV(t,e,r){if(Yc(r,"canDesign"))return Promise.resolve(void 0);let{codeGenerationStore:o,treeStore:n,modulesStore:i}=e;if(t.type==="component"){await o.updateComponent(t.componentId,1);return}else if(t.collectionItemNodeId){let a=n.tree.getParent(t.collectionItemNodeId);return a?(await o.updateComponent(a.id,1),a.id):void 0}else{let a=n.tree,s=a.get(t.nodeId);g(s,"Did not find previewNode",t.nodeId);let l=a.getCanvasScopeNodeFor(s);if(g(l,"Tried triggering code generation for non canvas scope node:",s.id),DI(l))return Rt(s)?(await o.updateComponent(s.id,1),s.id):Promise.resolve(void 0);if(Gt(l))return await o.updateComponent(l.id,1),l.id;if(we(l))return await II(s,{codeGenerationStore:o,treeStore:n,modulesStore:i},P),s.id;if(Pe(l))return await o.updateComponent(s.id,1),s.id;$(l)}}function See(t){let{newContentAsDraft:e}=t.stores.persistedUserDefaults;return!(!e||t.stores.publishStore.publishStatus===1)}var aa=class aa extends To{constructor(r){super();this.scheduler=r;S(this,"menu",null)}show(r,o){if(!lt.isOn("improvedMenus")){fV(r,o);return}let n={...o,className:o.options?.className},i=aa.buildItems(r);this.menu={items:i,config:n,startTime:performance.now()}}close(){this.scheduler.processWhenReady(()=>{this.menu&&(this.menu.config.onDone?.(),this.menu.config.onCancel?.(),this.menu=null)})}};S(aa,"buildItems",(r,o=[])=>{let n=[];for(let[i,a]of r.entries()){if(!x(a.submenu)&&!nr(a.submenu))continue;let{submenu:s,...l}=a,c=o?[...o,i]:[i],d={...l,path:c};if(d.type==="separator"){if(i===0||i===r.length-1||n[n.length-1]?.type==="separator")continue;n.push(d);continue}if(a.disabled&&(d.enabled=!1),a.action&&(d.role=a.action),a.role){let{states:u,options:f}=Zy(a.role),h=u[a.role],{label:y,checked:C,visible:b}=f[a.role]??{};A(y)&&(d.label=y),x(a.checked)&&gr(C)&&(d.checked=C),x(a.visible)&&gr(b)&&(d.visible=b),x(a.disabled)&&x(a.enabled)&&gr(h)&&(d.enabled=h)}if(a.visible===!1)continue;if(s){let u=aa.buildItems(s,c),f={...d,submenu:u};n.push(f);continue}let p=mV(d);n.push(p)}return n.length>0&&n[n.length-1]?.type==="separator"&&n.pop(),n.length>0&&n[0]?.type==="separator"&&n.shift(),n});var FI=aa;function mV(t){let{role:e}=t;if(!e)return t;let r={...t};return!yf&&!t.acceleratorWindows&&(r.acceleratorWindows=CS[e]),t.accelerator||(r.accelerator=SS[e]),r}function fV(t,e){let r=bS.buildFromTemplate(t),o={...e.options,onCancel:e.onCancel};r.popup(e.location,o).catch(Re).finally(e.onDone)}var pi,Oo,AI=class extends To{constructor(r){super();this.modulesStore=r;W(this,pi,new Map);W(this,Oo,new Map);S(this,"_forceUpdate",0)}rerender(){this._forceUpdate++}queue(r){if(I(this,Oo).has(r))return;let o=va();I(this,Oo).set(r,o),this.rerender()}cache(r,o){let n=I(this,Oo).get(r);n&&n.resolve(o),I(this,Oo).delete(r),I(this,pi).set(r,o),this.rerender()}getByGlobalId(r){let o=this.modulesStore.getPersistedModuleByGlobalId(r);if(!o)return;let n=ns(o.localId)[1],i=I(this,Oo).get(n);if(i)return i;let a=I(this,pi).get(n);if(a)return a;let s=this.modulesStore.forType("vector").getByStableName(n)?.transientSVGIcon;if(s)return{svg:s}}delete(r){I(this,pi).delete(r),this.rerender()}};pi=new WeakMap,Oo=new WeakMap;function Wee(t,e){if(!Xg(t)){e.onlyNodesWithFormInputFontStyles=!1;return}xr("formInputFontFamily",e,t),hV(e,t),xr("formInputFontColor",e,t),xr("formInputFontWeight",e,t),xr("formInputFontStyle",e,t),xr("formInputFontLineHeight",e,t),xr("formInputFontLineHeightUnit",e,t),xr("formInputFontTextAlignment",e,t),xr("formInputFontLetterSpacing",e,t),xr("formInputFontLetterSpacingUnit",e,t),ft(e.formInputFontSelector)&&(e.formInputFontSelector=new Set),wa(t.formInputFontSelector)&&e.formInputFontSelector.add(t.formInputFontSelector),e.formInputOpenTypeFontFeatures=iu(e.formInputOpenTypeFontFeatures,t.formInputOpenTypeFontFeatures)}function hV(t,e){let r=t.formInputFontSize,o=t.formInputFontSizeUnit;if(gt(r)&&gt(o)||x(e.formInputFontSize))return;let[n,i]=H(e.formInputFontSize)?[e.formInputFontSize,"px"]:go(e.formInputFontSize);if(ft(o))t.formInputFontSizeUnit=i;else if(yo(i,o)){t.formInputFontSizeUnit=oe,t.formInputFontSize=oe;return}ft(r)?t.formInputFontSize=n:yo(n,r)&&(t.formInputFontSize=oe)}function iu(t,e){let r=new Set(In(t)?Object.keys(t):void 0),o=e??[],n=In(t)?t:{};for(let i of o){if(!vi(i))continue;let a=n[i];x(a)&&(n[i]=In(t)?oe:!0),r.delete(i)}for(let i of r)vi(i)&&(n[i]=oe);return n}var gV={borderBottom:oe,borderLeft:oe,borderRight:oe,borderTop:oe,borderWidth:oe,borderColor:oe,borderStyle:oe,borderPerSide:oe};function Le(t,e){return gt(e)?oe:ft(e)?t:yo(t,e)?oe:t}function yV(t,e){return gt(e)?oe:ft(e)||hr(t,e)?t:oe}function SV(t,e,r){return g(In(t)),gt(t)?oe:t.length!==e.length?oe:(t.forEach((o,n)=>{let i=e[n];g(i);let a=o.type;switch(a){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"number":case"object":case"richtext":case"string":case"transition":case"image":case"responsiveimage":case"scrollsectionref":case"customcursor":case"border":case"cursor":sa(o,i,r);break;default:$(a)}}),t)}function sa(t,e,r){switch(t.type){case"array":{if(g(e.type==="array"),g(r.type==="array"),gt(t.value))break;if(ft(t.value)){if(Lt(e.value)){t.value=e.value;break}t.value=e.value.map(o=>TV(r.control,o.id))}if(Lt(e.value)){t.value=Le(e.value,t.value);break}if(Lt(t.value)){t.value=oe;break}t.value=SV(t.value,e.value,r.control);break}case"slot":{if(g(e.type===t.type),gt(t.value))break;g(r.type==="slot"),g(!D(e.value),"Slots don't support dynamic values"),ft(t.value)?t.value=e.value:t.value=oe;break}case"object":if(g(e.type===t.type),gt(t.value))break;if(g(r.type==="object"),ft(t.value))if(e.value===null)t.value=null;else{t.value={};for(let o in r.controls){let n=r.controls[o];g(n);let i=IV(n);i&&(t.value[o]=i)}}if(t.value===null||e.value===null){t.value!==e.value&&(t.value=oe);break}for(let o in t.value){let n=r.controls[o];g(n);let i=t.value[o];g(i);let a=e.value[o];g(a,"getControlProps(), should have added these if they were missing from the document data"),sa(i,a,n)}break;case"transition":if(g(e.type===t.type),gt(t.value))break;if(ft(t.value)){t.value=e.value;break}if(D(t.value)||D(e.value)||!t.value||!e.value){t.value=Le(e.value,t.value);break}hr(t.value,e.value)||(t.value=oe);break;case"responsiveimage":if(g(e.type==="image"),t.value=Le(e.value,t.value),t.type==="responsiveimage"){let o=A(e.alt)?e.alt:"";t.alt=Le(o,t.alt);let{positionX:n,positionY:i}=e;t.positionX=Le(n,t.positionX),t.positionY=Le(i,t.positionY)}break;case"fusednumber":g(e.type===t.type),t.single=Le(e.value.single,t.single),t.isFused=Le(e.isFused,t.isFused),t.fused[0]=Le(e.value.fused[0],t.fused[0]),t.fused[1]=Le(e.value.fused[1],t.fused[1]),t.fused[2]=Le(e.value.fused[2],t.fused[2]),t.fused[3]=Le(e.value.fused[3],t.fused[3]);break;case"link":{if(g(e.type===t.type),gt(t.value))break;if(ft(t.value)){t.value=e.value;break}if(D(t.value)||D(e.value)||!t.value||!e.value){t.value=Le(e.value,t.value);break}if(!xc(t.value,e.value)){t.value=oe;break}break}case"linkrelvalues":{if(g(e.type===t.type),gt(t.value))break;if(ft(t.value)){t.value=e.value;break}if(D(t.value)||D(e.value)||!t.value||!e.value){t.value=Le(e.value,t.value);break}hr(t.value,e.value)||(t.value=oe);break}case"pagescope":if(g(e.type===t.type),gt(t.value))break;if(ft(t.value)){t.value=e.value;break}if(!t.value||!e.value){t.value=Le(e.value,t.value);break}if(!xc(t.value,e.value)){t.value=oe;break}break;case"font":{if(g(r.type==="font"),g(e.type===t.type),gt(t.value))break;if(ft(t.value)){if(x(e.value)){t.value=e.value;break}let h=new Set([e.value.fontSelector]),y=Ge,C=new Set,b=new Set,N=Ge,T=Ge,w=Ge,V=new Set,L={};if(r.displayFontSize){let[F,_]=bi(e.value.fontSize)?go(e.value.fontSize):[];y=F,_&&C.add(_)}if(r.displayTextAlignment&&(T=e.value.textAlignment),r.controls==="extended"){let[F,_]=e.value.lineHeight??[];N=F,_&&b.add(_);let[z,Z]=e.value.letterSpacing??[];w=z,Z&&V.add(Z)}e.value.openTypeFontFeatures&&(L=(e.value.openTypeFontFeatures??[]).reduce((F,_)=>(vi(_)&&(F[_]=!0),F),{})),t.value={fontSelector:h,lineHeightValue:N,lineHeightUnits:b,fontSizeValue:y,fontSizeUnits:C,textAlignment:T,letterSpacingValue:w,letterSpacingUnits:V,openTypeFontFeatures:L};break}if(x(t.value)){x(e.value)||(t.value=oe);break}if(x(e.value)){t.value=oe;break}let{fontSelector:o,lineHeight:[n,i]=[],fontSize:a,textAlignment:s,letterSpacing:[l,c]=[],openTypeFontFeatures:d}=e.value;t.value.fontSelector.add(o);let[p,u]=bi(a)?go(a):[],f=t.value.fontSizeValue!==p||!x(u)&&!t.value.fontSizeUnits.has(u);r.displayFontSize&&f&&(t.value.fontSizeValue=oe,u&&t.value.fontSizeUnits.add(u)),r.displayTextAlignment&&t.value.textAlignment!==s&&(t.value.textAlignment=oe),r.controls==="extended"&&(t.value.lineHeightValue!==n&&(t.value.lineHeightValue=oe),i&&t.value.lineHeightUnits.add(i),t.value.letterSpacingValue!==l&&(t.value.letterSpacingValue=oe),c&&t.value.letterSpacingUnits.add(c)),t.value.openTypeFontFeatures=iu(t.value.openTypeFontFeatures,d);break}case"customcursor":case"scrollsectionref":{g(e.type===t.type);let o=hr(e.value,t.value)?t.value:e.value;t.value=Le(o,t.value);break}case"border":{if(g(e.type===t.type),ft(t.value)){D(e.value)?t.value=e.value:rt(e.value)?t.value=null:t.value={...e.value};break}if(D(e.value)||D(t.value)||rt(e.value)||rt(t.value)){yo(e.value,t.value)&&(t.value=gV);break}let o=t.value;o.borderTop=Le(e.value.borderTop,o.borderTop),o.borderRight=Le(e.value.borderRight,o.borderRight),o.borderBottom=Le(e.value.borderBottom,o.borderBottom),o.borderLeft=Le(e.value.borderLeft,o.borderLeft),o.borderWidth=Le(e.value.borderWidth,o.borderWidth),o.borderColor=Le(e.value.borderColor,o.borderColor),o.borderStyle=Le(e.value.borderStyle,o.borderStyle);break}case"boxshadow":g(e.type===t.type),t.value=tm(e.value,t.value);break;case"multicollectionreference":g(e.type===t.type),t.value=yV(e.value,t.value);break;case"gap":{if(g(e.type===t.type),t.value=Le(e.value,t.value),!gt(t.columnGap)){let o=D(e.value)?oe:bt(e.value);ft(t.columnGap)?t.columnGap=o:yo(o,t.columnGap)&&(t.columnGap=oe)}if(!gt(t.rowGap)){let o=D(e.value)?oe:Un(e.value);ft(t.rowGap)?t.rowGap=o:yo(o,t.rowGap)&&(t.rowGap=oe)}break}case"boolean":case"color":case"date":case"enum":case"file":case"number":case"richtext":case"string":case"image":case"cursor":case"padding":case"borderradius":case"collectionreference":case"trackingid":case"vectorsetitem":g(e.type===t.type),t.value=Le(e.value,t.value);break;default:}}function la(t){switch(t.type){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"linkrelvalues":case"number":case"richtext":case"string":case"transition":case"boxshadow":case"image":case"object":return{type:t.type,value:Ge};case"array":case"slot":case"font":case"pagescope":case"scrollsectionref":case"customcursor":case"border":case"cursor":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"vectorsetitem":return{type:t.type,value:Ge};case"gap":return{type:t.type,value:Ge,columnGap:Ge,rowGap:Ge};case"trackingid":return{type:t.type,value:Ge,trackingIdAIPrompt:Ge};case"fusednumber":return{type:"fusednumber",isFused:Ge,single:Ge,fused:[Ge,Ge,Ge,Ge]};case"responsiveimage":return{type:"responsiveimage",value:Ge,alt:Ge,positionX:Ge,positionY:Ge};case"eventhandler":return null;default:return null}}var CV={number:!0,enum:!0,boolean:!0,string:!0,richtext:!0,color:!0,image:!0,responsiveimage:!0,file:!0,transition:!0,link:!0,date:!0,object:!0,array:!0,fusednumber:!0,font:!0,pagescope:!0,scrollsectionref:!0,customcursor:!0,border:!0,cursor:!0,boxshadow:!0,gap:!0,padding:!0,borderradius:!0,collectionreference:!0,multicollectionreference:!0,trackingid:!0};function bV(t){return Object.hasOwn(CV,t)}function vV(t){return bV(t.type)}function IV(t){let e=la(t);return e?(g(vV(e)),e):null}function TV(t,e){let r=la(t);g(r);let o=r;return o.id=e,o}function ite(t,e){let r={};for(let o in t){let n=t[o];if(!n)continue;let i=la(n);i&&(r[o]=i)}for(let o of e)for(let n in o){let i=t[n];if(g(i),i.type==="eventhandler")continue;let a=r[n];g(a,"Each control prop should have a corresponding reduced control prop");let s=o[n];g(s),sa(a,s,i)}return r}function gte(t,e,r,o,n){let i=r.id;if(!i)return;let a=t.getNodeWithTrait(r.providerId,mt);if(!a)return;let s=a.dataIdentifier;if(!Ft(s))return;let l=Ri(t,s);if(!l)return;n??=Fi(a,e);let c=t.getNodeWithTrait(n,mo);if(!c)return;let d=Ka(t,e,i,c,l);d&&(c=d.collectionItemNode,l=d.collectionNode,i=d.variableId);let u=l.getPropertyControls(t)[i];if(!u)return;let f=l.getVariable(i);if(!f)return;let h=c.getControlProp(i),{controlProp:y,reducedControlProp:C}=NV(u,h);if(Hy(y)&&(g(C,"Reduced control prop should not be null when a collection control prop is present"),l.id===c.parentid&&!(l.managedByPlugin&&!f.userEditable)&&f.type===o&&y.type===o))return{collectionNode:l,collectionItemNode:c,variableDefinition:f,controlDescription:u,rawControlProp:h,controlProp:y,reducedControlProp:C,variableId:i}}var LI=new WeakMap;function NV(t,e){let r=LI.get(t);if(r&&r.rawControlProp===e){let{controlProp:i,reducedControlProp:a}=r;return{controlProp:i,reducedControlProp:a}}let o=im(t,e),n=la(t);return n&&o&&sa(n,o,t),LI.set(t,{rawControlProp:e,controlProp:o,reducedControlProp:n}),{controlProp:o,reducedControlProp:n}}function EI(t){return t!=null&&typeof t=="object"&&t.nodeType===1}function OI(t,e){return e&&t==="hidden"?!1:t!=="visible"&&t!=="clip"}function au(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){let r=getComputedStyle(t,null);return OI(r.overflowY,e)||OI(r.overflowX,e)}return!1}function Jl(t,e,r,o,n,i,a,s){return i<t&&a>e||i>t&&a<e?0:i<=t&&s<=r||a>=e&&s>=r?i-t-o:a>e&&s<r||i<t&&s>r?a-e+n:0}function su(t,e){let{scrollMode:r,block:o,inline:n,boundary:i,skipOverflowHiddenElements:a}=e,s=typeof i=="function"?i:z=>z!==i;if(!EI(t))throw new TypeError("Invalid target");let l=document.scrollingElement||document.documentElement,c=[],d=t;for(;EI(d)&&s(d);){if(d=d.parentNode,d===l){c.push(d);break}d===document.body&&au(d)&&!au(document.documentElement)||au(d,a)&&c.push(d)}let p=window.visualViewport,u=p?.width??innerWidth,f=p?.height??innerHeight,h=window.scrollX||pageXOffset,y=window.scrollY||pageYOffset,{height:C,width:b,top:N,right:T,bottom:w,left:V}=t.getBoundingClientRect(),L=o==="start"||o==="nearest"?N:o==="end"?w:N+C/2,F=n==="center"?V+b/2:n==="end"?T:V,_=[];for(let z of c){let{height:Z,width:M,top:he,right:Ie,bottom:de,left:ee}=z.getBoundingClientRect();if(r==="if-needed"&&N>=0&&V>=0&&w<=f&&T<=u&&N>=he&&w<=de&&V>=ee&&T<=Ie)return _;let ue=getComputedStyle(z),ie=parseInt(ue.borderLeftWidth,10),Te=parseInt(ue.borderTopWidth,10),st=parseInt(ue.borderRightWidth,10),K=parseInt(ue.borderBottomWidth,10),B=0,ae=0,ke="offsetWidth"in z?z.offsetWidth-z.clientWidth-ie-st:0,qe="offsetHeight"in z?z.offsetHeight-z.clientHeight-Te-K:0;if(l===z)o==="start"?B=L:o==="end"?B=L-f:o==="nearest"?B=Jl(y,y+f,f,Te,K,y+L,y+L+C,C):B=L-f/2,n==="start"?ae=F:n==="center"?ae=F-u/2:n==="end"?ae=F-u:ae=Jl(h,h+u,u,ie,st,h+F,h+F+b,b),B=Math.max(0,B+y),ae=Math.max(0,ae+h);else{o==="start"?B=L-he-Te:o==="end"?B=L-de+K+qe:o==="nearest"?B=Jl(he,de,Z,Te,K+qe,L,L+C,C):B=L-(he+Z/2)+qe/2,n==="start"?ae=F-ee-ie:n==="center"?ae=F-(ee+M/2)+ke/2:n==="end"?ae=F-Ie+st+ke:ae=Jl(ee,Ie,M,ie,st+ke,F,F+b,b);let{scrollLeft:Dt,scrollTop:xe}=z;B=Math.max(0,Math.min(xe+B,z.scrollHeight-Z+qe)),ae=Math.max(0,Math.min(Dt+ae,z.scrollWidth-M+ke)),L+=xe-B,F+=Dt-ae}_.push({el:z,top:B,left:ae})}return _}function BI(t){return t===Object(t)&&Object.keys(t).length!==0}function wV(t,e="auto"){let r="scrollBehavior"in document.body.style;t.forEach(({el:o,top:n,left:i})=>{o!==document.body&&(o.scroll&&r?o.scroll({top:n,left:i,behavior:e}):(o.scrollTop=n,o.scrollLeft=i))})}function xV(t){return t===!1?{block:"end",inline:"nearest"}:BI(t)?t:{block:"start",inline:"nearest"}}function zI(t,e){let r=!t.ownerDocument.documentElement.contains(t);if(BI(e)&&typeof e.behavior=="function")return e.behavior(r?[]:su(t,e));if(r)return;let o=xV(e);return wV(su(t,o),o.behavior)}var RV="codemark",ca=100,$I=new hm(RV);function zr(t,e){var r,o;return"schema"in t?(r=e?.markType)!==null&&r!==void 0?r:t.schema.marks.code:(o=e?.markType)!==null&&o!==void 0?o:t.state.schema.marks.code}function ao(t,e){return t.resolve(Math.min(Math.max(1,e),t.nodeSize-2))}function HI(t,e,r,o){var n;let i=t.isInSet((n=e.state.storedMarks)!==null&&n!==void 0?n:e.state.doc.resolve(r).marks()),a=e.state.doc.rangeHasMark(r,o,t);return!!(i||a)}var UI={match:/`((?:[^`\w]|[\w])+)`$/,handler:(t,e,r,o,n,i,a,s)=>{if(HI(t,e,n,i))return!1;let l=o[1],c=t.create(s),d=n+l.length,p=e.state.tr.delete(n,i).insertText(l).addMark(n,d,c),u=p.setSelection(Yt.create(p.doc,d)).removeStoredMark(t),f=u.setMeta(a.input,{transform:u,from:n,to:i,text:`\`${l}${r}`});return e.dispatch(f),!0}},WI={match:/^`((?:[^`\w]|[\w])+)`/,handler:(t,e,r,o,n,i,a,s)=>{if(HI(t,e,n,i))return!1;let l=t.create(s),c=o[1],d=n,p=e.state.tr.delete(n,i).insertText(c).addMark(n,n+c.length,l),u=p.setSelection(Yt.create(p.doc,d)).addStoredMark(l),f=u.setMeta(a.input,{transform:u,from:n,to:i,text:`\`${c}${r}`});return e.dispatch(f),!0}};function kV(t,e,r,o,n,i,a){if(e.composing)return!1;let{state:s}=e,l=s.doc.resolve(r);if(l.parent.type.spec.code)return!1;let c="\uFFFC",d=l.parent.textBetween(Math.max(0,l.parentOffset-ca),l.parentOffset,void 0,c)+n,p=n+l.parent.textBetween(l.parentOffset,Math.min(l.parent.nodeSize-2,l.parentOffset+ca),void 0,c),u=UI.match.exec(d),f=WI.match.exec(p);if(u){let h=UI.handler(t,e,n,u,r-u[0].length+n.length,o,i,a);if(h)return h}return f?WI.handler(t,e,n,f,r,o+f[0].length-n.length,i,a):!1}function GI(t,e){e||(e={});let r=new yr({isInputRules:!0,state:{init:()=>null,apply(o,n){let i=o.getMeta(r);return i||(o.selectionSet||o.docChanged?null:n)}},props:{handleTextInput(o,n,i,a){let s=zr(o,e);return kV(s,o,n,i,a,{input:r,cursor:t},e.attrs)}}});return r}function $r(t,e,r="next"){let o={action:r};return t.dispatch(t.state.tr.setMeta(e,o)),!1}function _I(t,e,r,o,n){if(t.state.selection.empty||r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{from:i,to:a}=t.state.selection;if(a-i>=ca||t.state.doc.rangeHasMark(i,a,o))return!1;let s=t.state.tr.addMark(i,a,o.create(n)),l=s.setSelection(Yt.create(s.doc,a)).removeStoredMark(o);return t.dispatch(l),!0}function MV(t,e,r,o,n){var i;if(r.metaKey)return $r(t,e);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:a,doc:s}=t.state;if(!a.empty)return!1;let l=e.getState(t.state),c=a.$from,d=!!o.isInSet(c.marks()),p=!!o.isInSet((i=c.marksAcross(ao(s,a.from+1)))!==null&&i!==void 0?i:[]);return c.pos===t.state.doc.nodeSize-3&&c.parentOffset===c.parent.nodeSize-2&&l?.active?(t.dispatch(t.state.tr.removeStoredMark(o)),!0):d===p&&c.parentOffset!==0?!1:d&&(!l?.active||l.side===-1)&&c.parentOffset!==0?(t.dispatch(t.state.tr.removeStoredMark(o)),!0):p&&l?.side===-1?(t.dispatch(t.state.tr.addStoredMark(o.create(n))),!0):!1}function jI(t,e,r,o,n){if(MV(t,e,r,o,n))return!0;let{selection:a}=t.state,s=a.$from;return a.empty&&s.parentOffset===s.parent.nodeSize-2?$r(t,e):!1}function VV(t,e,r,o,n){var i;if(r.metaKey)return $r(t,e);if(r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:a,doc:s}=t.state,l=e.getState(t.state),c=!!o.isInSet(a.$from.marks()),d=!!o.isInSet((i=ao(s,a.empty?a.from-1:a.from+1).marks())!==null&&i!==void 0?i:[]);if(c&&l?.side===-1&&a.$from.parentOffset===0)return!1;if(l?.side===0&&a.$from.parentOffset===0)return t.dispatch(t.state.tr.removeStoredMark(o)),!0;if(c&&d&&l?.side===0)return t.dispatch(t.state.tr.addStoredMark(o.create(n))),!0;if(c&&!d&&l?.active&&a.$from.parentOffset===0||!c&&l?.active&&l?.side===0)return t.dispatch(t.state.tr.removeStoredMark(o)),!0;if(c===d)return!1;if(d||!a.empty&&c){let p=a.empty?a.from-1:a.from,u=t.state.tr.setSelection(Yt.create(s,p));return!a.empty&&d?t.dispatch(u.addStoredMark(o.create(n))):t.dispatch(u.removeStoredMark(o)),!0}if((d||!a.empty&&c)&&!l?.active){let p=a.empty?a.from-1:a.from;return t.dispatch(t.state.tr.setSelection(Yt.create(s,p)).removeStoredMark(o)),!0}if(c&&!l?.active&&a.$from.parentOffset>0)return t.dispatch(t.state.tr.setSelection(Yt.create(s,a.from-1)).addStoredMark(o.create(n))),!0;if(c&&!d&&l?.active&&l.side!==-1)return t.dispatch(t.state.tr.addStoredMark(o.create(n))),!0;if(c&&!d&&l?.active){let p=a.from-1;return t.dispatch(t.state.tr.setSelection(Yt.create(s,p)).addStoredMark(o.create(n))),!0}return!1}function JI(t,e,r,o,n){if(VV(t,e,r,o,n))return!0;let{selection:a}=t.state,s=a.$from,l=e.getState(t.state);return s.pos===1&&s.parentOffset===0&&l?.side===-1?!0:a.empty&&s.parentOffset===0?$r(t,e):!1}function qI(t,e,r,o){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:n,doc:i}=t.state,a=ao(i,n.from-1),s=!!o.isInSet(a.marks()),l=a.parentOffset===0,c=!!o.isInSet(ao(i,n.to+1).marks());if((!s||l)&&!c)return $r(t,e);let d=e.getState(t.state);if(n.empty&&d?.side===-1){let p=t.state.tr.delete(n.from-1,n.from);return t.dispatch(p),!0}return!1}function XI(t,e,r,o){if(r.metaKey||r.shiftKey||r.altKey||r.ctrlKey)return!1;let{selection:n,doc:i}=t.state,a=!!o.isInSet(n.$from.marks()),s=n.$from.parentOffset===0,l=!!o.isInSet(ao(i,n.to+2).marks());return(!a||s)&&!l?$r(t,e):!1}function KI(t,e){var r,o;if(!t)return null;let{selection:n,doc:i}=t;if(!n.empty)return null;let a=!!e.isInSet((r=t.storedMarks)!==null&&r!==void 0?r:[]),s=!!e.isInSet(n.$from.marks()),l=!!e.isInSet((o=ao(i,n.from+1).marks())!==null&&o!==void 0?o:[]),c=n.$from.parentOffset===0;return s!==l||!s&&a!==s||s&&c?t.tr.removeStoredMark(e):null}function DV(){let t=document.createElement("span");return t.classList.add("fake-cursor"),t}function PV(t){t||(t={});let e=new yr({key:$I,appendTransaction:(r,o,n)=>{var i;let a=e.getState(o),s=(i=r[0])===null||i===void 0?void 0:i.getMeta(e);return a?.next||s?.action==="click"?KI(n,zr(n,t)):null},state:{init:()=>null,apply(r,o,n,i){var a;let s=r.getMeta(e);if(s?.action==="next")return{next:!0};let l=zr(i,t),c=l.isInSet((a=i.storedMarks)!==null&&a!==void 0?a:i.doc.resolve(r.selection.from).marks()),d=l.isInSet(i.doc.resolve(r.selection.from).marks()),p=l.isInSet(ao(i.doc,r.selection.from+1).marks()),u=r.selection.$from.parentOffset===0;return r.selection.empty?!c&&p&&(!d||u)?{active:!0,side:-1}:c&&(!d||u)?{active:!0,side:0}:!c&&d&&!p?{active:!0,side:0}:c&&d&&!p?{active:!0,side:-1}:null:null}},props:{attributes:r=>{var o;let{active:n=!1}=(o=e.getState(r))!==null&&o!==void 0?o:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:r=>{var o;let{active:n,side:i}=(o=e.getState(r))!==null&&o!==void 0?o:{};if(!n)return kc.empty;let a=gm.widget(r.selection.from,DV,{side:i});return kc.create(r.doc,[a])},handleKeyDown(r,o){switch(o.key){case"`":return _I(r,e,o,zr(r,t),t.attrs);case"ArrowRight":return jI(r,e,o,zr(r,t),t.attrs);case"ArrowLeft":return JI(r,e,o,zr(r,t),t.attrs);case"Backspace":return qI(r,e,o,zr(r,t));case"Delete":return XI(r,e,o,zr(r,t));case"ArrowUp":case"ArrowDown":case"Home":case"End":return $r(r,e);case"e":case"a":return o.ctrlKey?$r(r,e):!1;default:return!1}},handleClick(r){return $r(r,e,"click")}}});return e}function YI(t){let e=PV(t),r=GI(e,t);return[e,r]}var Ete=YI;var Ute=t=>(e,r)=>{if(!r)return!1;let o=e.selection,n=o.$from.node(1);if(!ht(n)||!qr(n)||o.$to.parentOffset===o.$to.parent.content.size)return!1;let a=n.attrs.tag;return a==="p"||a==="div"?!1:QI(t)(e,r)},Wte=t=>(e,r)=>{if(!r)return!1;let n=e.selection.$from.node(1);if(!ht(n)||qr(n))return!1;let i=n.attrs.tag;return i==="p"||i==="div"?!1:QI(t)(e,r)},QI=t=>(e,r)=>{if(!r)return!1;let o=t.nodes.lineBreak.create(),n=e.tr.replaceSelectionWith(o).scrollIntoView();return r(n),!0},Hte=t=>(e,r)=>{let o=e.selection;if(o.from!==o.to)return!1;let n=o.$from.node(-1);return!Sm(n)||Cm(o.$from.node(-3))||o.$from.parentOffset!==0||o.$from.index(-1)!==0||o.$from.index(-2)!==0?!1:Gy(t.nodes.listItem)(e,r&&(i=>{if(o.$from.depth>3){let a=o.$from.before(-1);i.join(a)}r(i)}))};function jte(t){return Qc(/^([ai]|\d+)\.\s$/iu,t.nodes.numberedList,e=>{let r=e[1];switch(r){case"a":return{listStyleType:"lower-alpha"};case"A":return{listStyleType:"upper-alpha"};case"i":return{listStyleType:"lower-roman"};case"I":return{listStyleType:"upper-roman"};default:return{start:Number(r)}}},(e,r)=>r.childCount+r.attrs.start===Number(e[1]))}function Jte(t){return Qc(/^\s*([-+*])\s$/u,t.nodes.bulletedList)}function Qte(){return new yr({appendTransaction(t,e,r){let o,n=r.selection.$from.parent;if(e.selection instanceof Vr&&t.find(a=>a.steps.find(s=>s instanceof mm))){let a=e.doc.firstChild,s=ht(n)&&!qr(n);if(a&&ht(a)&&s){let l=FV(a);if(o??=r.tr,l){let c=l.marks.find(vo);o.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c?.attrs.inlineStyles??{}});for(let d of l.marks)o.addMark(0,r.doc.content.size,d),o.addStoredMark(d)}else{let c=a.attrs.inlineStyles;o.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c})}}}return o}})}function FV(t){for(let e=0;e<t.childCount;e++){let r=t.child(e);if(ja(r))return r}}function ore(t,e){let r=e.getFontsForLoading().filter(i=>!Bo.isSelectorLoaded(i)),o=e.getTextStylePresets(!1).filter(Dp),n=t.getNodesWithTrait(o,fo).filter(i=>!Bo.isSelectorLoaded(i.font)).map(i=>i.font);return r.push(...n),r}var ZI=[Mr.youtube,Mr.vimeo,Mr.codeblock,Mr.twitter];async function eT(t,e){let r=Q(e);Nr(r)&&await t.stores.modulesStore.addExternalModulesToProject([r],{onTreeUpdate(){}})}var tT=new WeakMap;async function cre(t){let{modules:e}=await t.stores.modulesStore.lookUpModules(ZI.map(um)),r=[];for(let o=0;o<e.length;o++){let n=e[o];g(n,"Module must exist");let i=ZI[o];g(i,"Module component must exist"),tT.set(i,n),g(n.files.module,"Module must have a module file"),r.push(pc(n.id,n.saveId,n.files.module,i.exportSpecifier??"default"))}await t.stores.modulesStore.preloadExternalModules(r)}function da(t,e){let r=tT.get(e);g(r,"Preloaded module must exist");let o=t.getNodeWithTrait(r.id,bc);return o?o.codeComponentIdentifier:(g(r.files.module,"Module must have a module file"),pc(r.id,r.saveId,r.files.module,e.exportSpecifier??"default").value)}async function rT(t,e){let{moduleIdentifier:r}=await Ky(t,e);if(r.kind==="externalModuleExport"){let o=t.tree.getNodeWithTrait(r.moduleId,bc);if(o)return o.codeComponentIdentifier}return r.value}async function so(t,e,r,o,n={}){await eT(t,o);let i=r.state,a=i.tr;a.replaceRangeWith(i.selection.from,i.selection.to,e.nodes.module.create({identifier:o,props:n}));let s=i.selection.from===0?0:i.selection.from-1;a.setSelection(fm.create(a.doc,s)),r.dispatch(a)}async function ql(t,e,r,o,n){let i=await rT(t,o);await so(t,e,r,i,n)}async function Xl(t,e,r,o,n){_t("collection_record_youtube_add",{source:"cms"});let i=n?{url:{type:"string",value:n}}:void 0;try{let a=da(t.tree,Mr.youtube);await so(t,e,r,a,i),o?.()}catch(a){Re(a)}}async function Cre(t,e,r,o,n){let i=n?{url:{type:"string",value:n}}:void 0;try{let a=da(t.tree,Mr.twitter);await so(t,e,r,a,i),o?.()}catch(a){Re(a)}}async function Kl(t,e,r,o,n){_t("collection_record_vimeo_add",{source:"cms"});let i=n?{video:{type:"string",value:n}}:void 0;try{let a=da(t.tree,Mr.vimeo);await so(t,e,r,a,i),o?.()}catch(a){Re(a)}}async function bre(t,e,r,o="",n){let i={code:{type:"string",value:o}};_t("collection_record_codeblock_add",{source:"cms"});try{let a=da(t.tree,Mr.codeblock);await so(t,e,r,a,i),n?.()}catch(a){Re(a)}}function ua(t,e,r,o,n){return o.content.size===0?!1:(t.scheduler.processWhenReady(()=>{let i=e.state,a=i.tr,s=n(o),l=AV(s),c=i.selection.$from.node(1),d=i.selection.$from.before(1),p=!s.content.child(0).isInline,u=i.selection instanceof Vr||c?.content.size===0;if(l)a.replaceSelectionWith(l,!0);else if(p&&u){let f=c?d+c.nodeSize:i.selection.to;a.replaceRange(d,f,s)}else a.replaceSelection(s);a.scrollIntoView(),a.setMeta("paste",!0),a.setMeta("uiEvent","paste"),e.dispatch(a)}),!0)}function AV(t){return t.openStart===0&&t.openEnd===0&&t.content.childCount===1?t.content.firstChild:null}function pu(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var pn=pu();function lT(t){pn=t}var fa={exec:()=>null};function Ce(t,e=""){let r=typeof t=="string"?t:t.source,o={replace:(n,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(Ht.caret,"$1"),r=r.replace(n,a),o},getRegex:()=>new RegExp(r,e)};return o}var Ht={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},LV=/^(?:[ \t]*(?:\n|$))+/,EV=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,OV=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ha=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,BV=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,mu=/(?:[*+-]|\d{1,9}[.)])/,cT=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,dT=Ce(cT).replace(/bull/g,mu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),zV=Ce(cT).replace(/bull/g,mu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),fu=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$V=/^[^\n]+/,hu=/(?!\s*\])(?:\\.|[^\[\]\\])+/,UV=Ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",hu).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),WV=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,mu).getRegex(),rc="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gu=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,HV=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",gu).replace("tag",rc).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),uT=Ce(fu).replace("hr",ha).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rc).getRegex(),GV=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",uT).getRegex(),yu={blockquote:GV,code:EV,def:UV,fences:OV,heading:BV,hr:ha,html:HV,lheading:dT,list:WV,newline:LV,paragraph:uT,table:fa,text:$V},oT=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ha).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rc).getRegex(),_V={...yu,lheading:zV,table:oT,paragraph:Ce(fu).replace("hr",ha).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",oT).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rc).getRegex()},jV={...yu,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gu).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:fa,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(fu).replace("hr",ha).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dT).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},JV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,qV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,pT=/^( {2,}|\\)\n(?!\s*$)/,XV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,oc=/[\p{P}\p{S}]/u,Su=/[\s\p{P}\p{S}]/u,mT=/[^\s\p{P}\p{S}]/u,KV=Ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Su).getRegex(),fT=/(?!~)[\p{P}\p{S}]/u,YV=/(?!~)[\s\p{P}\p{S}]/u,QV=/(?:[^\s\p{P}\p{S}]|~)/u,ZV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,hT=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,eD=Ce(hT,"u").replace(/punct/g,oc).getRegex(),tD=Ce(hT,"u").replace(/punct/g,fT).getRegex(),gT="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",rD=Ce(gT,"gu").replace(/notPunctSpace/g,mT).replace(/punctSpace/g,Su).replace(/punct/g,oc).getRegex(),oD=Ce(gT,"gu").replace(/notPunctSpace/g,QV).replace(/punctSpace/g,YV).replace(/punct/g,fT).getRegex(),nD=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,mT).replace(/punctSpace/g,Su).replace(/punct/g,oc).getRegex(),iD=Ce(/\\(punct)/,"gu").replace(/punct/g,oc).getRegex(),aD=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),sD=Ce(gu).replace("(?:-->|$)","-->").getRegex(),lD=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",sD).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Zl=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,cD=Ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Zl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),yT=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",Zl).replace("ref",hu).getRegex(),ST=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",hu).getRegex(),dD=Ce("reflink|nolink(?!\\()","g").replace("reflink",yT).replace("nolink",ST).getRegex(),Cu={_backpedal:fa,anyPunctuation:iD,autolink:aD,blockSkip:ZV,br:pT,code:qV,del:fa,emStrongLDelim:eD,emStrongRDelimAst:rD,emStrongRDelimUnd:nD,escape:JV,link:cD,nolink:ST,punctuation:KV,reflink:yT,reflinkSearch:dD,tag:lD,text:XV,url:fa},uD={...Cu,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",Zl).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Zl).getRegex()},cu={...Cu,emStrongRDelimAst:oD,emStrongLDelim:tD,url:Ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},pD={...cu,br:Ce(pT).replace("{2,}","*").getRegex(),text:Ce(cu.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Yl={normal:yu,gfm:_V,pedantic:jV},pa={normal:Cu,gfm:cu,breaks:pD,pedantic:uD},mD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nT=t=>mD[t];function Ur(t,e){if(e){if(Ht.escapeTest.test(t))return t.replace(Ht.escapeReplace,nT)}else if(Ht.escapeTestNoEncode.test(t))return t.replace(Ht.escapeReplaceNoEncode,nT);return t}function iT(t){try{t=encodeURI(t).replace(Ht.percentDecode,"%")}catch{return null}return t}function aT(t,e){let r=t.replace(Ht.findPipe,(i,a,s)=>{let l=!1,c=a;for(;--c>=0&&s[c]==="\\";)l=!l;return l?"|":" |"}),o=r.split(Ht.splitPipe),n=0;if(o[0].trim()||o.shift(),o.length>0&&!o.at(-1)?.trim()&&o.pop(),e)if(o.length>e)o.splice(e);else for(;o.length<e;)o.push("");for(;n<o.length;n++)o[n]=o[n].trim().replace(Ht.slashPipe,"|");return o}function ma(t,e,r){let o=t.length;if(o===0)return"";let n=0;for(;n<o;){let i=t.charAt(o-n-1);if(i===e&&!r)n++;else if(i!==e&&r)n++;else break}return t.slice(0,o-n)}function fD(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let o=0;o<t.length;o++)if(t[o]==="\\")o++;else if(t[o]===e[0])r++;else if(t[o]===e[1]&&(r--,r<0))return o;return r>0?-2:-1}function sT(t,e,r,o,n){let i=e.href,a=e.title||null,s=t[1].replace(n.other.outputLinkReplace,"$1");o.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:a,text:s,tokens:o.inlineTokens(s)};return o.state.inLink=!1,l}function hD(t,e,r){let o=t.match(r.other.indentCodeCompensation);if(o===null)return e;let n=o[1];return e.split(`
`).map(i=>{let a=i.match(r.other.beginningSpace);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var ec=class{constructor(t){S(this,"options");S(this,"rules");S(this,"lexer");this.options=t||pn}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ma(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],o=hD(r,e[3]||"",this.rules);return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:o}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(this.rules.other.endingHash.test(r)){let o=ma(r,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(r=o.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:ma(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=ma(e[0],`
`).split(`
`),o="",n="",i=[];for(;r.length>0;){let a=!1,s=[],l;for(l=0;l<r.length;l++)if(this.rules.other.blockquoteStart.test(r[l]))s.push(r[l]),a=!0;else if(!a)s.push(r[l]);else break;r=r.slice(l);let c=s.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");o=o?`${o}
${c}`:c,n=n?`${n}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,i,!0),this.lexer.state.top=p,r.length===0)break;let u=i.at(-1);if(u?.type==="code")break;if(u?.type==="blockquote"){let f=u,h=f.raw+`
`+r.join(`
`),y=this.blockquote(h);i[i.length-1]=y,o=o.substring(0,o.length-f.raw.length)+y.raw,n=n.substring(0,n.length-f.text.length)+y.text;break}else if(u?.type==="list"){let f=u,h=f.raw+`
`+r.join(`
`),y=this.list(h);i[i.length-1]=y,o=o.substring(0,o.length-u.raw.length)+y.raw,n=n.substring(0,n.length-f.raw.length)+y.raw,r=h.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:i,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r=e[1].trim(),o=r.length>1,n={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");let i=this.rules.other.listItemRegex(r),a=!1;for(;t;){let l=!1,c="",d="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),u=t.split(`
`,1)[0],f=!p.trim(),h=0;if(this.options.pedantic?(h=2,d=p.trimStart()):f?h=e[1].length+1:(h=e[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,d=p.slice(h),h+=e[1].length),f&&this.rules.other.blankLine.test(u)&&(c+=u+`
`,t=t.substring(u.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(h),N=this.rules.other.hrRegex(h),T=this.rules.other.fencesBeginRegex(h),w=this.rules.other.headingBeginRegex(h),V=this.rules.other.htmlBeginRegex(h);for(;t;){let L=t.split(`
`,1)[0],F;if(u=L,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),F=u):F=u.replace(this.rules.other.tabCharGlobal,"    "),T.test(u)||w.test(u)||V.test(u)||b.test(u)||N.test(u))break;if(F.search(this.rules.other.nonSpaceChar)>=h||!u.trim())d+=`
`+F.slice(h);else{if(f||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(p)||w.test(p)||N.test(p))break;d+=`
`+u}!f&&!u.trim()&&(f=!0),c+=L+`
`,t=t.substring(L.length+1),p=F.slice(h)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let y=null,C;this.options.gfm&&(y=this.rules.other.listIsTask.exec(d),y&&(C=y[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:c,task:!!y,checked:C,loose:!1,text:d,tokens:[]}),n.raw+=c}let s=n.items.at(-1);if(s)s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l=0;l<n.items.length;l++)if(this.lexer.state.top=!1,n.items[l].tokens=this.lexer.blockTokens(n.items[l].text,[]),!n.loose){let c=n.items[l].tokens.filter(p=>p.type==="space"),d=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));n.loose=d}if(n.loose)for(let l=0;l<n.items.length;l++)n.items[l].loose=!0;return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:o,title:n}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let r=aT(e[1]),o=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===o.length){for(let a of o)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<r.length;a++)i.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:i.align[a]});for(let a of n)i.rows.push(aT(a,i.header.length).map((s,l)=>({text:s,tokens:this.lexer.inline(s),header:!1,align:i.align[l]})));return i}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=ma(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{let i=fD(e[2],"()");if(i===-2)return;if(i>-1){let s=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,s).trim(),e[3]=""}}let o=e[2],n="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(o);i&&(o=i[1],n=i[3])}else n=e[3]?e[3].slice(1,-1):"";return o=o.trim(),this.rules.other.startAngleBracket.test(o)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?o=o.slice(1):o=o.slice(1,-1)),sT(e,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let o=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[o.toLowerCase()];if(!n){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return sT(r,n,r[0],this.lexer,this.rules)}}emStrong(t,e,r=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(o[1]||o[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let i=[...o[0]].length-1,a,s,l=i,c=0,d=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+i);(o=d.exec(e))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(s=[...a].length,o[3]||o[4]){l+=s;continue}else if((o[5]||o[6])&&i%3&&!((i+s)%3)){c+=s;continue}if(l-=s,l>0)continue;s=Math.min(s,s+l+c);let p=[...o[0]][0].length,u=t.slice(0,i+o.index+p+s);if(Math.min(i,s)%2){let h=u.slice(1,-1);return{type:"em",raw:u,text:h,tokens:this.lexer.inlineTokens(h)}}let f=u.slice(2,-2);return{type:"strong",raw:u,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return o&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let r,o;return e[2]==="@"?(r=e[1],o="mailto:"+r):(r=e[1],o=r),{type:"link",raw:e[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let r,o;if(e[2]==="@")r=e[0],o="mailto:"+r;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);r=e[0],e[1]==="www."?o="http://"+e[0]:o=e[0]}return{type:"link",raw:e[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let r=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:r}}}},lo=class du{constructor(e){S(this,"tokens");S(this,"options");S(this,"state");S(this,"tokenizer");S(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||pn,this.options.tokenizer=this.options.tokenizer||new ec,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Ht,block:Yl.normal,inline:pa.normal};this.options.pedantic?(r.block=Yl.pedantic,r.inline=pa.pedantic):this.options.gfm&&(r.block=Yl.gfm,this.options.breaks?r.inline=pa.breaks:r.inline=pa.gfm),this.tokenizer.rules=r}static get rules(){return{block:Yl,inline:pa}}static lex(e,r){return new du(r).lex(e)}static lexInline(e,r){return new du(r).inlineTokens(e)}lex(e){e=e.replace(Ht.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let o=this.inlineQueue[r];this.inlineTokens(o.src,o.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],o=!1){for(this.options.pedantic&&(e=e.replace(Ht.tabCharGlobal,"    ").replace(Ht.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(a=>(n=a.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let a=r.at(-1);n.raw.length===1&&a!==void 0?a.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let a=r.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.at(-1).src=a.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let a=r.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}let i=e;if(this.options.extensions?.startBlock){let a=1/0,s=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},s),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let a=r.at(-1);o&&a?.type==="paragraph"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):r.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let a=r.at(-1);a?.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):r.push(n);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let o=e,n=null;if(this.tokens.links){let s=Object.keys(this.tokens.links);if(s.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)s.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,n.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,a="";for(;e;){i||(a=""),i=!1;let s;if(this.options.extensions?.inline?.some(c=>(s=c.call({lexer:this},e,r))?(e=e.substring(s.raw.length),r.push(s),!0):!1))continue;if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length);let c=r.at(-1);s.type==="text"&&c?.type==="text"?(c.raw+=s.raw,c.text+=s.text):r.push(s);continue}if(s=this.tokenizer.emStrong(e,o,a)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),r.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),r.push(s);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0,d=e.slice(1),p;this.options.extensions.startInline.forEach(u=>{p=u.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(s=this.tokenizer.inlineText(l)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(a=s.raw.slice(-1)),i=!0;let c=r.at(-1);c?.type==="text"?(c.raw+=s.raw,c.text+=s.text):r.push(s);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return r}},tc=class{constructor(t){S(this,"options");S(this,"parser");this.options=t||pn}space(t){return""}code({text:t,lang:e,escaped:r}){let o=(e||"").match(Ht.notSpaceStart)?.[0],n=t.replace(Ht.endingNewline,"")+`
`;return o?'<pre><code class="language-'+Ur(o)+'">'+(r?n:Ur(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:Ur(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,r=t.start,o="";for(let a=0;a<t.items.length;a++){let s=t.items[a];o+=this.listitem(s)}let n=e?"ol":"ul",i=e&&r!==1?' start="'+r+'"':"";return"<"+n+i+`>
`+o+"</"+n+`>
`}listitem(t){let e="";if(t.task){let r=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Ur(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",r="";for(let n=0;n<t.header.length;n++)r+=this.tablecell(t.header[n]);e+=this.tablerow({text:r});let o="";for(let n=0;n<t.rows.length;n++){let i=t.rows[n];r="";for(let a=0;a<i.length;a++)r+=this.tablecell(i[a]);o+=this.tablerow({text:r})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+o+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Ur(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:r}){let o=this.parser.parseInline(r),n=iT(t);if(n===null)return o;t=n;let i='<a href="'+t+'"';return e&&(i+=' title="'+Ur(e)+'"'),i+=">"+o+"</a>",i}image({href:t,title:e,text:r,tokens:o}){o&&(r=this.parser.parseInline(o,this.parser.textRenderer));let n=iT(t);if(n===null)return Ur(r);t=n;let i=`<img src="${t}" alt="${r}"`;return e&&(i+=` title="${Ur(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Ur(t.text)}},bu=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},co=class uu{constructor(e){S(this,"options");S(this,"renderer");S(this,"textRenderer");this.options=e||pn,this.options.renderer=this.options.renderer||new tc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new bu}static parse(e,r){return new uu(r).parse(e)}static parseInline(e,r){return new uu(r).parseInline(e)}parse(e,r=!0){let o="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let s=i,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){o+=l||"";continue}}let a=i;switch(a.type){case"space":{o+=this.renderer.space(a);continue}case"hr":{o+=this.renderer.hr(a);continue}case"heading":{o+=this.renderer.heading(a);continue}case"code":{o+=this.renderer.code(a);continue}case"table":{o+=this.renderer.table(a);continue}case"blockquote":{o+=this.renderer.blockquote(a);continue}case"list":{o+=this.renderer.list(a);continue}case"html":{o+=this.renderer.html(a);continue}case"paragraph":{o+=this.renderer.paragraph(a);continue}case"text":{let s=a,l=this.renderer.text(s);for(;n+1<e.length&&e[n+1].type==="text";)s=e[++n],l+=`
`+this.renderer.text(s);r?o+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):o+=l;continue}default:{let s='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return o}parseInline(e,r=this.renderer){let o="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){o+=s||"";continue}}let a=i;switch(a.type){case"escape":{o+=r.text(a);break}case"html":{o+=r.html(a);break}case"link":{o+=r.link(a);break}case"image":{o+=r.image(a);break}case"strong":{o+=r.strong(a);break}case"em":{o+=r.em(a);break}case"codespan":{o+=r.codespan(a);break}case"br":{o+=r.br(a);break}case"del":{o+=r.del(a);break}case"text":{o+=r.text(a);break}default:{let s='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return o}},lu,Ql=(lu=class{constructor(t){S(this,"options");S(this,"block");this.options=t||pn}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?lo.lex:lo.lexInline}provideParser(){return this.block?co.parse:co.parseInline}},S(lu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),lu),gD=class{constructor(...t){S(this,"defaults",pu());S(this,"options",this.setOptions);S(this,"parse",this.parseMarkdown(!0));S(this,"parseInline",this.parseMarkdown(!1));S(this,"Parser",co);S(this,"Renderer",tc);S(this,"TextRenderer",bu);S(this,"Lexer",lo);S(this,"Tokenizer",ec);S(this,"Hooks",Ql);this.use(...t)}walkTokens(t,e){let r=[];for(let o of t)switch(r=r.concat(e.call(this,o)),o.type){case"table":{let n=o;for(let i of n.header)r=r.concat(this.walkTokens(i.tokens,e));for(let i of n.rows)for(let a of i)r=r.concat(this.walkTokens(a.tokens,e));break}case"list":{let n=o;r=r.concat(this.walkTokens(n.items,e));break}default:{let n=o;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(i=>{let a=n[i].flat(1/0);r=r.concat(this.walkTokens(a,e))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let i=e.renderers[n.name];i?e.renderers[n.name]=function(...a){let s=n.renderer.apply(this,a);return s===!1&&(s=i.apply(this,a)),s}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[n.level];i?i.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),o.extensions=e),r.renderer){let n=this.defaults.renderer||new tc(this.defaults);for(let i in r.renderer){if(!(i in n))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,s=r.renderer[a],l=n[a];n[a]=(...c)=>{let d=s.apply(n,c);return d===!1&&(d=l.apply(n,c)),d||""}}o.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new ec(this.defaults);for(let i in r.tokenizer){if(!(i in n))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,s=r.tokenizer[a],l=n[a];n[a]=(...c)=>{let d=s.apply(n,c);return d===!1&&(d=l.apply(n,c)),d}}o.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new Ql;for(let i in r.hooks){if(!(i in n))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,s=r.hooks[a],l=n[a];Ql.passThroughHooks.has(i)?n[a]=c=>{if(this.defaults.async)return Promise.resolve(s.call(n,c)).then(p=>l.call(n,p));let d=s.call(n,c);return l.call(n,d)}:n[a]=(...c)=>{let d=s.apply(n,c);return d===!1&&(d=l.apply(n,c)),d}}o.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,i=r.walkTokens;o.walkTokens=function(a){let s=[];return s.push(i.call(this,a)),n&&(s=s.concat(n.call(this,a))),s}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return lo.lex(t,e??this.defaults)}parser(t,e){return co.parse(t,e??this.defaults)}parseMarkdown(t){return(r,o)=>{let n={...o},i={...this.defaults,...n},a=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);let s=i.hooks?i.hooks.provideLexer():t?lo.lex:lo.lexInline,l=i.hooks?i.hooks.provideParser():t?co.parse:co.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(c=>s(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(a);try{i.hooks&&(r=i.hooks.preprocess(r));let c=s(r,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let d=l(c,i);return i.hooks&&(d=i.hooks.postprocess(d)),d}catch(c){return a(c)}}}onError(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let o="<p>An error occurred:</p><pre>"+Ur(r.message+"",!0)+"</pre>";return e?Promise.resolve(o):o}if(e)return Promise.reject(r);throw r}}},un=new gD;function Se(t,e){return un.parse(t,e)}Se.options=Se.setOptions=function(t){return un.setOptions(t),Se.defaults=un.defaults,lT(Se.defaults),Se};Se.getDefaults=pu;Se.defaults=pn;Se.use=function(...t){return un.use(...t),Se.defaults=un.defaults,lT(Se.defaults),Se};Se.walkTokens=function(t,e){return un.walkTokens(t,e)};Se.parseInline=un.parseInline;Se.Parser=co;Se.parser=co.parse;Se.Renderer=tc;Se.TextRenderer=bu;Se.Lexer=lo;Se.lexer=lo.lex;Se.Tokenizer=ec;Se.Hooks=Ql;Se.parse=Se;var Nre=Se.options,wre=Se.setOptions,xre=Se.use,Rre=Se.walkTokens,kre=Se.parseInline;var Mre=co.parse,Vre=lo.lex;var yD=/^(#{1,6})\s+(.+)$/m,SD=/\*\*(.*?)\*\*/,CD=/\*(.*?)\*/,bD=/^\s*[-*+]\s+(.+)$/m,vD=/^\s*(\d+)\.\s+(.+)$/m,ID=/^>\s+(.+)$/m,TD=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/,ND=/`([^`]+)`/,wD=/```[\s\S]*?```/,xD=/^\s*\|(.+\|)+\s*$/m,RD=/~~(.*?)~~/,kD=/^\s*[-*+]\s+\[[ x]\]\s+\S/m,MD=/^(-{3,}|_{3,})\s*$/m,VD=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/,DD=/<(https?:\/\/[^>]+)>/;function CT(t){return!t||t.length===0?!1:[yD,SD,CD,bD,vD,ID,TD,ND,wD,xD,RD,kD,MD,VD,DD].some(r=>r.test(t))}function bT(t,e){let r=Se.parse(t,{async:!1,gfm:!0,breaks:!0}),o=document.createElement("div");return o.innerHTML=r,pm.fromSchema(e).parseSlice(o,{preserveWhitespace:!0})}var PD=me("prosemirror:addMedia"),IT=[{extension:"mp4",mimeType:"video/mp4"}];function vT(t){return t=t.toLowerCase(),IT.some(({extension:e})=>t.endsWith(`.${e}`))}function FD(t){return t.startsWith("video/")}var TT=[...Cs],NT=new Set(bs);for(let{extension:t,mimeType:e}of IT)TT.push(t),NT.add(e);var AD="failed-asset-upload-placeholder",wT="updateAssetReferences";function qre(t){return t.getMeta(wT)}function LD(t){return t.setMeta(wT,!0)}async function mn(t,e,r,o,{type:n,insertPosition:i,mediaExtractedFromHTML:a}){let s=r.state,l=s.tr,c=new Jn(t,{silent:a}),d=[],p=[],u=[];for(let N of o)if(N instanceof File){let T=FD(N.type);if(g(!a,"we should not receive files if the media is already in a document"),!NT.has(N.type))continue;let w=URL.createObjectURL(N);d.push({uploadResultTask:c.createTask(N,V=>V),temporaryURL:w,type:T?"video":"image"}),p.push({src:w,isVideo:T}),u.push(w)}else{let T=Xu(N.src);if(T){p.push({src:N.src,isVideo:vT(T.originalFilename??T.identifier)});continue}p.push({src:N.src,isVideo:vT(N.src)}),d.push({uploadResultTask:c.createTask(N.src,w=>w),temporaryURL:N.src,type:N.type})}if(!d.length)return Promise.resolve();if(!a)for(let{src:N,isVideo:T}of p){let w=e.nodes.image.create({src:N,type:T?"video":"image"});i?l.insert(i,w):s.selection.replaceWith(l,w)}l.scrollIntoView(),(n==="drop"||n==="paste")&&(l.setMeta(n,!0),l.setMeta("uiEvent",n)),r.dispatch(l);let f=d.map(N=>N.uploadResultTask());a&&md(c,f).catch(()=>{});let y=(await Promise.allSettled(f)).map((N,T)=>ED(N,T,d)),C=[];y.forEach(N=>{if(N.type==="asset")return C.push(N.asset)});let b=new Map;d.forEach((N,T)=>{let w=y[T];g(w,"Asset upload result must be defined"),b.set(N.temporaryURL,w)}),OD(r,b),u.forEach(N=>URL.revokeObjectURL(N))}function ED(t,e,r){switch(t.status){case"fulfilled":{let{value:o}=t,{asset:n}=o;return o.type==="image"?{type:"asset",asset:n,imageSize:o.imageSize}:{type:"asset",asset:n}}case"rejected":{let o=r[e];return g(o,"Upload must be defined"),PD.reportError(new Error(t.reason)),{type:"failed upload"}}}}async function Xre(t,e,r,o){let n=await DC.pickFile({allowedFileTypes:TT});if(!n)return;let i=n[0];return mn(t,e,r,[i],o)}function OD(t,e){let r=t.state,o=r.tr;r.doc.descendants((n,i)=>{if(!xn(n))return;let a=e.get(n.attrs.src);if(a===void 0)return;let s={...n.attrs};if(a.type==="failed upload")s.src=AD;else if(a.imageSize){s.src=qu({identifier:gc(a.asset),intrinsicSize:{width:a.imageSize.naturalWidth,height:a.imageSize.naturalHeight}});let l=Ny(a.imageSize);s.pixelWidth=l.nonZeroNaturalWidth,s.pixelHeight=l.nonZeroNaturalHeight}else s.src=Ju(gc(a.asset));o.setNodeMarkup(i,n.type,s),LD(o)}),t.dispatch(o)}function nc(t){let e=t.querySelector("b[id^='docs-internal-guid']")??t.querySelector("*[id^='docs-internal-guid']")?.parentElement;if(e)for(let r=e.children.length-1;r>=0;r--){let o=e.children[r];if(o){for(o instanceof HTMLParagraphElement&&!lt.isOn("pasteMarkdown")&&BD(o),o instanceof HTMLDivElement&&zD(o);xT(o.firstChild);)o.removeChild(o.firstChild);for(;xT(o.lastChild);)o.removeChild(o.lastChild);(o.tagName==="BR"||o.childNodes.length===0)&&o.remove()}}}function xT(t){return t instanceof Element&&t.textContent===""&&t.querySelectorAll("img").length===0}function BD(t){if(t.textContent!=="")return;let e=t.querySelectorAll("img");e.length!==0&&t.replaceWith(...e)}function zD(t){let e=t.querySelector("table");e===null||e.querySelectorAll("tr").length===0||e.querySelectorAll("th, td").length===0||t.replaceWith(e)}function RT(t){let e=ym.map(o=>`${o}:has(img)`).join(", ");for(let o of t.querySelectorAll("*:empty"))o.setAttribute("data-original-empty","1");for(let o of t.querySelectorAll(e)){let n=o.parentNode;if(!n)continue;let i=o.querySelector("img");for(;i;){let a=document.createRange();a.setStart(o,0),a.setEndBefore(i);let s=a.extractContents();if(s.childNodes.length){let l=o.cloneNode(!1);l.appendChild(s),l.hasChildNodes()&&n.insertBefore(l,o)}n.insertBefore(i,o),i=o.querySelector("img")}}let r;for(;r=t.querySelector("*:empty:not([data-original-empty])");)r.remove();for(let o of t.querySelectorAll("[data-original-empty]"))o.removeAttribute("data-original-empty")}var $D=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,UD=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function kT({engine:t,schema:e,stylePresetGetters:r,supportedTags:o,saveChanges:n}){return new yr({props:{clipboardSerializer:r?new vu(e):void 0,transformPastedHTML(i){let a=$n(i);return nc(a),RT(a),a.innerHTML},handlePaste(i,a,s){let l=a.clipboardData?.getData("text/plain"),c=a.clipboardData?.getData("text/html");if(Mc(e)){let{clipboardData:d}=a;if(d&&d.files.length>0)return mn(t,e,i,d.files,{type:"paste"}).finally(n),!0}if(A(l)){let p=["http:","https:","mailto:","www."].some(f=>l.startsWith(f)),u=i.state.selection;if(p&&u.from!==u.to&&bm(e)){let f=$a({url:l}),h=i.state.tr;return h.addMark(u.from,u.to,e.marks.link.create({link:f,openInNewTab:Ns(f),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),i.dispatch(h),!0}if(Vc(e)&&lt.isOn("cmsPasteModules")){let f=Q(l);if(be(f))return so(t,e,i,f.value).catch(Re),!0;if(os(l))return ql(t,e,i,l).catch(Re),!0}if(Vc(e)){if(UD.test(l))return Xl(t,e,i,n,l).catch(Re),!0;if($D.test(l))return Kl(t,e,i,n,l).catch(Re),!0}}return ua(t,i,a,s,d=>{if(r&&c&&HD(c))return d;let p=CT(l);l&&p&&(d=bT(l,e));let u=e.nodes.document.create(void 0),f=new wn(u);f.insert(0,d.content);let h=[];if(f.doc.descendants((C,b)=>{if(ht(C)){let N=C.attrs.tag,T=o?.has(N)??!0,w=Fn(N)&&T?N:"p";f.setNodeMarkup(b,e.nodes.textBlock,{...C.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:w})}xn(C)&&h.push({src:C.attrs.src,type:C.attrs.type})}),h.length&&Mc(e)&&mn(t,e,i,h,{type:"paste",mediaExtractedFromHTML:!0}).finally(n),vm(e)&&r){let b=i.state.selection,T=b.$from.parent,w=T.textContent,V=ht(T)&&w.length>0,L=b instanceof Vr,_=!c&&l&&l.length>0&&!p;!V&&!_&&!L?GD(t,e,r.getStylePresetForTag,r.getStylePresetForLink,f):_D(i,e,f)}let y=d.content.child(0).isInline?f.doc.content.child(0).content:f.doc.content;return new Nn(y,d.openStart,d.openEnd)})}}})}var MT="framer-match-formatting",WD=document.createComment(MT);function HD(t){return t.endsWith(`<!--${MT}-->`)}var vu=class{constructor(e){S(this,"domSerializer");S(this,"nodes");S(this,"marks");this.domSerializer=_a.fromSchema(e),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(e,r){return this.domSerializer.serializeNode(e,r)}serializeFragment(e,r){let o=this.domSerializer.serializeFragment(e,r);return o.appendChild(WD),o}};function GD(t,e,r,o,n){n.doc.descendants((i,a)=>{if(ht(i)){let s=i.attrs,l=A(s.textStylePreset)?t.tree.getNodeWithTrait(s.textStylePreset,$o):void 0,c=Fn(s.tag)?s.tag:"p",d=l??r(c)??Vs(t.tree,c)??rs.createDefault(c);Ds(t,d),n.setNodeMarkup(a,e.nodes.textBlock,{...i.attrs,blockStyles:l?i.attrs.blockStyles:{},inlineStyles:l?i.attrs.inlineStyles:{},textStylePreset:d.id}),l||n.removeMark(a,i.nodeSize,e.marks.inlineStyles)}if(i.type===e.nodes.text){let s=i.marks.find(Ja);if(s){let l=o()??ks(t.tree)??Rs.createDefault();Ms(t,l),n.addMark(a,a+i.nodeSize,s.type.create({...s.attrs,linkStylePreset:l.id}))}}})}function _D(t,e,r){let o=t.state,n=o.selection;if(n instanceof Vr){let c=o.doc.resolve(1);n=new Yt(c)}let i=n.$from.parent,a=ht(i),l=n.$from.marks().find(vo);if(l)r.addMark(0,r.doc.content.size,l);else if(a){let c=e.marks.inlineStyles.create({inlineStyles:i.attrs.inlineStyles});r.addMark(0,r.doc.content.size,c)}else r.removeMark(0,r.doc.content.size,e.marks.inlineStyles);r.doc.descendants((c,d)=>{if(!ht(c))return;let p=a?i.attrs:c.attrs;r.setNodeMarkup(d,e.nodes.textBlock,p)})}var VT="framer-rich-text",jD=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,JD=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function DT(t,e){return new yr({props:{handlePaste(r,o,n){let i=o.clipboardData?.getData("text/plain"),a=o.clipboardData?.getData("text/html");return i===""&&a===""?!0:ua(t,r,o,n,s=>{let l=!a&&i&&i.length>0;if(a?.endsWith(`<!--${VT}-->`))return s;let p=r.state.selection,f=p.$from.parent,h=f.textContent,y=ht(f)&&h.length>0,C=p instanceof Vr;return!y&&!l&&!C?XD(t,e,s):YD(r,s)})},clipboardSerializer:new Iu(_e)}})}function Joe(t,e,r,o,n,i){return new yr({props:{transformPastedHTML(a){let s=$n(a);return nc(s),s.innerHTML},handlePaste(a,s,l){if(e){let{clipboardData:d}=s;if(d&&d.files.length>0)return mn(t,_e,a,d.files,{type:"paste"}).finally(i),!0}let c=s.clipboardData?.getData("text/plain");if(A(c)){let p=["http:","https:","mailto:","www."].some(f=>c.startsWith(f)),u=a.state.selection;if(p&&u.from!==u.to&&o){let f=$a({url:c}),h=a.state.tr;return h.addMark(u.from,u.to,_e.marks.link.create({link:f,openInNewTab:Ns(f),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),a.dispatch(h),!0}if(r&&lt.isOn("cmsPasteModules")){let f=Q(c);if(be(f))return so(t,_e,a,f.value).catch(Re),!0;if(os(c))return ql(t,_e,a,c).catch(Re),!0}if(r){if(JD.test(c))return Xl(t,_e,a,i,c).catch(Re),!0;if(jD.test(c))return Kl(t,_e,a,i,c).catch(Re),!0}}return ua(t,a,s,l,d=>{let p=_e.nodes.document.create(void 0),u=new wn(p);u.insert(0,d.content);let f=[];u.doc.descendants((y,C)=>{if(ht(y)){let b=y.attrs.tag,N=n?.has(b)??!0,T=Fn(b)&&N?b:"p";u.setNodeMarkup(C,_e.nodes.textBlock,{...y.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:T})}xn(y)&&f.push({src:y.attrs.src,type:y.attrs.type})}),f.length&&mn(t,_e,a,f,{type:"paste",mediaExtractedFromHTML:!0}).finally(i),u.removeMark(0,u.doc.content.size,_e.marks.inlineStyles),o||u.removeMark(0,u.doc.content.size,_e.marks.link);let h=d.content.child(0).isInline?u.doc.content.child(0).content:u.doc.content;return new Nn(h,d.openStart,d.openEnd)})}}})}var qD=document.createComment(VT),Iu=class{constructor(e){S(this,"domSerializer");S(this,"nodes");S(this,"marks");this.domSerializer=_a.fromSchema(e),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(e,r){return this.domSerializer.serializeNode(e,r)}serializeFragment(e,r){let o=this.domSerializer.serializeFragment(e,r);return o.appendChild(qD),o}};function XD(t,e,r){let o=_e.nodes.document.create(void 0),n=new wn(o);n.insert(0,r.content);let i=t.tree.getNodeWithTrait(e,Xe);g(i,"RichTextNode for pasting not found");let a=KD(t.tree,i);n.doc.descendants((l,c)=>{if(ht(l)){let d=l.attrs,p=A(d.textStylePreset)?t.tree.getNodeWithTrait(d.textStylePreset,$o):void 0,u=Fn(d.tag)?d.tag:"p",f=p??a[u]??i.getNodeTextStylePreset(t.tree,u)??Vs(t.tree,u)??rs.createDefault(u);Ds(t,f),n.setNodeMarkup(c,_e.nodes.textBlock,{...l.attrs,blockStyles:p?l.attrs.blockStyles:{},inlineStyles:p?l.attrs.inlineStyles:{},textStylePreset:f.id}),p||n.removeMark(c,l.nodeSize,_e.marks.inlineStyles)}if(l.type===_e.nodes.text){let d=l.marks.find(Ja);if(d){let p=i.getNodeLinkStylePreset(t.tree)??ks(t.tree)??Rs.createDefault();Ms(t,p),n.addMark(c,c+l.nodeSize,_e.marks.link.create({...d.attrs,linkStylePreset:p.id}))}}});let s=r.content.child(0).isInline?n.doc.content.child(0).content:n.doc.content;return new Nn(s,r.openStart,r.openEnd)}function KD(t,e){let r={};for(let o of e.getTextStylePresets(!1)){let n=t.getNodeWithTrait(o,$o);n&&(r[n.tag]??=n)}return r}function YD(t,e){let r=t.state,o=r.selection;if(o instanceof Vr){let p=r.doc.resolve(1);o=new Yt(p)}let n=_e.nodes.document.create(void 0),i=new wn(n);i.insert(0,e.content);let a=o.$from.parent,s=ht(a),c=o.$from.marks().find(vo);if(c)i.addMark(0,i.doc.content.size,c);else if(s){let p=_e.marks.inlineStyles.create({inlineStyles:a.attrs.inlineStyles});i.addMark(0,i.doc.content.size,p)}else i.removeMark(0,i.doc.content.size,_e.marks.inlineStyles);i.doc.descendants((p,u)=>{if(!ht(p))return;let f=s?a.attrs:p.attrs;i.setNodeMarkup(u,_e.nodes.textBlock,f)});let d=e.content.child(0).isInline?i.doc.content.child(0).content:i.doc.content;return new Nn(d,e.openStart,e.openEnd)}function ene({engine:t,schema:e,nodeId:r,getRichTextNode:o}){return lt.isOn("pasteMarkdown")?kT({engine:t,schema:e,stylePresetGetters:{getStylePresetForTag:n=>{let i=o();if(i)return QD(t.tree,i,n)??i.getNodeTextStylePreset(t.tree,n)??void 0},getStylePresetForLink:()=>o()?.getNodeLinkStylePreset(t.tree)??void 0}}):DT(t,r)}function QD(t,e,r){for(let o of e.getTextStylePresets(!1)){let n=t.getNodeWithTrait(o,$o);if(n&&n.tag===r)return n}}var ZD=["RGB","HSL","HEX","P3"];function rne(t){return ZD.some(e=>e===t)}function ine(t,e){let r=new Set,o=new Set;for(let n of e){if(o.has(n))continue;let i=t.get(n);if(i){if(Ct(i)){r.add(n);continue}for(let a of i.ancestors())if(!o.has(a.id)&&(o.add(a.id),a.cache.reset(),!!Ct(a))){r.add(a.id);break}}}return r}function eP(t){let e=Sc.isP3String(t)?Yu.fromString(t):Sc(t);if(e)return e.r*.299+e.g*.587+e.b*.114+(1-e.a)*255}function cne(t){let e=eP(t);if(H(e))return e>128?"light":"dark"}async function mne(t){return cy.get(`/web/v1/sites/hostnames/${t}`)}var PT=class extends To{};var IP={};nN(IP,{amethyst:()=>rP,aquaBlue:()=>oP,atomDark:()=>nP,atomLight:()=>iP,ayuDark:()=>aP,ayuLight:()=>sP,cmsTheme:()=>tP,cobalt2:()=>lP,cyberpunk:()=>cP,dracula:()=>dP,framerDark:()=>ga,framerLight:()=>uP,freeCodeCamp:()=>pP,githubDark:()=>mP,githubLight:()=>fP,levelUp:()=>hP,magic:()=>yP,monokaiPro:()=>gP,neoCyan:()=>SP,nightOwl:()=>CP,sandpackDark:()=>bP,sandpackLight:()=>vP});var tP={colors:{surface1:$t.cmsCodeBlockSurface1,surface3:$t.cmsCodeBlockSurface3,disabled:$t.cmsCodeBlockDisabled,accent:$t.cmsCodeBlockAccent,errorSurface:$t.cmsCodeBlockErrorSurface},syntax:{plain:$t.cmsCodeBlockPlain,comment:$t.cmsCodeBlockComment,keyword:$t.cmsCodeBlockKeyword,tag:$t.cmsCodeBlockTag,punctuation:$t.cmsCodeBlockPunctuation,definition:$t.cmsCodeBlockDefinition,property:$t.cmsCodeBlockProperty,static:$t.cmsCodeBlockStatic,string:$t.cmsCodeBlockString},font:{mono:sy.family.monospace,lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},rP={colors:{surface1:"#000000",surface3:"#3b3b4f",disabled:"#858591",accent:"#a26cd6",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#a26cdd",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#57d1b7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},oP={colors:{surface1:"#f8f9fb",surface3:"#e4e7eb",disabled:"#C5C5C5",accent:"#2e7692"},syntax:{plain:"#1F2933",comment:"#A7B6C2",keyword:"#1A56DB",tag:"#1A56DB",punctuation:"#394b59",definition:"#A23DAD",property:"#2e7692",static:"#1A56DB",string:"#1992D4"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},nP={colors:{surface1:"#282c34",surface3:"#2c313c",disabled:"#4d4d4d",accent:"#c678dd",errorSurface:"#ffeceb"},syntax:{plain:"#a8b1c2",comment:"#757575",keyword:"#c678dd",tag:"#e06c75",punctuation:"#a8b1c2",definition:"#62aeef",property:"#d19a66",static:"#a8b1c2",string:"#98c379"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},iP={colors:{surface1:"#fafafa"},syntax:{plain:"#383a42",comment:"#a0a1a7",keyword:"#a626a4",tag:"#e45649",punctuation:"#383a42",definition:"#c18401",property:"#4078f2",static:"#986801",string:"#50a14f"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},aP={colors:{surface1:"#0c1017"},syntax:{comment:"#646a72",definition:"#5ac2ff",keyword:"#ff9040",plain:"#bfbdb6",property:"#ffb454",punctuation:"#bfbdb6",static:"#d2a6ff",string:"#80d962",tag:"#3bbae7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},sP={colors:{surface1:"#fafafa"},syntax:{comment:"#aaaeb1",definition:"#3b9ee6",keyword:"#fa8e3e",plain:"#5c6166",property:"#f2ae49",punctuation:"#5c6167",static:"#a37acc",string:"#87b300",tag:"#56b4d5"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},lP={colors:{surface1:"#193549",surface3:"#1f4662",disabled:"#C5C5C5",accent:"#ffc600",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:"#0088ff",keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},cP={colors:{surface1:"#051c30",surface3:"#042f40",disabled:"#C5C5C5",accent:"#fdf500",errorSurface:"#051c30"},syntax:{plain:"#ffffff",comment:"#1ac5b0",keyword:"#fdf500",tag:"#ffc600",punctuation:"#afd7fa",definition:"#ffc600",property:"#fdf500",static:"#e455ae",string:"#37ebf3"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},dP={colors:{surface1:"#282a36",surface3:"#44475a",disabled:"#6272a4",accent:"#bd93f9",errorSurface:"#44475a"},syntax:{plain:"#f8f8f2",comment:"#6272a4",keyword:"#ff79c6",tag:"#ff79c6",punctuation:"#ff79c6",definition:"#f8f8f2",property:"#50fa7b",static:"#bd93f9",string:"#f1fa8c"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ga={colors:{surface1:"#161820",surface3:"#2f2f2f",disabled:"#4d4d4d",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#eeeeee",comment:"#666666",keyword:"#00BBFF",tag:"#00BBFF",punctuation:"#999999",definition:"#ffcc66",property:"#77dddd",static:"#ff8866",string:"#bb88ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},uP={colors:{surface1:"#fafafa",surface3:"#f3f3f3",disabled:"#c5c5c5",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#666666",comment:"#bbbbbb",keyword:"#0099ff",tag:"#0099ff",punctuation:"#bbbbbb",definition:"#FFAA00",property:"#33cccc",static:"#ff8866",string:"#8855ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},pP={colors:{surface1:"#2a2a40",surface3:"#3b3b4f",disabled:"#858591",accent:"#dbb8ff",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#dbb8ff",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#acd157"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},mP={colors:{surface1:"#0d1117",surface3:ga.colors?.surface3,disabled:ga.colors?.disabled,accent:ga.colors?.accent,errorSurface:ga.colors?.errorSurface},syntax:{comment:"#8b949e",definition:"#d2a8ff",keyword:"#ff7b72",plain:"#e6edf3",property:"#79c0ff",punctuation:"#e6edf3",static:"#7ee787",string:"#a5d6ff",tag:"#7ee787"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},fP={colors:{surface1:"#ffffff",surface3:"#f5f5f5",disabled:"#d1d4d8",accent:"#24292e"},syntax:{keyword:"#d73a49",property:"#005cc5",plain:"#24292e",static:"#032f62",string:"#032f62",definition:"#6f42c1",punctuation:"#24292e",tag:"#22863a",comment:"#6a737d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"normal",property:"normal",keyword:"normal"}},hP={colors:{surface1:"#191324",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},gP={colors:{surface1:"#2D2A2E",surface3:"#484747",disabled:"#444344",accent:"#FFD866",errorSurface:"#c24038"},syntax:{plain:"rgb(252, 252, 250)",comment:"#757575",keyword:"rgb(255, 97, 136)",tag:"rgb(120, 220, 232)",punctuation:"rgb(147, 146, 147)",definition:"rgb(169, 220, 118)",property:"rgb(120, 220, 232)",static:"rgb(171, 157, 242)",string:"rgb(255, 216, 102)"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"normal"}},yP={colors:{surface1:"#f6f6f8",surface3:"#f6f6f8",disabled:"#C5C5C5",accent:"#ffa600",errorSurface:"#ffeceb"},syntax:{plain:"#151515",comment:"#cacacd",keyword:"#ffa600",tag:"#ff9a4d",punctuation:"#ffb3b3",definition:"#ff6f00",property:"#9900ff",static:"#FF453A",string:"#f53524"},font:{mono:'"Roboto Mono", monospace',lineHeight:"24px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},SP={colors:{surface1:"#2b3935",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},CP={colors:{surface1:"#011627",surface3:"#112331",disabled:"#4D4D4D",accent:"#c5e4fd",errorSurface:"#811e18"},syntax:{plain:"#d6deeb",comment:"#999999",keyword:"#c792ea",tag:"#7fdbca",punctuation:"#7fdbca",definition:"#82aaff",property:"#addb67",static:"#f78c6c",string:"#ecc48d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"italic"}},bP={colors:{surface1:"#151515",surface3:"#2F2F2F",disabled:"#4D4D4D",accent:"#90e86f",errorSurface:"#b08df8"},syntax:{plain:"#f0fdaf",comment:"#757575",keyword:"#e5fd78",tag:"#f0fdaf",punctuation:"#ffffff",definition:"#eeeeee",property:"#90e86f",static:"#ffffff",string:"#dafecf"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},vP={colors:{surface1:"#ffffff",surface3:"#F3F3F3",disabled:"#C5C5C5",accent:"#3973E0",errorSurface:"#FCF1F0"},syntax:{plain:"#151515",comment:"#999",keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}};var Tu=t=>{let e=5381;for(let r=0;r<t.length;r++)e=(e<<5)+e+t.charCodeAt(r);return e&65535};function ya(t){return typeof t=="object"&&t!==null}function TP(t,e){if(t.length!==e.length)return!1;let r=t.length;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}var Sa=class{constructor(){S(this,"cache",new Map)}set(e,r,o){let n=this.cache.get(e);n||(n=new Map,this.cache.set(e,n)),n.set(r,o)}getSubMap(e){return this.cache.get(e)}get(e,r){return this.cache.get(e)?.get(r)}clear(){this.cache.clear()}};var mi=class{constructor(e=10485760){S(this,"buffer");S(this,"count",0);S(this,"capacity");this.capacity=e,this.buffer=new Float64Array(e)}add(e){let r=this.count;if(r===this.capacity){this.capacity*=2;let o=new Float64Array(this.capacity);o.set(this.buffer),this.buffer=o}return this.buffer[r]=e,this.count=r+1,r}get(e){return e<this.count?this.buffer[e]:void 0}slice(e,r){return Array.from(this.buffer.subarray(e,r))}get length(){return this.count}toState(){return this.buffer.subarray(0,this.count)}fromState(e){this.buffer=new Float64Array(e),this.count=this.buffer.length,this.capacity=this.buffer.length}};var fn=class{constructor(e=1024){S(this,"uniques",[]);S(this,"indices");S(this,"count",0);S(this,"lookup");S(this,"cursor",0);this.indices=new Uint32Array(e)}ensureCapacity(e){if(e<=this.indices.length)return;let r=this.indices.length||1;for(;r<e;)r<<=1;let o=new Uint32Array(r);o.set(this.indices),this.indices=o}hydrateThrough(e){for(this.lookup||(this.lookup=new Map);this.cursor<=e;++this.cursor){let r=this.uniques[this.cursor];this.lookup.set(r,this.cursor)}}indexOfExisting(e){if(this.lookup?.has(e))return this.lookup.get(e);for(;this.cursor<this.uniques.length;++this.cursor){let r=this.uniques[this.cursor];if(this.lookup??=new Map,this.lookup.set(r,this.cursor),Object.is(r,e))return this.cursor}}add(e){let r=this.indexOfExisting(e);r===void 0&&(r=this.uniques.length,this.uniques.push(e),this.lookup??=new Map,this.lookup.set(e,r),this.cursor=this.uniques.length);let o=this.count;return this.ensureCapacity(o+1),this.indices[o]=r,this.count=o+1,o}get(e){if(e<0||e>=this.count)throw RangeError("index out of bounds");return this.uniques[this.indices[e]]}slice(e,r){let o=Math.max(0,r-e),n=new Array(o);for(let i=0;i<o;++i)n[i]=this.uniques[this.indices[e+i]];return n}get length(){return this.count}toState(){return[JSON.stringify(this.uniques),this.indices.subarray(0,this.count)]}fromState(e){let[r,o]=e;this.uniques=JSON.parse(r),this.indices=new Uint32Array(o),this.count=this.indices.length,this.lookup=void 0,this.cursor=this.uniques.length}rehydrate(){this.cursor<this.uniques.length&&this.hydrateThrough(this.uniques.length-1)}};function FT(t){switch(typeof t){case"string":return 1;case"number":return t===0?Object.is(t,-0)?15:14:2;case"boolean":return 3;case"undefined":return 4;case"object":return t===null?5:t instanceof Uint8Array?8:t instanceof Uint16Array?9:t instanceof Uint32Array?10:t instanceof Float32Array?12:t instanceof Float64Array?13:t instanceof BigUint64Array?11:Array.isArray(t)?6:7;default:throw Error(`Unknown type: ${t}`)}}var ic=class{constructor(e){S(this,"buffer");S(this,"view");S(this,"offset");this.buffer=e??new Uint8Array(1024*1024),this.view=new DataView(this.buffer.buffer),this.offset=0}ensureCapacity(e){let r=this.offset+e;if(r>this.buffer.length){let o=this.buffer.length*2;for(;o<r;)o*=2;let n=new Uint8Array(o);n.set(this.buffer),this.buffer=n,this.view=new DataView(this.buffer.buffer)}}align(e){let r=this.offset+e-1&~(e-1);this.ensureCapacity(r-this.offset),this.offset=r}write(e){let r=FT(e);switch(this.writeType(r),r){case 1:this.writeString(e);break;case 2:this.writeNumber(e);break;case 16:this.writeVarInt(e);break;case 17:this.writeVarUint(e);break;case 14:this.writeZero();break;case 15:this.writeZeroNegative();break;case 3:this.writeBoolean(e);break;case 4:this.writeUndefined();break;case 5:this.writeNull();break;case 6:this.writeArray(e);break;case 7:this.writeObject(e);break;case 8:this.writeUint8Array(e);break;case 9:this.writeUint16Array(e);break;case 10:this.writeUint32Array(e);break;case 12:this.writeFloat32Array(e);break;case 13:this.writeFloat64Array(e);break;case 11:this.writeBigUint64Array(e);break;default:throw Error(`Unknown type: ${r}`)}}writeUint8(e){return this.ensureCapacity(1),this.view.setUint8(this.offset,e),this.offset+=1,1}writeUint16(e){this.ensureCapacity(2),this.view.setUint16(this.offset,e,!0),this.offset+=2}writeUint32(e){this.ensureCapacity(4),this.view.setUint32(this.offset,e,!0),this.offset+=4}writeFloat32(e){this.ensureCapacity(4),this.view.setFloat32(this.offset,e,!0),this.offset+=4}writeFloat64(e){this.ensureCapacity(8),this.view.setFloat64(this.offset,e,!0),this.offset+=8}writeVarInt(e){let r=e>=0?e*2:-e*2-1;this.writeVarUint(r)}writeVarUint(e){let r=e;for(;r>=128;)this.writeUint8(r%128|128),r=Math.floor(r/128);this.writeUint8(r)}writeType(e){this.writeUint8(e)}writeString(e){let r=xP(e);this.writeVarUint(r.length),this.ensureCapacity(r.length),this.buffer.set(r,this.offset),this.offset+=r.length}writeNumber(e){this.writeFloat64(e)}writeBoolean(e){this.writeUint8(e?1:0)}writeUndefined(){}writeNull(){}writeZero(){}writeZeroNegative(){}writeArray(e){this.writeVarUint(e.length);for(let r of e)this.write(r)}writeObject(e){let r=Object.keys(e);this.writeVarUint(r.length);for(let o of r)this.writeString(o),this.write(e[o])}writeTypedArrayGeneric(e,r){this.writeVarUint(e.length),this.align(r);let o=e.length*r;this.ensureCapacity(o);let n=new Uint8Array(e.buffer,e.byteOffset,o);this.buffer.set(n,this.offset),this.offset+=o}writeUint8Array(e){this.writeTypedArrayGeneric(e,Uint8Array.BYTES_PER_ELEMENT)}writeUint16Array(e){this.writeTypedArrayGeneric(e,Uint16Array.BYTES_PER_ELEMENT)}writeUint32Array(e){this.writeTypedArrayGeneric(e,Uint32Array.BYTES_PER_ELEMENT)}writeFloat32Array(e){this.writeTypedArrayGeneric(e,Float32Array.BYTES_PER_ELEMENT)}writeFloat64Array(e){this.writeTypedArrayGeneric(e,Float64Array.BYTES_PER_ELEMENT)}writeBigUint64Array(e){this.writeTypedArrayGeneric(e,BigUint64Array.BYTES_PER_ELEMENT)}getBuffer(){return this.buffer.slice(0,this.offset)}},ac=class{constructor(e){S(this,"buffer");S(this,"view");S(this,"offset");if(!(e instanceof Uint8Array))throw new Error(`Buffer is not a Uint8Array: ${e}`);this.buffer=e,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.offset=0}align(e){let r=(e-this.offset%e)%e;this.offset+=r}read(){let e=this.readType();switch(e){case 1:return this.readString();case 2:return this.readNumber();case 16:return this.readVarInt();case 17:return this.readVarUint();case 14:return 0;case 15:return-0;case 3:return this.readBoolean();case 4:return this.readUndefined();case 5:return this.readNull();case 6:return this.readArray();case 7:return this.readObject();case 8:return this.readUint8Array();case 9:return this.readUint16Array();case 10:return this.readUint32Array();case 12:return this.readFloat32Array();case 13:return this.readFloat64Array();case 11:return this.readBigUint64Array();default:throw Error(`Unknown type: ${e}`)}}readUint8(){let e=this.view.getUint8(this.offset);return this.offset+=1,e}readUint16(){let e=this.view.getUint16(this.offset,!0);return this.offset+=2,e}readUint32(){let e=this.view.getUint32(this.offset,!0);return this.offset+=4,e}readFloat32(){let e=this.view.getFloat32(this.offset,!0);return this.offset+=4,e}readFloat64(){let e=this.view.getFloat64(this.offset,!0);return this.offset+=8,e}readVarInt(){let e=this.readVarUint();return e%2===0?e/2:-Math.floor(e/2)-1}readVarUint(){let e=0,r=0;for(;;){let o=this.readUint8();if(e+=(o&127)*2**r,(o&128)===0)break;if(r+=7,r>53)throw new Error("VarUint is too big")}return e}readType(){return this.readUint8()}readString(){let e=this.readVarUint(),r=this.buffer.subarray(this.offset,this.offset+e);return this.offset+=e,RP(r)}readNumber(){return this.readFloat64()}readBoolean(){return this.readUint8()===1}readUndefined(){}readNull(){return null}readArray(){let e=this.readVarUint(),r=new Array(e);for(let o=0;o<e;o++)r[o]=this.read();return r}readObject(){let e=this.readVarUint(),r={};for(let o=0;o<e;o++){let n=this.readString();r[n]=this.read()}return r}readTypedArray(e){let r=this.readVarUint(),o=e.BYTES_PER_ELEMENT;this.align(o);let n=this.offset+this.buffer.byteOffset,i=r*o;if(n%o!==0){let a=new ArrayBuffer(i);return new Uint8Array(a).set(new Uint8Array(this.buffer.buffer,n,i)),this.offset+=i,new e(a,0,r)}return this.offset+=i,new e(this.buffer.buffer,n,r)}readUint8Array(){return this.readTypedArray(Uint8Array)}readUint16Array(){return this.readTypedArray(Uint16Array)}readUint32Array(){return this.readTypedArray(Uint32Array)}readFloat32Array(){return this.readTypedArray(Float32Array)}readFloat64Array(){return this.readTypedArray(Float64Array)}readBigUint64Array(){return this.readTypedArray(BigUint64Array)}},NP=new TextEncoder,wP=new TextDecoder;function xP(t){return NP.encode(t)}function RP(t){return wP.decode(t)}function Nu(t){let e=new ic;return e.write(t),e.getBuffer()}function wu(t){return new ac(t).read()}var fi=class{constructor(){S(this,"columns",{client:new mi,seq:new mi,id:new fn,key:new fn,value:new fn})}getRowInternal(e){return{client:this.columns.client.get(e),seq:this.columns.seq.get(e),id:this.columns.id.get(e),key:this.columns.key.get(e),value:this.columns.value.get(e)}}getRow(e){if(e<0||e>=this.columns.client.length)throw new Error("Index out of bounds");return this.getRowInternal(e)}getRows(e=0,r=this.columns.client.length){if(e<0||r>this.columns.client.length||e>r)throw new Error("Index out of bounds");let o=new Array(r-e);for(let n=e;n<r;n++)o[n-e]=this.getRowInternal(n);return o}toBuffer(){return Nu([this.columns.client.toState(),this.columns.seq.toState(),this.columns.id.toState(),this.columns.key.toState(),this.columns.value.toState()])}fromBuffer(e){let[r,o,n,i,a]=wu(e);this.columns.client.fromState(r),this.columns.seq.fromState(o),this.columns.id.fromState(n),this.columns.key.fromState(i),this.columns.value.fromState(a)}get length(){return this.columns.client.length}};function xu(t,e){let r=[],o=Math.min(t.length,e.length);for(let n=0;n<o;++n)t[n]!==e[n]&&r.push({operation:"replace",value:e[n],index:n});for(let n=o;n<t.length;++n)r.push({operation:"delete",value:t[n],index:n});for(let n=o;n<e.length;++n)r.push({operation:"insert",value:e[n],index:n});return r}function Ru(t,e,r,o,n,i){let a=e-t;if(a<1e-8)return t+a/2;let s;if(o!==null&&o===r&&n!==null){let c=i-n;s=Math.min(.01*c,.5)}else s=.01+((r^i)>>>0)%100/100*.98;let l=t+a*s;return l<=t||l>=e?t+a/2:l}var ET=new ArrayBuffer(8),kP=new Float64Array(ET),AT=new Uint32Array(ET),MP=t=>(kP[0]=t,[AT[0]>>>0,AT[1]>>>0]),LT=(t,e)=>t<<e|t>>>32-e,lc=(t,e)=>{let r=Math.imul(e,3432918353);r=LT(r,15),r=Math.imul(r,461845907);let o=t^r;return o=LT(o,13),Math.imul(o,5)+3864292196>>>0},ku=t=>{let e=t;return e^=e>>>16,e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),(e^e>>>16)>>>0},sc=t=>{let e=0,r=0;for(;r+1<t.length;r+=2){let o=t.charCodeAt(r)|t.charCodeAt(r+1)<<16;e=lc(e,o)}return r<t.length&&(e=lc(e,t.charCodeAt(r))),ku(e^t.length)},VP=2097151,DP=t=>{let e=2654435769,r=2135587861,o=i=>{e=lc(e,i),r=lc(r,i^2915580697)},n=i=>{switch(typeof i){case"string":o(sc(i));break;case"number":{let[a,s]=MP(i);o(a),o(s)}break;case"boolean":o(i?1:0);break;case"undefined":o(2);break;case"symbol":o(sc(i.description??""));break;case"bigint":o(Number(i&0xffffffffn)),o(Number(i>>32n&0xffffffffn));break;case"function":o(sc(i.toString()));break;case"object":{if(i===null){o(7);break}if(Array.isArray(i)){let s=i.length;if(o(165),o(s),s>32){for(let c=0;c<8;++c)n(i[c]);for(let c=s-8;c<s;++c)n(i[c]);let l=(s-16)/16|0;for(let c=8;c<s-8;c+=l)n(i[c])}else for(let l=0;l<s;++l)n(i[l]);break}o(195);let a=0;for(let s in i){if(++a>32)break;o(sc(s)),n(i[s])}o(a);break}default:o(13)}};return n(t),e=ku(e),r=ku(r),(e&VP)*4294967296+r},Mu=DP;var mr="$deleted",hn="$keep",cc="$keep_value";function PP(t,e,r,o){return t===r?e>o:t>r}function FP(t,e){return t.seq===e.seq?t.client-e.client:t.seq-e.seq}function OT(t){if(typeof t=="string"&&t.startsWith("arr("))return t.slice(4,-1)}function dc(t){if(typeof t=="string"&&t.startsWith("obj("))return t.slice(4,-1)}function BT(t){return`arr(${t})`}function zT(t){return`obj(${t})`}var Vu=class t{constructor(e){S(this,"seq",0);S(this,"client");S(this,"table",new fi);S(this,"latest",new Sa);S(this,"resolved",new Map);S(this,"arraySortedIndicesCache",new Map);S(this,"parentIdOverrides",new Map);S(this,"parentIdHistoryByNodeId",new Map);S(this,"getIdFromObject");S(this,"readTransactionLevel",0);S(this,"foundIds",new Set);S(this,"transactionSeq");S(this,"transactionHadChanges",!1);this.client=Tu(e),this.reset()}reset(){this.latest.clear(),this.resolved.clear(),this.seq=0,this.table=new fi,this.arraySortedIndicesCache.clear()}fromBuffer(e){this.table.fromBuffer(e),this.indexRowsOptimized(),this.fixHierarchy()}toBuffer(){return this.table.toBuffer()}getRows(){return this.table.getRows().sort(FP)}indexRowsOptimized(){let{client:e,id:r,key:o,seq:n,value:i}=this.table.columns;for(let a=this.length-1;a>=0;a--)this.updateRowIndex(a,n.get(a),r.get(a),o.get(a),i.get(a),e.get(a))}clone(e){let r=new t(e);return r.fromBuffer(this.toBuffer()),r.indexRowsOptimized(),r.getIdFromObject=this.getIdFromObject,r}createUniqueKeyFromRow(e){return`${e.client}/${e.seq}/${e.id}/${e.key}`}merge(e){return this.mergeRows(e.table.getRows())}mergeRows(e){let r=new Set(this.table.getRows().map(n=>this.createUniqueKeyFromRow(n))),o=1/0;for(let n of e){let i=this.createUniqueKeyFromRow(n);r.has(i)||(r.add(i),this.addRowData(n.id,n.key,n.value,n.client,n.seq),o=Math.min(o,n.seq))}return this.resolved.clear(),this.arraySortedIndicesCache.clear(),this.fixHierarchy(o),o}addRow(e){this.addRowData(e.id,e.key,e.value,e.client,e.seq)}addRows(e){let r=this.seq;for(let o of e)o.seq<r&&(r=o.seq),this.addRow(o);return r}updateKeyValue(e,r,o){if(this.transactionSeq===void 0)throw new Error("Not in a current transaction");this.addRowData(e,r,o,this.client,this.transactionSeq)}addRowData(e,r,o,n,i){let a=this.table.columns.client.length;if(this.shouldAddRow(e,r,o)){let s=this.table.columns;s.client.add(n),s.seq.add(i),s.id.add(e),s.key.add(r),s.value.add(o),this.transactionHadChanges=!0,this.updateRowIndex(a,i,e,r,o,n)}}shouldAddRow(e,r,o){let n=this.latest.get(e,r);return n!==void 0?this.table.columns.value.get(n)!==o:!0}updateRowIndex(e,r,o,n,i,a){r>=this.seq&&(this.seq=r+1);let s=this.latest.get(o,n),l=this.table.columns;if((s===void 0||PP(r,a,l.seq.get(s),l.client.get(s)))&&this.latest.set(o,n,e),this.resolved.delete(o),this.arraySortedIndicesCache.delete(o),n==="parentid"){let c=this.parentIdHistoryByNodeId.get(o);c||(c=[],this.parentIdHistoryByNodeId.set(o,c)),c.push(e)}}getPrevParentId(e,r,o){let n,i=this.parentIdHistoryByNodeId.get(e);if(!i?.length)return n;let a=this.table.columns;for(let s of i){let l=a.seq.get(s);if(l>r||!o&&l===r)continue;let c=a.client.get(s);(!n||l>n.seq||l===n.seq&&c>n.client)&&(n={seq:l,client:c,value:a.value.get(s)})}return n}isAncestorOf(e,r,o,n=new Set){if(e===r)return!0;if(!e||e==="$deleted"||n.has(e))return!1;n.add(e);let i=this.getPrevParentId(e,o,!0);if(!i)return!1;let a=this.parentIdOverrides.get(e)?.get(i.seq)??i.value;return this.isAncestorOf(a,r,o,n)}fixHierarchy(e=0){this.parentIdHistoryByNodeId=new Map([...this.parentIdHistoryByNodeId.entries()].sort((o,n)=>o[0].localeCompare(n[0])));for(let[o,n]of this.parentIdOverrides)for(let[i,a]of n)i>=e&&n.delete(i);let r=this.table.columns;for(let[o,n]of this.parentIdHistoryByNodeId)for(let i of n){let a=r.seq.get(i);if(a<e)continue;let s=r.value.get(i);if(this.isAncestorOf(s,o,a)){let l=this.parentIdOverrides.get(o);l||(l=new Map,this.parentIdOverrides.set(o,l));let c=this.getPrevParentId(o,a,!1);l.set(a,c?c.value:mr)}}}getParentId(e){let r=this.latest.get(e,"parentid");if(!r)return;let o=this.table.columns.seq.get(r);return this.parentIdOverrides.get(e)?.get(o)??this.table.columns.value.get(r)}getChildrenIds(e){let r=this.getObjectKey(e,"children");if(!Array.isArray(r))return;let o=r.map(n=>n.id).filter(n=>this.getParentId(n)===e);if(o){let n=Array.from(this.parentIdOverrides.keys()).sort((i,a)=>i.localeCompare(a));for(let i of n)this.getParentId(i)===e&&!o.includes(i)&&o.push(i)}return Array.from(new Set(o))}_getIdFromObject(e){return this.getIdFromObject?.(e)}createReferenceId(e,r,o,n,i){if(r===0)return`${o}.${n}`;if(r===1)return`${o}.${i??Mu(e)}`;$(r)}getOrCreateReferenceFromValue(e,r,o,n){if(Array.isArray(e)){let i=this.createReferenceId(e,r,o,n,void 0);return this.setArray(i,e,o),BT(i)}if(ya(e)){let i=typeof e.id=="string"?e.id:void 0,a=this._getIdFromObject(e)??this.createReferenceId(e,r,o,n,i);return this.setObject(a,e),zT(a)}return e}getReferenceValue(e,r,o,n){let i=OT(e);if(i)return this.getArray(i,!0,o,n);let a=dc(e);return a?this.getObjectInner(a,!0,r,o,n):e}getCurrentValue(e,r){let o=this.latest.get(e,r);if(o!==void 0)return this.table.columns.value.get(o)}getCurrentSeq(e,r){let o=this.latest.get(e,r);if(o!==void 0)return this.table.columns.seq.get(o)}validateObjectUpdate(e,r){if(!ya(r))throw new Error("Store.setObject: object is not an object");let o=this._getIdFromObject(r);if(o&&o!==e)throw new Error(`Store.getIdFromObject mismatch: ${o} !== ${e}: The id that we got to update the object is not equal to the result of getIdFromObject. See Store.update.test.ts`);return e}deleteRemovedKeys(e,r){let o=this.latest.getSubMap(e);if(o)for(let[n]of o)n!==hn&&(n in r||this.setObjectKey(e,n,mr))}tryReuseExistingReference(e,r){let o=OT(e);if(Array.isArray(r)&&o)return this.setArray(o,r),!0;let n=dc(e);return ya(r)&&n?(this.setObject(n,r),!0):!1}setObject(e,r,o){return this.transaction(()=>{let n=this.validateObjectUpdate(e,r);if(this.deleteRemovedKeys(n,r),Object.keys(r).length===0){this.setObjectKey(n,hn,cc);return}for(let i in r)this.setObjectKey(n,i,r[i])},o)}setObjectKey(e,r,o,n){return this.transaction(()=>{let i=this.getCurrentValue(e,r);if(this.tryReuseExistingReference(i,o))return i;let a=this.getOrCreateReferenceFromValue(o,0,e,r);return i===a||this.updateKeyValue(e,r,a),i},n)}deleteObjectKey(e,r,o){this.transaction(()=>{this.getCurrentValue(e,r)!==void 0&&this.updateKeyValue(e,r,mr)},o)}setObjectKeyPath(e,r,o,n){this.transaction(()=>{if(!r[0])return;let i=e;for(let s=0;s<r.length-1;++s){let l=r[s],c=this.getRawObjectData(i);if(!c)throw new Error("Object not found");let d=c[l];d||(this.setObjectKey(i,l,{}),d=this.getCurrentValue(i,l));let p=dc(d);if(!p){let u=r.slice(0,s+1);throw new Error(`${u} is not an object`)}i=p}let a=r[r.length-1];this.setObjectKey(i,a,o)},n)}getObjectKey(e,r){if(this.getCurrentValue(e,hn)!==mr)return this.getReferenceValue(this.getCurrentValue(e,r),!0,1/0,0)}getRawObjectData(e){return this.getObjectInner(e,!1,!0)}getObject(e){return this.getObjectInner(e,!0,!0)}getObjectWithShallowChildren(e,r){return this.getObjectInner(e,!0,!0,r,0)}getObjectInner(e,r,o,n=1/0,i=0){this.readTransactionLevel++;let a=()=>{this.readTransactionLevel--,this.foundIds.delete(e)};if(this.foundIds.has(e)){a();return}if(this.foundIds.add(e),!o&&this.resolved.has(e))return a(),this.resolved.get(e);let s=this.latest.getSubMap(e);if(!s){a();return}let l={};o||this.resolved.set(e,l);let c=this.table.columns;if(this.getCurrentValue(e,hn)===mr){a();return}for(let[d,p]of s){if(d===hn||p===void 0)continue;let u=c.value.get(p);u!==mr&&(d==="children"&&i>=n||(l[d]=r?this.getReferenceValue(u,o,n,i+1):u))}return a(),this.readTransactionLevel===0&&this.foundIds.clear(),l}populateNodeMap(e,r){let o=this.table.columns,n=i=>{let a=this.latest.getSubMap(i);if(!a)return;let s=a.get("__class"),l=a.get("id");if(l===void 0||s===void 0)return;let c=o.value.get(l);if(!c)return;let d={};d.parentid=this.getParentId(i);let p=this.getChildrenIds(i);if(p){d.children=p;for(let u of p)n(u)}for(let[u,f]of a){if(u===hn||f===void 0)continue;let h=o.value.get(f);h!==mr&&u!=="children"&&u!=="parentid"&&(d[u]=this.getReferenceValue(h,!0,1/0,0))}e.set(c,d)};n(r)}resolveHierarchy(e,r){let o=n=>{let i=e.get(n);if(!i)return;let a=i;if(Array.isArray(a.children)){let s=[];for(let l of a.children)if(typeof l=="string"){let c=o(l);c&&s.push(c)}a.children=s}return a};return o(r)}getNode(e){let r=new Map;return this.populateNodeMap(r,e),this.resolveHierarchy(r,e)}applyArrayEdits(e,r){let o=0;for(let n of r)switch(n.operation){case"delete":this.arrayRemove(e,n.index+o,1),o--;break;case"insert":this.arrayInsert(e,n.index+o,n.value),o++;break;case"replace":this.arrayReplace(e,n.index+o,n.value);break}}setArray(e,r,o,n){this.transaction(()=>{let i=this.getArray(e,!1);i||(this.updateKeyValue(e,.5,cc),i=[]);let a=r.map(l=>this.getOrCreateReferenceFromValue(l,1,e,void 0)),s=xu(i,a);this.applyArrayEdits(e,s)},n)}getArraySortedIndicesCached(e){let r=this.arraySortedIndicesCache.get(e);if(r)return r;let o=this.latest.getSubMap(e);if(!o)return[];let n=this.table.columns,i=Array.from(o.values()).sort((a,s)=>n.key.get(a)-n.key.get(s)).filter(a=>{let s=n.value.get(a);return s!==mr&&s!==cc});return this.arraySortedIndicesCache.set(e,i),i}getArray(e,r=!0,o=1/0,n=0){if(!this.latest.getSubMap(e))return;let a=this.getArraySortedIndicesCached(e),s=[],l=this.table.columns;for(let c of a){let d=l.value.get(c);d===cc||d===mr||s.push(r?this.getReferenceValue(d,!0,o,n+1):d)}return s}arrayReplace(e,r,o){return this.transaction(()=>{this.arraySplice(e,r,1,o)})}arraySplice(e,r,o,...n){return this.transaction(()=>{if(!this.latest.getSubMap(e))return;let a=this.getArraySortedIndicesCached(e),s=a.length,l=r<0?Math.max(s+r,0):Math.min(r,s),c=o===void 0?s-l:Math.min(o,s-l),d=this.table.columns,p=[];for(let T of a.slice(l,l+c))p.push(d.value.get(T)),this.updateKeyValue(e,d.key.get(T),mr);let u=l>0?a[l-1]:void 0,f=u!==void 0?d.key.get(u):0,h=a[l],y=h!==void 0?d.key.get(h):f+1,C=f,b=u!==void 0?d.client.get(u):null,N=u!==void 0?d.seq.get(u):null;for(let T of n){let w=b===this.client&&N!==null?N+1:1,V=Ru(C,y,this.client,b,N,w);this.updateKeyValue(e,V,this.getOrCreateReferenceFromValue(T,1,e,void 0)),C=V,b=this.client,N=w}return p})}arrayInsert(e,r,...o){return this.arraySplice(e,r,0,...o)}arrayRemove(e,r,o=1){return this.arraySplice(e,r,o)}get length(){return this.table.columns.client.length}compact(e){let r=new t(e??`${this.client}`);r.getIdFromObject=this.getIdFromObject;let o=new Set,n=this.table.columns;for(let i=0;i<this.length;i++)o.add(n.id.get(i));for(let i of o){let a=this.latest.getSubMap(i);if(a)for(let[s,l]of a){if(l===void 0)continue;let c=n.value.get(l),d=n.client.get(l),p=n.seq.get(l);c!==mr&&r.addRowData(i,s,c,d,p)}}return r}transaction(e,r){if(this.transactionSeq!==void 0)return e();this.transactionSeq=r??this.seq;let o=e();return this.transactionHadChanges&&(this.seq=Math.max(this.seq,this.transactionSeq+1),this.transactionHadChanges=!1),this.transactionSeq=void 0,o}};async function oie(t){let e=ad.on(zu).expect();return new Promise(r=>{Vi(t)&&t.stores.canvasStore.setColorSamplerActive(!0),t.scheduler.runBeforeNextFrame(async()=>{let{color:o}=await e.sampleColor();t.scheduler.process(()=>{Vi(t)&&t.stores.canvasStore.setColorSamplerActive(!1),r(o)})})})}function $T(){return yy.isOn("disableSecureCanvas")}var AP,LP,EP=new Promise((t,e)=>{AP=t,LP=e});function uie(t){if(Vi(t)){if(t.canvasSandbox?.sandbox.controlsVisibility)return Promise.resolve(t.canvasSandbox.sandbox.controlsVisibility);if($T())return Promise.resolve(new Wy(t))}return hy(t)?t.stores.sandboxStore.getControlsVisibility():EP}function Nie(t,e,r){return Xm(r)?$P(t,e,r):Km(r)?zP(t,e,r):qm(r)?UP(t,e,r):null}function OP(t,e){return We(e*Math.sin(yc(t)),e*Math.cos(yc(t))*-1)}function BP(t,e){if(t.type==="conic"){let{angle:r,radius:o}=t;return e.map(n=>{let i=r+n.position*360;return OP(i,o)})}return e.map(r=>yt.pointAtPercentDistance(t.axis,r.position))}function zP(t,e,r){let o=t.getRect(e),n=r.centerAnchorX*o.width,i=r.centerAnchorY*o.height,a=r.widthFactor*o.width,s=r.heightFactor*o.height,l=a*2,c=s*2,d=a+n,p=i-s,u={width:l,height:c},f=t.convertPointToCanvas(e,{x:n,y:i}),h=t.convertPointToCanvas(e,{x:d,y:i}),y=t.convertPointToCanvas(e,{x:n,y:p}),{rotation:C}=t.convertRectToCanvasWithRotation(e),b=yt(f,h);return{type:"radial",start:f,end:h,center:yt.pointAtPercentDistance(b,0),axis:b,rotation:C,size:u,topCenter:y}}function $P(t,e,r){let o=t.getRect(e),n={x:o.width/2,y:o.height/2},i=t.convertPointToCanvas(e,n),a=r.angle*Math.PI/180,s={x:-Math.sin(a)*100,y:Math.cos(a)*100},l=t.convertPointToCanvas(e,We.add(n,s)),c=yt(i,l),d=uc(r.angle),p=et.pointsAtOrigin(o),u=Math.floor(d/90)+3,f=p[u%4],h=t.convertPointToCanvas(e,f),y=p[(u+2)%4],C=t.convertPointToCanvas(e,y),b=yt.perpendicular(c,h),N=yt.intersection(b,c);if(!N)return null;let T=We.subtract(i,N),w=We.add(N,T,T),V=p[(u+1)%4],L=t.convertPointToCanvas(e,V),F=yt.perpendicular(b,L),_=yt.perpendicular(c,i),z=yt.intersection(F,_);if(!z)return null;let Z={width:We.distance(z,i)*2,height:We.distance(N,w)};return{type:"linear",start:N,end:w,center:i,axis:yt(N,w),startCorner:h,endCorner:C,size:Z}}function UP(t,e,r){let o=t.getRect(e),n=t.convertPointToCanvas(e,{x:o.width/2*r.centerAnchorX/.5,y:o.height/2*r.centerAnchorY/.5}),[i,a]=et.midPoints(o),s=et.center(o),l=We.distance(s,i),c=We.distance(s,a),d=Math.min(l,c),p=t.totalAncestorRotation(e),u=uc(p+r.angle);return{type:"conic",start:We(s.x,s.y-d),center:n,rotation:0,radius:d,angle:u}}var wie=(t,e,r,o)=>{let n=BP(t,e),i=n[0],a=n[n.length-1];if(i.x===a.x&&i.y===a.y&&We.distance(r,i)<o)return!0;let s=yt(i,a),l=yt.perpendicular(s,r),c=yt.intersection(s,l);if(t.type==="radial"&&We.distance(r,t.topCenter)<o)return!0;if(t.type==="conic")return We.distance(r,t.center)<=t.radius+40;if(!c)return!1;let d=We.distance(r,c),p=We.distance(r,i),u=We.distance(r,a),f=We.distance(i,a);return p>f&&u<p?Math.max(u,d)<o:u>f&&p<u?Math.max(p,d)<o:d<o};function WP(t,e){let r=t.reduce((a,s)=>Math.abs(a.position-e)<Math.abs(s.position-e)?a:s),o=t.findIndex(a=>a===r),n=r.position-e>0?o-1:o+1,i=t[n]??r;return[r,i]}function xie(t,e,r,o){let[n,i]=WP(e,r),a=Na([n.position,i.position],[0,1])(r),s=Du(t,n,o),l=Du(t,i,o);return Na([0,1],[s,l])(a)}function Du(t,e,r){let o=e.value;if(!Wa(o))return o;let n=_p(o),i=n?py(n,t):null;return i&&mp(i)?i.colorForMode(r):jp(o)||"transparent"}function Rie(t,e,r){return e.map(o=>o.merge({value:Du(t,o,r)}))}function kie(t,e){let r=yt(e,t.center),o=t.center.x,n=t.center.y-t.radius,i=yt(We(o,n),t.center),a=yt.intersectionAngle(i,r),l=uc(a)-t.angle,c=uc(l);return Math.abs(c/360)}function uc(t){if(t===360)return t;let e=t%360;return e<0?360+e:e}function Mie(t){return t.sort((e,r)=>e.position-r.position)}function Vie(t){let e=!1,r=Na([t.stops[0]?.position??0,t.stops[t.stops.length-1]?.position??1],[0,1]),o=t.stops.map(n=>((n.position<0||n.position>1)&&(e=!0),n.merge({position:r(n.position)})));return e?o:void 0}var UT="--top-flash-inset",WT="--right-flash-inset",HT="--bottom-flash-inset",GT="--left-flash-inset",_T="--flash-radius",Pu="flash_fh6lfgu",Fu="defaultStyle_d8eehx6",jT="warningStyle_wdvaq7i",JT="glowStyle_ghqxg7a";var ba=2;function qT(t="default"){switch(t){case"glow":return[JT];case"default":return[Fu];case"warning":return[Fu,jT]}}function Ca(t,e,r){t.style.setProperty(e,`${r??0}px`)}function XT(t,e){Ca(t,UT,e?.inset?.top),Ca(t,WT,e?.inset?.right),Ca(t,HT,e?.inset?.bottom),Ca(t,GT,e?.inset?.left),e?.radius&&Ca(t,_T,e.radius),t.addEventListener("animationend",function r(){t.classList.remove(Pu),t.classList.remove(...qT(e?.style)),t.removeEventListener("animationend",r)}),t.classList.add(Pu),t.classList.add(...qT(e?.style))}function KT(t){XT(t,{style:"default",inset:{top:ba,right:-(Kc.panelPadding-ba),left:-(Kc.panelPadding-ba),bottom:ba}})}function YT({id:t,flash:e}){let r=document.getElementById(t);r instanceof HTMLDivElement&&(zI(r,{scrollMode:"if-needed",block:"start"}),e&&KT(r))}function QT(t){let e=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:document.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});t.dispatchEvent(e)}var ZT="breadcrumb-collection";function GP(t,e,r){let o=t.tree.getNode(r);if(!o)return null;if(!Xo(o))return{variableProvider:o,variableId:e};let n=t.tree.getNodeWithTrait(o.dataRepeaterArray.providerId,sm);return n?{variableProvider:n,variableId:o.dataRepeaterArray.id}:null}function mae(t,e,r){let{chromeStore:o,modalStore:n,variablesStore:i,contentManagementStore:a,scopeStore:s,codeEditorStore:l,selectionStore:c}=t.stores;if(r===Wm){o.setLocalizationsVisible(!0);return}let d=GP(t,e,r);if(!d)return;let{variableProvider:p,variableId:u}=d;if(Kp(p))i.selectedVariableId=u,n.set({type:"Variables",source:"variableReference"});else if(U(p)||jr(p)){let{dataIdentifier:f}=p;if(!f)return;if(Nr(f)){if(o.isViewOnly)return;n.set({type:"Confirmation",title:"External Collection",description:`This is an external ${"Collection".toLowerCase()} preview. To edit, choose a collection to swap in or create a local copy of this collection.`,confirmLabel:"View Options",source:"edit_action",onConfirm:()=>{o.chromeIsVisible=!0,mt(p)?(c.set(p.id),t.scheduler.runAtEndOfFrame(()=>YT({id:"data-repeater-panel",flash:!0}))):U(p)?t.scheduler.runAtEndOfFrame(()=>{let C=document.getElementById(ZT);C&&QT(C)}):void 0}});return}let h=Ri(t.tree,f);if(h){U(p)&&g(p.isLoaded(),"Web page node should be loaded");let C=_P({collectionNode:h,engine:t,variableId:u,variableProvider:p});C?(a.pushExistingItemToOverlayStack(C.collectionItemNode.id),a.setCollectionItemControlToHighlight(C.variableId)):(s.select(Gm,{keepHistory:!1}),c.set(h),a.setCollectionItemControlToHighlight(u));return}let y=qy(P,f);y&&l.editFile(y.file)}}function _P({collectionNode:t,engine:e,variableId:r,variableProvider:o}){let n=eN({engine:e,variableProvider:o});if(n)return n;let i=r.split(".");g(i.length>=0,"VariableID must not be empty");let a=Fi(o,e.stores.treeStore.sandboxCollectionData),s=e.tree.getNodeWithTrait(a,mo);if(s)return Ka(e.tree,e.stores.treeStore.sandboxCollectionData,r,s,t)}function eN({engine:t,variableProvider:e}){if(!ig(e))return;let[r,...o]=e.collectionFilters?.filters.flatMap(l=>l?.itemKey!=="id"?[]:l.transforms).flatMap(l=>jP(l)??[])??[];if(!r?.providerId||o.length>0)return;let n=t.tree.getNode(r.providerId);if(!n||!(Oe(n)||U(n))||!n.dataIdentifier)return;let i=Ri(t.tree,n.dataIdentifier);if(!i)return;let a=Fi(n,t.stores.treeStore.sandboxCollectionData),s=t.tree.get(a);if(mo(s))return s?{collectionItemNode:s,collectionNode:i,variableId:r.id}:eN({engine:t,variableProvider:n})}function jP(t){if(!(t.name!=="equals"&&t.name!=="isIncludedIn"||!ce(t.value)||!t.value.providerId))return t.value}var hae="My website";var gae="My description",yae="yoursite.url";export{ad as a,lr as b,iL as c,aL as d,sL as e,lL as f,cL as g,dL as h,uL as i,pL as j,mL as k,fL as l,hL as m,gL as n,yL as o,Rw as p,SL as q,TL as r,NL as s,oie as t,$T as u,AP as v,LP as w,uie as x,Wee as y,sa as z,la as A,ite as B,gte as C,zI as D,Ete as E,Ute as F,Wte as G,QI as H,Hte as I,jte as J,Jte as K,XP as L,KP as M,YP as N,Qte as O,ore as P,eT as Q,cre as R,da as S,Xl as T,Cre as U,bre as V,MC as W,DC as X,OL as Y,AD as Z,qre as _,LD as $,mn as aa,Xre as ba,kT as ca,Joe as da,ene as ea,Nie as fa,OP as ga,BP as ha,wie as ia,xie as ja,Du as ka,Rie as la,kie as ma,Mie as na,Vie as oa,PC as pa,ba as qa,XT as ra,YT as sa,ZT as ta,mae as ua,ZD as va,rne as wa,ine as xa,_F as ya,jF as za,F1 as Aa,QC as Ba,A1 as Ca,bb as Da,A6 as Ea,wl as Fa,Vl as Ga,Pl as Ha,Q8 as Ia,zv as Ja,iX as Ka,aX as La,Bk as Ma,zk as Na,$k as Oa,Uk as Pa,sX as Qa,Uv as Ra,ln as Sa,pI as Ta,dI as Ua,Fw as Va,nE as Wa,Lw as Xa,hY as Ya,CY as Za,cn as _a,Eo as $a,EC as ab,SI as bb,di as cb,II as db,yZ as eb,NI as fb,wI as gb,RI as hb,ui as ib,VI as jb,DI as kb,PI as lb,cV as mb,mee as nb,cne as ob,hae as pb,gae as qb,yae as rb,See as sb,FI as tb,mne as ub,PT as vb,AI as wb,tP as xb,mP as yb,fP as zb,IP as Ab,Tu as Bb,TP as Cb,mr as Db,hn as Eb,zT as Fb,Vu as Gb};
//# sourceMappingURL=https://app.framerstatic.com/chunk-ELWASXRW.mjs.map
